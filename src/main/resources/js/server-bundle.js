"use strict";var Wh=Object.create;var yu=Object.defineProperty;var zh=Object.getOwnPropertyDescriptor;var Hh=Object.getOwnPropertyNames;var Vh=Object.getPrototypeOf,$h=Object.prototype.hasOwnProperty;var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Uh=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Hh(t))!$h.call(e,i)&&i!==n&&yu(e,i,{get:()=>t[i],enumerable:!(r=zh(t,i))||r.enumerable});return e};var Bt=(e,t,n)=>(n=e!=null?Wh(Vh(e)):{},Uh(t||!e||!e.__esModule?yu(n,"default",{value:e,enumerable:!0}):n,e));var gi=E(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.thenable=be.typedArray=be.stringArray=be.array=be.func=be.error=be.number=be.string=be.boolean=void 0;function Kh(e){return e===!0||e===!1}be.boolean=Kh;function bu(e){return typeof e=="string"||e instanceof String}be.string=bu;function Gh(e){return typeof e=="number"||e instanceof Number}be.number=Gh;function Qh(e){return e instanceof Error}be.error=Qh;function Su(e){return typeof e=="function"}be.func=Su;function Tu(e){return Array.isArray(e)}be.array=Tu;function Jh(e){return Tu(e)&&e.every(t=>bu(t))}be.stringArray=Jh;function Xh(e,t){return Array.isArray(e)&&e.every(t)}be.typedArray=Xh;function Yh(e){return e&&Su(e.then)}be.thenable=Yh});var En=E(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.stringArray=Ie.array=Ie.func=Ie.error=Ie.number=Ie.string=Ie.boolean=void 0;function Zh(e){return e===!0||e===!1}Ie.boolean=Zh;function vu(e){return typeof e=="string"||e instanceof String}Ie.string=vu;function eg(e){return typeof e=="number"||e instanceof Number}Ie.number=eg;function tg(e){return e instanceof Error}Ie.error=tg;function ng(e){return typeof e=="function"}Ie.func=ng;function xu(e){return Array.isArray(e)}Ie.array=xu;function rg(e){return xu(e)&&e.every(t=>vu(t))}Ie.stringArray=rg});var qs=E(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var un=En(),fs;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(fs||(M.ErrorCodes=fs={}));var ps=class e extends Error{constructor(t,n,r){super(n),this.code=un.number(t)?t:fs.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=ps;var We=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=We;We.auto=new We("auto");We.byPosition=new We("byPosition");We.byName=new We("byName");var se=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return We.auto}};M.AbstractMessageSignature=se;var ms=class extends se{constructor(t){super(t,0)}};M.RequestType0=ms;var hs=class extends se{constructor(t,n=We.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=hs;var gs=class extends se{constructor(t,n=We.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=gs;var ys=class extends se{constructor(t){super(t,2)}};M.RequestType2=ys;var bs=class extends se{constructor(t){super(t,3)}};M.RequestType3=bs;var Ss=class extends se{constructor(t){super(t,4)}};M.RequestType4=Ss;var Ts=class extends se{constructor(t){super(t,5)}};M.RequestType5=Ts;var vs=class extends se{constructor(t){super(t,6)}};M.RequestType6=vs;var xs=class extends se{constructor(t){super(t,7)}};M.RequestType7=xs;var Ns=class extends se{constructor(t){super(t,8)}};M.RequestType8=Ns;var Ps=class extends se{constructor(t){super(t,9)}};M.RequestType9=Ps;var Rs=class extends se{constructor(t,n=We.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Rs;var ks=class extends se{constructor(t){super(t,0)}};M.NotificationType0=ks;var Ds=class extends se{constructor(t,n=We.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Ds;var Cs=class extends se{constructor(t){super(t,2)}};M.NotificationType2=Cs;var _s=class extends se{constructor(t){super(t,3)}};M.NotificationType3=_s;var ws=class extends se{constructor(t){super(t,4)}};M.NotificationType4=ws;var Es=class extends se{constructor(t){super(t,5)}};M.NotificationType5=Es;var Os=class extends se{constructor(t){super(t,6)}};M.NotificationType6=Os;var Is=class extends se{constructor(t){super(t,7)}};M.NotificationType7=Is;var Ms=class extends se{constructor(t){super(t,8)}};M.NotificationType8=Ms;var Ls=class extends se{constructor(t){super(t,9)}};M.NotificationType9=Ls;var Nu;(function(e){function t(i){let o=i;return o&&un.string(o.method)&&(un.string(o.id)||un.number(o.id))}e.isRequest=t;function n(i){let o=i;return o&&un.string(o.method)&&i.id===void 0}e.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(un.string(o.id)||un.number(o.id)||o.id===null)}e.isResponse=r})(Nu||(M.Message=Nu={}))});var As=E(Wt=>{"use strict";var Pu;Object.defineProperty(Wt,"__esModule",{value:!0});Wt.LRUCache=Wt.LinkedMap=Wt.Touch=void 0;var Me;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(Me||(Wt.Touch=Me={}));var yi=class{constructor(){this[Pu]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=Me.None){let r=this._map.get(t);if(r)return n!==Me.None&&this.touch(r,n),r.value}set(t,n,r=Me.None){let i=this._map.get(t);if(i)i.value=n,r!==Me.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case Me.None:this.addItemLast(i);break;case Me.First:this.addItemFirst(i);break;case Me.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(Pu=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Me.First&&n!==Me.Last)){if(n===Me.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===Me.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};Wt.LinkedMap=yi;var Fs=class extends yi{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=Me.AsNew){return super.get(t,n)}peek(t){return super.get(t,Me.None)}set(t,n){return super.set(t,n,Me.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Wt.LRUCache=Fs});var ku=E(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.Disposable=void 0;var Ru;(function(e){function t(n){return{dispose:n}}e.create=t})(Ru||(bi.Disposable=Ru={}))});var zt=E(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var js;function Bs(){if(js===void 0)throw new Error("No runtime abstraction layer installed");return js}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");js=n}e.install=t})(Bs||(Bs={}));Ws.default=Bs});var In=E(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.Emitter=On.Event=void 0;var ig=zt(),Du;(function(e){let t={dispose(){}};e.None=function(){return t}})(Du||(On.Event=Du={}));var zs=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,c=r.length;o<c;o++)try{n.push(r[o].apply(i[o],t))}catch(l){(0,ig.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Si=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new zs),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};On.Emitter=Si;Si._noop=function(){}});var xi=E(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.CancellationTokenSource=Mn.CancellationToken=void 0;var og=zt(),sg=En(),Hs=In(),Ti;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Hs.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Hs.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||sg.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(Ti||(Mn.CancellationToken=Ti={}));var ag=Object.freeze(function(e,t){let n=(0,og.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),vi=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ag:(this._emitter||(this._emitter=new Hs.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Vs=class{get token(){return this._token||(this._token=new vi),this._token}cancel(){this._token?this._token.cancel():this._token=Ti.Cancelled}dispose(){this._token?this._token instanceof vi&&this._token.dispose():this._token=Ti.None}};Mn.CancellationTokenSource=Vs});var Cu=E(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.SharedArrayReceiverStrategy=Ln.SharedArraySenderStrategy=void 0;var cg=xi(),yr;(function(e){e.Continue=0,e.Cancelled=1})(yr||(yr={}));var $s=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=yr.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,yr.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};Ln.SharedArraySenderStrategy=$s;var Us=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===yr.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Ks=class{constructor(t){this.token=new Us(t)}cancel(){}dispose(){}},Gs=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new cg.CancellationTokenSource:new Ks(n)}};Ln.SharedArrayReceiverStrategy=Gs});var Js=E(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.Semaphore=void 0;var ug=zt(),Qs=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ug.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};Ni.Semaphore=Qs});var wu=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.ReadableStreamMessageReader=Ht.AbstractMessageReader=Ht.MessageReader=void 0;var Ys=zt(),qn=En(),Xs=In(),dg=Js(),_u;(function(e){function t(n){let r=n;return r&&qn.func(r.listen)&&qn.func(r.dispose)&&qn.func(r.onError)&&qn.func(r.onClose)&&qn.func(r.onPartialMessage)}e.is=t})(_u||(Ht.MessageReader=_u={}));var Pi=class{constructor(){this.errorEmitter=new Xs.Emitter,this.closeEmitter=new Xs.Emitter,this.partialMessageEmitter=new Xs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${qn.string(t.message)?t.message:"unknown"}`)}};Ht.AbstractMessageReader=Pi;var Zs;(function(e){function t(n){let r,i,o,c=new Map,l,b=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,c.set(o.name,o)),n.contentDecoders!==void 0)for(let T of n.contentDecoders)c.set(T.name,T);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,b.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let T of n.contentTypeDecoders)b.set(T.name,T)}return l===void 0&&(l=(0,Ys.default)().applicationJson.decoder,b.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:c,contentTypeDecoder:l,contentTypeDecoders:b}}e.fromOptions=t})(Zs||(Zs={}));var ea=class extends Pi{constructor(t,n){super(),this.readable=t,this.options=Zs.fromOptions(n),this.buffer=(0,Ys.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new dg.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Ys.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ht.ReadableStreamMessageReader=ea});var Lu=E(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.WriteableStreamMessageWriter=Vt.AbstractMessageWriter=Vt.MessageWriter=void 0;var Eu=zt(),br=En(),lg=Js(),Ou=In(),fg="Content-Length: ",Iu=`\r
`,Mu;(function(e){function t(n){let r=n;return r&&br.func(r.dispose)&&br.func(r.onClose)&&br.func(r.onError)&&br.func(r.write)}e.is=t})(Mu||(Vt.MessageWriter=Mu={}));var Ri=class{constructor(){this.errorEmitter=new Ou.Emitter,this.closeEmitter=new Ou.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${br.string(t.message)?t.message:"unknown"}`)}};Vt.AbstractMessageWriter=Ri;var ta;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Eu.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Eu.default)().applicationJson.encoder}}e.fromOptions=t})(ta||(ta={}));var na=class extends Ri{constructor(t,n){super(),this.writable=t,this.options=ta.fromOptions(n),this.errorCount=0,this.writeSemaphore=new lg.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(fg,r.byteLength.toString(),Iu),i.push(Iu),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};Vt.WriteableStreamMessageWriter=na});var qu=E(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.AbstractMessageBuffer=void 0;var pg=13,mg=10,hg=`\r
`,ra=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let T=this._chunks[r];for(i=0;i<T.length;){switch(T[i]){case pg:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case mg:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=T.byteLength,r++}if(n!==4)return;let c=this._read(o+i),l=new Map,b=this.toString(c,"ascii").split(hg);if(b.length<2)return l;for(let T=0;T<b.length-2;T++){let x=b[T],w=x.indexOf(":");if(w===-1)throw new Error(`Message header must separate key and value using ':'
${x}`);let I=x.substr(0,w),ie=x.substr(w+1).trim();l.set(t?I.toLowerCase():I,ie)}return l}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(o)}if(this._chunks[0].byteLength>t){let o=this._chunks[0],c=this.asNative(o,t);return this._chunks[0]=o.slice(t),this._totalLength-=t,c}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let o=this._chunks[i];if(o.byteLength>t){let c=o.slice(0,t);n.set(c,r),r+=t,this._chunks[i]=o.slice(t),this._totalLength-=t,t-=t}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,t-=o.byteLength}return n}};ki.AbstractMessageBuffer=ra});var Wu=E(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.createMessageConnection=j.ConnectionOptions=j.MessageStrategy=j.CancellationStrategy=j.CancellationSenderStrategy=j.CancellationReceiverStrategy=j.RequestCancellationReceiverStrategy=j.IdCancellationReceiverStrategy=j.ConnectionStrategy=j.ConnectionError=j.ConnectionErrors=j.LogTraceNotification=j.SetTraceNotification=j.TraceFormat=j.TraceValues=j.Trace=j.NullLogger=j.ProgressType=j.ProgressToken=void 0;var Fu=zt(),de=En(),L=qs(),Au=As(),Sr=In(),ia=xi(),xr;(function(e){e.type=new L.NotificationType("$/cancelRequest")})(xr||(xr={}));var oa;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(oa||(j.ProgressToken=oa={}));var Tr;(function(e){e.type=new L.NotificationType("$/progress")})(Tr||(Tr={}));var sa=class{constructor(){}};j.ProgressType=sa;var aa;(function(e){function t(n){return de.func(n)}e.is=t})(aa||(aa={}));j.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var J;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(J||(j.Trace=J={}));var ju;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(ju||(j.TraceValues=ju={}));(function(e){function t(r){if(!de.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(J||(j.Trace=J={}));var Ke;(function(e){e.Text="text",e.JSON="json"})(Ke||(j.TraceFormat=Ke={}));(function(e){function t(n){return de.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Ke||(j.TraceFormat=Ke={}));var ca;(function(e){e.type=new L.NotificationType("$/setTrace")})(ca||(j.SetTraceNotification=ca={}));var Di;(function(e){e.type=new L.NotificationType("$/logTrace")})(Di||(j.LogTraceNotification=Di={}));var vr;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(vr||(j.ConnectionErrors=vr={}));var Fn=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};j.ConnectionError=Fn;var ua;(function(e){function t(n){let r=n;return r&&de.func(r.cancelUndispatched)}e.is=t})(ua||(j.ConnectionStrategy=ua={}));var Ci;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}e.is=t})(Ci||(j.IdCancellationReceiverStrategy=Ci={}));var da;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&de.func(r.createCancellationTokenSource)&&(r.dispose===void 0||de.func(r.dispose))}e.is=t})(da||(j.RequestCancellationReceiverStrategy=da={}));var _i;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new ia.CancellationTokenSource}});function t(n){return Ci.is(n)||da.is(n)}e.is=t})(_i||(j.CancellationReceiverStrategy=_i={}));var wi;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(xr.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&de.func(r.sendCancellation)&&de.func(r.cleanup)}e.is=t})(wi||(j.CancellationSenderStrategy=wi={}));var Ei;(function(e){e.Message=Object.freeze({receiver:_i.Message,sender:wi.Message});function t(n){let r=n;return r&&_i.is(r.receiver)&&wi.is(r.sender)}e.is=t})(Ei||(j.CancellationStrategy=Ei={}));var Oi;(function(e){function t(n){let r=n;return r&&de.func(r.handleMessage)}e.is=t})(Oi||(j.MessageStrategy=Oi={}));var Bu;(function(e){function t(n){let r=n;return r&&(Ei.is(r.cancellationStrategy)||ua.is(r.connectionStrategy)||Oi.is(r.messageStrategy))}e.is=t})(Bu||(j.ConnectionOptions=Bu={}));var dt;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(dt||(dt={}));function gg(e,t,n,r){let i=n!==void 0?n:j.NullLogger,o=0,c=0,l=0,b="2.0",T,x=new Map,w,I=new Map,ie=new Map,ue,le=new Au.LinkedMap,xe=new Map,Q=new Set,S=new Map,y=J.Off,D=Ke.Text,W,te=dt.New,fe=new Sr.Emitter,st=new Sr.Emitter,on=new Sr.Emitter,Ft=new Sr.Emitter,At=new Sr.Emitter,Be=r&&r.cancellationStrategy?r.cancellationStrategy:Ei.Message;function Pn(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Rn(f){return f===null?"res-unknown-"+(++l).toString():"res-"+f.toString()}function ei(){return"not-"+(++c).toString()}function ls(f,P){L.Message.isRequest(P)?f.set(Pn(P.id),P):L.Message.isResponse(P)?f.set(Rn(P.id),P):f.set(ei(),P)}function ti(f){}function lr(){return te===dt.Listening}function sn(){return te===dt.Closed}function Pt(){return te===dt.Disposed}function kn(){(te===dt.New||te===dt.Listening)&&(te=dt.Closed,st.fire(void 0))}function an(f){fe.fire([f,void 0,void 0])}function ni(f){fe.fire(f)}e.onClose(kn),e.onError(an),t.onClose(kn),t.onError(ni);function fr(){ue||le.size===0||(ue=(0,Fu.default)().timer.setImmediate(()=>{ue=void 0,ri()}))}function pr(f){L.Message.isRequest(f)?oi(f):L.Message.isNotification(f)?ai(f):L.Message.isResponse(f)?si(f):Dn(f)}function ri(){if(le.size===0)return;let f=le.shift();try{let P=r?.messageStrategy;Oi.is(P)?P.handleMessage(f,pr):pr(f)}finally{fr()}}let ii=f=>{try{if(L.Message.isNotification(f)&&f.method===xr.type.method){let P=f.params.id,C=Pn(P),O=le.get(C);if(L.Message.isRequest(O)){let X=r?.connectionStrategy,oe=X&&X.cancelUndispatched?X.cancelUndispatched(O,ti):void 0;if(oe&&(oe.error!==void 0||oe.result!==void 0)){le.delete(C),S.delete(P),oe.id=O.id,cn(oe,f.method,Date.now()),t.write(oe).catch(()=>i.error("Sending response for canceled message failed."));return}}let Y=S.get(P);if(Y!==void 0){Y.cancel(),Cn(f);return}else Q.add(P)}ls(le,f)}finally{fr()}};function oi(f){if(Pt())return;function P(H,ee,K){let pe={jsonrpc:b,id:f.id};H instanceof L.ResponseError?pe.error=H.toJson():pe.result=H===void 0?null:H,cn(pe,ee,K),t.write(pe).catch(()=>i.error("Sending response failed."))}function C(H,ee,K){let pe={jsonrpc:b,id:f.id,error:H.toJson()};cn(pe,ee,K),t.write(pe).catch(()=>i.error("Sending response failed."))}function O(H,ee,K){H===void 0&&(H=null);let pe={jsonrpc:b,id:f.id,result:H};cn(pe,ee,K),t.write(pe).catch(()=>i.error("Sending response failed."))}di(f);let Y=x.get(f.method),X,oe;Y&&(X=Y.type,oe=Y.handler);let ae=Date.now();if(oe||T){let H=f.id??String(Date.now()),ee=Ci.is(Be.receiver)?Be.receiver.createCancellationTokenSource(H):Be.receiver.createCancellationTokenSource(f);f.id!==null&&Q.has(f.id)&&ee.cancel(),f.id!==null&&S.set(H,ee);try{let K;if(oe)if(f.params===void 0){if(X!==void 0&&X.numberOfParams!==0){C(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${f.method} defines ${X.numberOfParams} params but received none.`),f.method,ae);return}K=oe(ee.token)}else if(Array.isArray(f.params)){if(X!==void 0&&X.parameterStructures===L.ParameterStructures.byName){C(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,ae);return}K=oe(...f.params,ee.token)}else{if(X!==void 0&&X.parameterStructures===L.ParameterStructures.byPosition){C(new L.ResponseError(L.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,ae);return}K=oe(f.params,ee.token)}else T&&(K=T(f.method,f.params,ee.token));let pe=K;K?pe.then?pe.then(Re=>{S.delete(H),P(Re,f.method,ae)},Re=>{S.delete(H),Re instanceof L.ResponseError?C(Re,f.method,ae):Re&&de.string(Re.message)?C(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Re.message}`),f.method,ae):C(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,ae)}):(S.delete(H),P(K,f.method,ae)):(S.delete(H),O(K,f.method,ae))}catch(K){S.delete(H),K instanceof L.ResponseError?P(K,f.method,ae):K&&de.string(K.message)?C(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${K.message}`),f.method,ae):C(new L.ResponseError(L.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,ae)}}else C(new L.ResponseError(L.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,ae)}function si(f){if(!Pt())if(f.id===null)f.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let P=f.id,C=xe.get(P);if(li(f,C),C!==void 0){xe.delete(P);try{if(f.error){let O=f.error;C.reject(new L.ResponseError(O.code,O.message,O.data))}else if(f.result!==void 0)C.resolve(f.result);else throw new Error("Should never happen.")}catch(O){O.message?i.error(`Response handler '${C.method}' failed with message: ${O.message}`):i.error(`Response handler '${C.method}' failed unexpectedly.`)}}}}function ai(f){if(Pt())return;let P,C;if(f.method===xr.type.method){let O=f.params.id;Q.delete(O),Cn(f);return}else{let O=I.get(f.method);O&&(C=O.handler,P=O.type)}if(C||w)try{if(Cn(f),C)if(f.params===void 0)P!==void 0&&P.numberOfParams!==0&&P.parameterStructures!==L.ParameterStructures.byName&&i.error(`Notification ${f.method} defines ${P.numberOfParams} params but received none.`),C();else if(Array.isArray(f.params)){let O=f.params;f.method===Tr.type.method&&O.length===2&&oa.is(O[0])?C({token:O[0],value:O[1]}):(P!==void 0&&(P.parameterStructures===L.ParameterStructures.byName&&i.error(`Notification ${f.method} defines parameters by name but received parameters by position`),P.numberOfParams!==f.params.length&&i.error(`Notification ${f.method} defines ${P.numberOfParams} params but received ${O.length} arguments`)),C(...O))}else P!==void 0&&P.parameterStructures===L.ParameterStructures.byPosition&&i.error(`Notification ${f.method} defines parameters by position but received parameters by name`),C(f.params);else w&&w(f.method,f.params)}catch(O){O.message?i.error(`Notification handler '${f.method}' failed with message: ${O.message}`):i.error(`Notification handler '${f.method}' failed unexpectedly.`)}else on.fire(f)}function Dn(f){if(!f){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);let P=f;if(de.string(P.id)||de.number(P.id)){let C=P.id,O=xe.get(C);O&&O.reject(new Error("The received response has neither a result nor an error property."))}}function at(f){if(f!=null)switch(y){case J.Verbose:return JSON.stringify(f,null,4);case J.Compact:return JSON.stringify(f);default:return}}function ci(f){if(!(y===J.Off||!W))if(D===Ke.Text){let P;(y===J.Verbose||y===J.Compact)&&f.params&&(P=`Params: ${at(f.params)}

`),W.log(`Sending request '${f.method} - (${f.id})'.`,P)}else Rt("send-request",f)}function ui(f){if(!(y===J.Off||!W))if(D===Ke.Text){let P;(y===J.Verbose||y===J.Compact)&&(f.params?P=`Params: ${at(f.params)}

`:P=`No parameters provided.

`),W.log(`Sending notification '${f.method}'.`,P)}else Rt("send-notification",f)}function cn(f,P,C){if(!(y===J.Off||!W))if(D===Ke.Text){let O;(y===J.Verbose||y===J.Compact)&&(f.error&&f.error.data?O=`Error data: ${at(f.error.data)}

`:f.result?O=`Result: ${at(f.result)}

`:f.error===void 0&&(O=`No result returned.

`)),W.log(`Sending response '${P} - (${f.id})'. Processing request took ${Date.now()-C}ms`,O)}else Rt("send-response",f)}function di(f){if(!(y===J.Off||!W))if(D===Ke.Text){let P;(y===J.Verbose||y===J.Compact)&&f.params&&(P=`Params: ${at(f.params)}

`),W.log(`Received request '${f.method} - (${f.id})'.`,P)}else Rt("receive-request",f)}function Cn(f){if(!(y===J.Off||!W||f.method===Di.type.method))if(D===Ke.Text){let P;(y===J.Verbose||y===J.Compact)&&(f.params?P=`Params: ${at(f.params)}

`:P=`No parameters provided.

`),W.log(`Received notification '${f.method}'.`,P)}else Rt("receive-notification",f)}function li(f,P){if(!(y===J.Off||!W))if(D===Ke.Text){let C;if((y===J.Verbose||y===J.Compact)&&(f.error&&f.error.data?C=`Error data: ${at(f.error.data)}

`:f.result?C=`Result: ${at(f.result)}

`:f.error===void 0&&(C=`No result returned.

`)),P){let O=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";W.log(`Received response '${P.method} - (${f.id})' in ${Date.now()-P.timerStart}ms.${O}`,C)}else W.log(`Received response ${f.id} without active response promise.`,C)}else Rt("receive-response",f)}function Rt(f,P){if(!W||y===J.Off)return;let C={isLSPMessage:!0,type:f,message:P,timestamp:Date.now()};W.log(C)}function jt(){if(sn())throw new Fn(vr.Closed,"Connection is closed.");if(Pt())throw new Fn(vr.Disposed,"Connection is disposed.")}function fi(){if(lr())throw new Fn(vr.AlreadyListening,"Connection is already listening")}function pi(){if(!lr())throw new Error("Call listen() first.")}function ht(f){return f===void 0?null:f}function mr(f){if(f!==null)return f}function hr(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function _n(f,P){switch(f){case L.ParameterStructures.auto:return hr(P)?mr(P):[ht(P)];case L.ParameterStructures.byName:if(!hr(P))throw new Error("Received parameters by name but param is not an object literal.");return mr(P);case L.ParameterStructures.byPosition:return[ht(P)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function gr(f,P){let C,O=f.numberOfParams;switch(O){case 0:C=void 0;break;case 1:C=_n(f.parameterStructures,P[0]);break;default:C=[];for(let Y=0;Y<P.length&&Y<O;Y++)C.push(ht(P[Y]));if(P.length<O)for(let Y=P.length;Y<O;Y++)C.push(null);break}return C}let kt={sendNotification:(f,...P)=>{jt();let C,O;if(de.string(f)){C=f;let X=P[0],oe=0,ae=L.ParameterStructures.auto;L.ParameterStructures.is(X)&&(oe=1,ae=X);let H=P.length,ee=H-oe;switch(ee){case 0:O=void 0;break;case 1:O=_n(ae,P[oe]);break;default:if(ae===L.ParameterStructures.byName)throw new Error(`Received ${ee} parameters for 'by Name' notification parameter structure.`);O=P.slice(oe,H).map(K=>ht(K));break}}else{let X=P;C=f.method,O=gr(f,X)}let Y={jsonrpc:b,method:C,params:O};return ui(Y),t.write(Y).catch(X=>{throw i.error("Sending notification failed."),X})},onNotification:(f,P)=>{jt();let C;return de.func(f)?w=f:P&&(de.string(f)?(C=f,I.set(f,{type:void 0,handler:P})):(C=f.method,I.set(f.method,{type:f,handler:P}))),{dispose:()=>{C!==void 0?I.delete(C):w=void 0}}},onProgress:(f,P,C)=>{if(ie.has(P))throw new Error(`Progress handler for token ${P} already registered`);return ie.set(P,C),{dispose:()=>{ie.delete(P)}}},sendProgress:(f,P,C)=>kt.sendNotification(Tr.type,{token:P,value:C}),onUnhandledProgress:Ft.event,sendRequest:(f,...P)=>{jt(),pi();let C,O,Y;if(de.string(f)){C=f;let H=P[0],ee=P[P.length-1],K=0,pe=L.ParameterStructures.auto;L.ParameterStructures.is(H)&&(K=1,pe=H);let Re=P.length;ia.CancellationToken.is(ee)&&(Re=Re-1,Y=ee);let Ue=Re-K;switch(Ue){case 0:O=void 0;break;case 1:O=_n(pe,P[K]);break;default:if(pe===L.ParameterStructures.byName)throw new Error(`Received ${Ue} parameters for 'by Name' request parameter structure.`);O=P.slice(K,Re).map(mi=>ht(mi));break}}else{let H=P;C=f.method,O=gr(f,H);let ee=f.numberOfParams;Y=ia.CancellationToken.is(H[ee])?H[ee]:void 0}let X=o++,oe;Y&&(oe=Y.onCancellationRequested(()=>{let H=Be.sender.sendCancellation(kt,X);return H===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${X}`),Promise.resolve()):H.catch(()=>{i.log(`Sending cancellation messages for id ${X} failed`)})}));let ae={jsonrpc:b,id:X,method:C,params:O};return ci(ae),typeof Be.sender.enableCancellation=="function"&&Be.sender.enableCancellation(ae),new Promise(async(H,ee)=>{let K=Ue=>{H(Ue),Be.sender.cleanup(X),oe?.dispose()},pe=Ue=>{ee(Ue),Be.sender.cleanup(X),oe?.dispose()},Re={method:C,timerStart:Date.now(),resolve:K,reject:pe};try{await t.write(ae),xe.set(X,Re)}catch(Ue){throw i.error("Sending request failed."),Re.reject(new L.ResponseError(L.ErrorCodes.MessageWriteError,Ue.message?Ue.message:"Unknown reason")),Ue}})},onRequest:(f,P)=>{jt();let C=null;return aa.is(f)?(C=void 0,T=f):de.string(f)?(C=null,P!==void 0&&(C=f,x.set(f,{handler:P,type:void 0}))):P!==void 0&&(C=f.method,x.set(f.method,{type:f,handler:P})),{dispose:()=>{C!==null&&(C!==void 0?x.delete(C):T=void 0)}}},hasPendingResponse:()=>xe.size>0,trace:async(f,P,C)=>{let O=!1,Y=Ke.Text;C!==void 0&&(de.boolean(C)?O=C:(O=C.sendNotification||!1,Y=C.traceFormat||Ke.Text)),y=f,D=Y,y===J.Off?W=void 0:W=P,O&&!sn()&&!Pt()&&await kt.sendNotification(ca.type,{value:J.toString(f)})},onError:fe.event,onClose:st.event,onUnhandledNotification:on.event,onDispose:At.event,end:()=>{t.end()},dispose:()=>{if(Pt())return;te=dt.Disposed,At.fire(void 0);let f=new L.ResponseError(L.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let P of xe.values())P.reject(f);xe=new Map,S=new Map,Q=new Set,le=new Au.LinkedMap,de.func(t.dispose)&&t.dispose(),de.func(e.dispose)&&e.dispose()},listen:()=>{jt(),fi(),te=dt.Listening,e.listen(ii)},inspect:()=>{(0,Fu.default)().console.log("inspect")}};return kt.onNotification(Di.type,f=>{if(y===J.Off||!W)return;let P=y===J.Verbose||y===J.Compact;W.log(f.message,P?f.verbose:void 0)}),kt.onNotification(Tr.type,f=>{let P=ie.get(f.token);P?P(f.value):Ft.fire(f)}),kt}j.createMessageConnection=gg});var Ii=E(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.ProgressType=v.ProgressToken=v.createMessageConnection=v.NullLogger=v.ConnectionOptions=v.ConnectionStrategy=v.AbstractMessageBuffer=v.WriteableStreamMessageWriter=v.AbstractMessageWriter=v.MessageWriter=v.ReadableStreamMessageReader=v.AbstractMessageReader=v.MessageReader=v.SharedArrayReceiverStrategy=v.SharedArraySenderStrategy=v.CancellationToken=v.CancellationTokenSource=v.Emitter=v.Event=v.Disposable=v.LRUCache=v.Touch=v.LinkedMap=v.ParameterStructures=v.NotificationType9=v.NotificationType8=v.NotificationType7=v.NotificationType6=v.NotificationType5=v.NotificationType4=v.NotificationType3=v.NotificationType2=v.NotificationType1=v.NotificationType0=v.NotificationType=v.ErrorCodes=v.ResponseError=v.RequestType9=v.RequestType8=v.RequestType7=v.RequestType6=v.RequestType5=v.RequestType4=v.RequestType3=v.RequestType2=v.RequestType1=v.RequestType0=v.RequestType=v.Message=v.RAL=void 0;v.MessageStrategy=v.CancellationStrategy=v.CancellationSenderStrategy=v.CancellationReceiverStrategy=v.ConnectionError=v.ConnectionErrors=v.LogTraceNotification=v.SetTraceNotification=v.TraceFormat=v.TraceValues=v.Trace=void 0;var re=qs();Object.defineProperty(v,"Message",{enumerable:!0,get:function(){return re.Message}});Object.defineProperty(v,"RequestType",{enumerable:!0,get:function(){return re.RequestType}});Object.defineProperty(v,"RequestType0",{enumerable:!0,get:function(){return re.RequestType0}});Object.defineProperty(v,"RequestType1",{enumerable:!0,get:function(){return re.RequestType1}});Object.defineProperty(v,"RequestType2",{enumerable:!0,get:function(){return re.RequestType2}});Object.defineProperty(v,"RequestType3",{enumerable:!0,get:function(){return re.RequestType3}});Object.defineProperty(v,"RequestType4",{enumerable:!0,get:function(){return re.RequestType4}});Object.defineProperty(v,"RequestType5",{enumerable:!0,get:function(){return re.RequestType5}});Object.defineProperty(v,"RequestType6",{enumerable:!0,get:function(){return re.RequestType6}});Object.defineProperty(v,"RequestType7",{enumerable:!0,get:function(){return re.RequestType7}});Object.defineProperty(v,"RequestType8",{enumerable:!0,get:function(){return re.RequestType8}});Object.defineProperty(v,"RequestType9",{enumerable:!0,get:function(){return re.RequestType9}});Object.defineProperty(v,"ResponseError",{enumerable:!0,get:function(){return re.ResponseError}});Object.defineProperty(v,"ErrorCodes",{enumerable:!0,get:function(){return re.ErrorCodes}});Object.defineProperty(v,"NotificationType",{enumerable:!0,get:function(){return re.NotificationType}});Object.defineProperty(v,"NotificationType0",{enumerable:!0,get:function(){return re.NotificationType0}});Object.defineProperty(v,"NotificationType1",{enumerable:!0,get:function(){return re.NotificationType1}});Object.defineProperty(v,"NotificationType2",{enumerable:!0,get:function(){return re.NotificationType2}});Object.defineProperty(v,"NotificationType3",{enumerable:!0,get:function(){return re.NotificationType3}});Object.defineProperty(v,"NotificationType4",{enumerable:!0,get:function(){return re.NotificationType4}});Object.defineProperty(v,"NotificationType5",{enumerable:!0,get:function(){return re.NotificationType5}});Object.defineProperty(v,"NotificationType6",{enumerable:!0,get:function(){return re.NotificationType6}});Object.defineProperty(v,"NotificationType7",{enumerable:!0,get:function(){return re.NotificationType7}});Object.defineProperty(v,"NotificationType8",{enumerable:!0,get:function(){return re.NotificationType8}});Object.defineProperty(v,"NotificationType9",{enumerable:!0,get:function(){return re.NotificationType9}});Object.defineProperty(v,"ParameterStructures",{enumerable:!0,get:function(){return re.ParameterStructures}});var la=As();Object.defineProperty(v,"LinkedMap",{enumerable:!0,get:function(){return la.LinkedMap}});Object.defineProperty(v,"LRUCache",{enumerable:!0,get:function(){return la.LRUCache}});Object.defineProperty(v,"Touch",{enumerable:!0,get:function(){return la.Touch}});var yg=ku();Object.defineProperty(v,"Disposable",{enumerable:!0,get:function(){return yg.Disposable}});var zu=In();Object.defineProperty(v,"Event",{enumerable:!0,get:function(){return zu.Event}});Object.defineProperty(v,"Emitter",{enumerable:!0,get:function(){return zu.Emitter}});var Hu=xi();Object.defineProperty(v,"CancellationTokenSource",{enumerable:!0,get:function(){return Hu.CancellationTokenSource}});Object.defineProperty(v,"CancellationToken",{enumerable:!0,get:function(){return Hu.CancellationToken}});var Vu=Cu();Object.defineProperty(v,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Vu.SharedArraySenderStrategy}});Object.defineProperty(v,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Vu.SharedArrayReceiverStrategy}});var fa=wu();Object.defineProperty(v,"MessageReader",{enumerable:!0,get:function(){return fa.MessageReader}});Object.defineProperty(v,"AbstractMessageReader",{enumerable:!0,get:function(){return fa.AbstractMessageReader}});Object.defineProperty(v,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return fa.ReadableStreamMessageReader}});var pa=Lu();Object.defineProperty(v,"MessageWriter",{enumerable:!0,get:function(){return pa.MessageWriter}});Object.defineProperty(v,"AbstractMessageWriter",{enumerable:!0,get:function(){return pa.AbstractMessageWriter}});Object.defineProperty(v,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return pa.WriteableStreamMessageWriter}});var bg=qu();Object.defineProperty(v,"AbstractMessageBuffer",{enumerable:!0,get:function(){return bg.AbstractMessageBuffer}});var we=Wu();Object.defineProperty(v,"ConnectionStrategy",{enumerable:!0,get:function(){return we.ConnectionStrategy}});Object.defineProperty(v,"ConnectionOptions",{enumerable:!0,get:function(){return we.ConnectionOptions}});Object.defineProperty(v,"NullLogger",{enumerable:!0,get:function(){return we.NullLogger}});Object.defineProperty(v,"createMessageConnection",{enumerable:!0,get:function(){return we.createMessageConnection}});Object.defineProperty(v,"ProgressToken",{enumerable:!0,get:function(){return we.ProgressToken}});Object.defineProperty(v,"ProgressType",{enumerable:!0,get:function(){return we.ProgressType}});Object.defineProperty(v,"Trace",{enumerable:!0,get:function(){return we.Trace}});Object.defineProperty(v,"TraceValues",{enumerable:!0,get:function(){return we.TraceValues}});Object.defineProperty(v,"TraceFormat",{enumerable:!0,get:function(){return we.TraceFormat}});Object.defineProperty(v,"SetTraceNotification",{enumerable:!0,get:function(){return we.SetTraceNotification}});Object.defineProperty(v,"LogTraceNotification",{enumerable:!0,get:function(){return we.LogTraceNotification}});Object.defineProperty(v,"ConnectionErrors",{enumerable:!0,get:function(){return we.ConnectionErrors}});Object.defineProperty(v,"ConnectionError",{enumerable:!0,get:function(){return we.ConnectionError}});Object.defineProperty(v,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return we.CancellationReceiverStrategy}});Object.defineProperty(v,"CancellationSenderStrategy",{enumerable:!0,get:function(){return we.CancellationSenderStrategy}});Object.defineProperty(v,"CancellationStrategy",{enumerable:!0,get:function(){return we.CancellationStrategy}});Object.defineProperty(v,"MessageStrategy",{enumerable:!0,get:function(){return we.MessageStrategy}});var Sg=zt();v.RAL=Sg.default});var Ku=E(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});var $u=require("util"),Ct=Ii(),Mi=class e extends Ct.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new $u.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};Mi.emptyBuffer=Buffer.allocUnsafe(0);var ma=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ct.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ct.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ct.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Ct.Disposable.create(()=>this.stream.off("data",t))}},ha=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ct.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ct.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ct.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let o=c=>{c==null?r():i(c)};typeof t=="string"?this.stream.write(t,n,o):this.stream.write(t,o)})}end(){this.stream.end()}},Uu=Object.freeze({messageBuffer:Object.freeze({create:e=>new Mi(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new $u.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new ma(e),asWritableStream:e=>new ha(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function ga(){return Uu}(function(e){function t(){Ct.RAL.install(Uu)}e.install=t})(ga||(ga={}));ya.default=ga});var fn=E(U=>{"use strict";var Tg=U&&U.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),vg=U&&U.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Tg(t,e,n)};Object.defineProperty(U,"__esModule",{value:!0});U.createMessageConnection=U.createServerSocketTransport=U.createClientSocketTransport=U.createServerPipeTransport=U.createClientPipeTransport=U.generateRandomPipeName=U.StreamMessageWriter=U.StreamMessageReader=U.SocketMessageWriter=U.SocketMessageReader=U.PortMessageWriter=U.PortMessageReader=U.IPCMessageWriter=U.IPCMessageReader=void 0;var An=Ku();An.default.install();var Gu=require("path"),xg=require("os"),Ng=require("crypto"),Fi=require("net"),Ge=Ii();vg(Ii(),U);var ba=class extends Ge.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Ge.Disposable.create(()=>this.process.off("message",t))}};U.IPCMessageReader=ba;var Sa=class extends Ge.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.IPCMessageWriter=Sa;var Ta=class extends Ge.AbstractMessageReader{constructor(t){super(),this.onData=new Ge.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};U.PortMessageReader=Ta;var va=class extends Ge.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};U.PortMessageWriter=va;var dn=class extends Ge.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,An.default)().stream.asReadableStream(t),n)}};U.SocketMessageReader=dn;var ln=class extends Ge.WriteableStreamMessageWriter{constructor(t,n){super((0,An.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};U.SocketMessageWriter=ln;var Li=class extends Ge.ReadableStreamMessageReader{constructor(t,n){super((0,An.default)().stream.asReadableStream(t),n)}};U.StreamMessageReader=Li;var qi=class extends Ge.WriteableStreamMessageWriter{constructor(t,n){super((0,An.default)().stream.asWritableStream(t),n)}};U.StreamMessageWriter=qi;var Qu=process.env.XDG_RUNTIME_DIR,Pg=new Map([["linux",107],["darwin",103]]);function Rg(){let e=(0,Ng.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;Qu?t=Gu.join(Qu,`vscode-ipc-${e}.sock`):t=Gu.join(xg.tmpdir(),`vscode-${e}.sock`);let n=Pg.get(process.platform);return n!==void 0&&t.length>n&&(0,An.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}U.generateRandomPipeName=Rg;function kg(e,t="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let c=(0,Fi.createServer)(l=>{c.close(),n([new dn(l,t),new ln(l,t)])});c.on("error",o),c.listen(e,()=>{c.removeListener("error",o),i({onConnected:()=>r})})})}U.createClientPipeTransport=kg;function Dg(e,t="utf-8"){let n=(0,Fi.createConnection)(e);return[new dn(n,t),new ln(n,t)]}U.createServerPipeTransport=Dg;function Cg(e,t="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let c=(0,Fi.createServer)(l=>{c.close(),n([new dn(l,t),new ln(l,t)])});c.on("error",o),c.listen(e,"127.0.0.1",()=>{c.removeListener("error",o),i({onConnected:()=>r})})})}U.createClientSocketTransport=Cg;function _g(e,t="utf-8"){let n=(0,Fi.createConnection)(e,"127.0.0.1");return[new dn(n,t),new ln(n,t)]}U.createServerSocketTransport=_g;function wg(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function Eg(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function Og(e,t,n,r){n||(n=Ge.NullLogger);let i=wg(e)?new Li(e):e,o=Eg(t)?new qi(t):t;return Ge.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ge.createMessageConnection)(i,o,n,r)}U.createMessageConnection=Og});var xa=E((px,Ju)=>{"use strict";Ju.exports=fn()});var ji=E((Xu,Ai)=>{(function(e){if(typeof Ai=="object"&&typeof Ai.exports=="object"){var t=e(require,Xu);t!==void 0&&(Ai.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(a){function p(m){return typeof m=="string"}a.is=p})(n||(t.DocumentUri=n={}));var r;(function(a){function p(m){return typeof m=="string"}a.is=p})(r||(t.URI=r={}));var i;(function(a){a.MIN_VALUE=-2147483648,a.MAX_VALUE=2147483647;function p(m){return typeof m=="number"&&a.MIN_VALUE<=m&&m<=a.MAX_VALUE}a.is=p})(i||(t.integer=i={}));var o;(function(a){a.MIN_VALUE=0,a.MAX_VALUE=2147483647;function p(m){return typeof m=="number"&&a.MIN_VALUE<=m&&m<=a.MAX_VALUE}a.is=p})(o||(t.uinteger=o={}));var c;(function(a){function p(u,s){return u===Number.MAX_VALUE&&(u=o.MAX_VALUE),s===Number.MAX_VALUE&&(s=o.MAX_VALUE),{line:u,character:s}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&g.uinteger(s.line)&&g.uinteger(s.character)}a.is=m})(c||(t.Position=c={}));var l;(function(a){function p(u,s,h,R){if(g.uinteger(u)&&g.uinteger(s)&&g.uinteger(h)&&g.uinteger(R))return{start:c.create(u,s),end:c.create(h,R)};if(c.is(u)&&c.is(s))return{start:u,end:s};throw new Error("Range#create called with invalid arguments[".concat(u,", ").concat(s,", ").concat(h,", ").concat(R,"]"))}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&c.is(s.start)&&c.is(s.end)}a.is=m})(l||(t.Range=l={}));var b;(function(a){function p(u,s){return{uri:u,range:s}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&l.is(s.range)&&(g.string(s.uri)||g.undefined(s.uri))}a.is=m})(b||(t.Location=b={}));var T;(function(a){function p(u,s,h,R){return{targetUri:u,targetRange:s,targetSelectionRange:h,originSelectionRange:R}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&l.is(s.targetRange)&&g.string(s.targetUri)&&l.is(s.targetSelectionRange)&&(l.is(s.originSelectionRange)||g.undefined(s.originSelectionRange))}a.is=m})(T||(t.LocationLink=T={}));var x;(function(a){function p(u,s,h,R){return{red:u,green:s,blue:h,alpha:R}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&g.numberRange(s.red,0,1)&&g.numberRange(s.green,0,1)&&g.numberRange(s.blue,0,1)&&g.numberRange(s.alpha,0,1)}a.is=m})(x||(t.Color=x={}));var w;(function(a){function p(u,s){return{range:u,color:s}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&l.is(s.range)&&x.is(s.color)}a.is=m})(w||(t.ColorInformation=w={}));var I;(function(a){function p(u,s,h){return{label:u,textEdit:s,additionalTextEdits:h}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&g.string(s.label)&&(g.undefined(s.textEdit)||W.is(s))&&(g.undefined(s.additionalTextEdits)||g.typedArray(s.additionalTextEdits,W.is))}a.is=m})(I||(t.ColorPresentation=I={}));var ie;(function(a){a.Comment="comment",a.Imports="imports",a.Region="region"})(ie||(t.FoldingRangeKind=ie={}));var ue;(function(a){function p(u,s,h,R,A,me){var ne={startLine:u,endLine:s};return g.defined(h)&&(ne.startCharacter=h),g.defined(R)&&(ne.endCharacter=R),g.defined(A)&&(ne.kind=A),g.defined(me)&&(ne.collapsedText=me),ne}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&g.uinteger(s.startLine)&&g.uinteger(s.startLine)&&(g.undefined(s.startCharacter)||g.uinteger(s.startCharacter))&&(g.undefined(s.endCharacter)||g.uinteger(s.endCharacter))&&(g.undefined(s.kind)||g.string(s.kind))}a.is=m})(ue||(t.FoldingRange=ue={}));var le;(function(a){function p(u,s){return{location:u,message:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&b.is(s.location)&&g.string(s.message)}a.is=m})(le||(t.DiagnosticRelatedInformation=le={}));var xe;(function(a){a.Error=1,a.Warning=2,a.Information=3,a.Hint=4})(xe||(t.DiagnosticSeverity=xe={}));var Q;(function(a){a.Unnecessary=1,a.Deprecated=2})(Q||(t.DiagnosticTag=Q={}));var S;(function(a){function p(m){var u=m;return g.objectLiteral(u)&&g.string(u.href)}a.is=p})(S||(t.CodeDescription=S={}));var y;(function(a){function p(u,s,h,R,A,me){var ne={range:u,message:s};return g.defined(h)&&(ne.severity=h),g.defined(R)&&(ne.code=R),g.defined(A)&&(ne.source=A),g.defined(me)&&(ne.relatedInformation=me),ne}a.create=p;function m(u){var s,h=u;return g.defined(h)&&l.is(h.range)&&g.string(h.message)&&(g.number(h.severity)||g.undefined(h.severity))&&(g.integer(h.code)||g.string(h.code)||g.undefined(h.code))&&(g.undefined(h.codeDescription)||g.string((s=h.codeDescription)===null||s===void 0?void 0:s.href))&&(g.string(h.source)||g.undefined(h.source))&&(g.undefined(h.relatedInformation)||g.typedArray(h.relatedInformation,le.is))}a.is=m})(y||(t.Diagnostic=y={}));var D;(function(a){function p(u,s){for(var h=[],R=2;R<arguments.length;R++)h[R-2]=arguments[R];var A={title:u,command:s};return g.defined(h)&&h.length>0&&(A.arguments=h),A}a.create=p;function m(u){var s=u;return g.defined(s)&&g.string(s.title)&&g.string(s.command)}a.is=m})(D||(t.Command=D={}));var W;(function(a){function p(h,R){return{range:h,newText:R}}a.replace=p;function m(h,R){return{range:{start:h,end:h},newText:R}}a.insert=m;function u(h){return{range:h,newText:""}}a.del=u;function s(h){var R=h;return g.objectLiteral(R)&&g.string(R.newText)&&l.is(R.range)}a.is=s})(W||(t.TextEdit=W={}));var te;(function(a){function p(u,s,h){var R={label:u};return s!==void 0&&(R.needsConfirmation=s),h!==void 0&&(R.description=h),R}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&g.string(s.label)&&(g.boolean(s.needsConfirmation)||s.needsConfirmation===void 0)&&(g.string(s.description)||s.description===void 0)}a.is=m})(te||(t.ChangeAnnotation=te={}));var fe;(function(a){function p(m){var u=m;return g.string(u)}a.is=p})(fe||(t.ChangeAnnotationIdentifier=fe={}));var st;(function(a){function p(h,R,A){return{range:h,newText:R,annotationId:A}}a.replace=p;function m(h,R,A){return{range:{start:h,end:h},newText:R,annotationId:A}}a.insert=m;function u(h,R){return{range:h,newText:"",annotationId:R}}a.del=u;function s(h){var R=h;return W.is(R)&&(te.is(R.annotationId)||fe.is(R.annotationId))}a.is=s})(st||(t.AnnotatedTextEdit=st={}));var on;(function(a){function p(u,s){return{textDocument:u,edits:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&sn.is(s.textDocument)&&Array.isArray(s.edits)}a.is=m})(on||(t.TextDocumentEdit=on={}));var Ft;(function(a){function p(u,s,h){var R={kind:"create",uri:u};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(R.options=s),h!==void 0&&(R.annotationId=h),R}a.create=p;function m(u){var s=u;return s&&s.kind==="create"&&g.string(s.uri)&&(s.options===void 0||(s.options.overwrite===void 0||g.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||g.boolean(s.options.ignoreIfExists)))&&(s.annotationId===void 0||fe.is(s.annotationId))}a.is=m})(Ft||(t.CreateFile=Ft={}));var At;(function(a){function p(u,s,h,R){var A={kind:"rename",oldUri:u,newUri:s};return h!==void 0&&(h.overwrite!==void 0||h.ignoreIfExists!==void 0)&&(A.options=h),R!==void 0&&(A.annotationId=R),A}a.create=p;function m(u){var s=u;return s&&s.kind==="rename"&&g.string(s.oldUri)&&g.string(s.newUri)&&(s.options===void 0||(s.options.overwrite===void 0||g.boolean(s.options.overwrite))&&(s.options.ignoreIfExists===void 0||g.boolean(s.options.ignoreIfExists)))&&(s.annotationId===void 0||fe.is(s.annotationId))}a.is=m})(At||(t.RenameFile=At={}));var Be;(function(a){function p(u,s,h){var R={kind:"delete",uri:u};return s!==void 0&&(s.recursive!==void 0||s.ignoreIfNotExists!==void 0)&&(R.options=s),h!==void 0&&(R.annotationId=h),R}a.create=p;function m(u){var s=u;return s&&s.kind==="delete"&&g.string(s.uri)&&(s.options===void 0||(s.options.recursive===void 0||g.boolean(s.options.recursive))&&(s.options.ignoreIfNotExists===void 0||g.boolean(s.options.ignoreIfNotExists)))&&(s.annotationId===void 0||fe.is(s.annotationId))}a.is=m})(Be||(t.DeleteFile=Be={}));var Pn;(function(a){function p(m){var u=m;return u&&(u.changes!==void 0||u.documentChanges!==void 0)&&(u.documentChanges===void 0||u.documentChanges.every(function(s){return g.string(s.kind)?Ft.is(s)||At.is(s)||Be.is(s):on.is(s)}))}a.is=p})(Pn||(t.WorkspaceEdit=Pn={}));var Rn=function(){function a(p,m){this.edits=p,this.changeAnnotations=m}return a.prototype.insert=function(p,m,u){var s,h;if(u===void 0?s=W.insert(p,m):fe.is(u)?(h=u,s=st.insert(p,m,u)):(this.assertChangeAnnotations(this.changeAnnotations),h=this.changeAnnotations.manage(u),s=st.insert(p,m,h)),this.edits.push(s),h!==void 0)return h},a.prototype.replace=function(p,m,u){var s,h;if(u===void 0?s=W.replace(p,m):fe.is(u)?(h=u,s=st.replace(p,m,u)):(this.assertChangeAnnotations(this.changeAnnotations),h=this.changeAnnotations.manage(u),s=st.replace(p,m,h)),this.edits.push(s),h!==void 0)return h},a.prototype.delete=function(p,m){var u,s;if(m===void 0?u=W.del(p):fe.is(m)?(s=m,u=st.del(p,m)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(m),u=st.del(p,s)),this.edits.push(u),s!==void 0)return s},a.prototype.add=function(p){this.edits.push(p)},a.prototype.all=function(){return this.edits},a.prototype.clear=function(){this.edits.splice(0,this.edits.length)},a.prototype.assertChangeAnnotations=function(p){if(p===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},a}(),ei=function(){function a(p){this._annotations=p===void 0?Object.create(null):p,this._counter=0,this._size=0}return a.prototype.all=function(){return this._annotations},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),a.prototype.manage=function(p,m){var u;if(fe.is(p)?u=p:(u=this.nextId(),m=p),this._annotations[u]!==void 0)throw new Error("Id ".concat(u," is already in use."));if(m===void 0)throw new Error("No annotation provided for id ".concat(u));return this._annotations[u]=m,this._size++,u},a.prototype.nextId=function(){return this._counter++,this._counter.toString()},a}(),ls=function(){function a(p){var m=this;this._textEditChanges=Object.create(null),p!==void 0?(this._workspaceEdit=p,p.documentChanges?(this._changeAnnotations=new ei(p.changeAnnotations),p.changeAnnotations=this._changeAnnotations.all(),p.documentChanges.forEach(function(u){if(on.is(u)){var s=new Rn(u.edits,m._changeAnnotations);m._textEditChanges[u.textDocument.uri]=s}})):p.changes&&Object.keys(p.changes).forEach(function(u){var s=new Rn(p.changes[u]);m._textEditChanges[u]=s})):this._workspaceEdit={}}return Object.defineProperty(a.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),a.prototype.getTextEditChange=function(p){if(sn.is(p)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m={uri:p.uri,version:p.version},u=this._textEditChanges[m.uri];if(!u){var s=[],h={textDocument:m,edits:s};this._workspaceEdit.documentChanges.push(h),u=new Rn(s,this._changeAnnotations),this._textEditChanges[m.uri]=u}return u}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var u=this._textEditChanges[p];if(!u){var s=[];this._workspaceEdit.changes[p]=s,u=new Rn(s),this._textEditChanges[p]=u}return u}},a.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ei,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},a.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},a.prototype.createFile=function(p,m,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;te.is(m)||fe.is(m)?s=m:u=m;var h,R;if(s===void 0?h=Ft.create(p,u):(R=fe.is(s)?s:this._changeAnnotations.manage(s),h=Ft.create(p,u,R)),this._workspaceEdit.documentChanges.push(h),R!==void 0)return R},a.prototype.renameFile=function(p,m,u,s){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var h;te.is(u)||fe.is(u)?h=u:s=u;var R,A;if(h===void 0?R=At.create(p,m,s):(A=fe.is(h)?h:this._changeAnnotations.manage(h),R=At.create(p,m,s,A)),this._workspaceEdit.documentChanges.push(R),A!==void 0)return A},a.prototype.deleteFile=function(p,m,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;te.is(m)||fe.is(m)?s=m:u=m;var h,R;if(s===void 0?h=Be.create(p,u):(R=fe.is(s)?s:this._changeAnnotations.manage(s),h=Be.create(p,u,R)),this._workspaceEdit.documentChanges.push(h),R!==void 0)return R},a}();t.WorkspaceChange=ls;var ti;(function(a){function p(u){return{uri:u}}a.create=p;function m(u){var s=u;return g.defined(s)&&g.string(s.uri)}a.is=m})(ti||(t.TextDocumentIdentifier=ti={}));var lr;(function(a){function p(u,s){return{uri:u,version:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&g.string(s.uri)&&g.integer(s.version)}a.is=m})(lr||(t.VersionedTextDocumentIdentifier=lr={}));var sn;(function(a){function p(u,s){return{uri:u,version:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&g.string(s.uri)&&(s.version===null||g.integer(s.version))}a.is=m})(sn||(t.OptionalVersionedTextDocumentIdentifier=sn={}));var Pt;(function(a){function p(u,s,h,R){return{uri:u,languageId:s,version:h,text:R}}a.create=p;function m(u){var s=u;return g.defined(s)&&g.string(s.uri)&&g.string(s.languageId)&&g.integer(s.version)&&g.string(s.text)}a.is=m})(Pt||(t.TextDocumentItem=Pt={}));var kn;(function(a){a.PlainText="plaintext",a.Markdown="markdown";function p(m){var u=m;return u===a.PlainText||u===a.Markdown}a.is=p})(kn||(t.MarkupKind=kn={}));var an;(function(a){function p(m){var u=m;return g.objectLiteral(m)&&kn.is(u.kind)&&g.string(u.value)}a.is=p})(an||(t.MarkupContent=an={}));var ni;(function(a){a.Text=1,a.Method=2,a.Function=3,a.Constructor=4,a.Field=5,a.Variable=6,a.Class=7,a.Interface=8,a.Module=9,a.Property=10,a.Unit=11,a.Value=12,a.Enum=13,a.Keyword=14,a.Snippet=15,a.Color=16,a.File=17,a.Reference=18,a.Folder=19,a.EnumMember=20,a.Constant=21,a.Struct=22,a.Event=23,a.Operator=24,a.TypeParameter=25})(ni||(t.CompletionItemKind=ni={}));var fr;(function(a){a.PlainText=1,a.Snippet=2})(fr||(t.InsertTextFormat=fr={}));var pr;(function(a){a.Deprecated=1})(pr||(t.CompletionItemTag=pr={}));var ri;(function(a){function p(u,s,h){return{newText:u,insert:s,replace:h}}a.create=p;function m(u){var s=u;return s&&g.string(s.newText)&&l.is(s.insert)&&l.is(s.replace)}a.is=m})(ri||(t.InsertReplaceEdit=ri={}));var ii;(function(a){a.asIs=1,a.adjustIndentation=2})(ii||(t.InsertTextMode=ii={}));var oi;(function(a){function p(m){var u=m;return u&&(g.string(u.detail)||u.detail===void 0)&&(g.string(u.description)||u.description===void 0)}a.is=p})(oi||(t.CompletionItemLabelDetails=oi={}));var si;(function(a){function p(m){return{label:m}}a.create=p})(si||(t.CompletionItem=si={}));var ai;(function(a){function p(m,u){return{items:m||[],isIncomplete:!!u}}a.create=p})(ai||(t.CompletionList=ai={}));var Dn;(function(a){function p(u){return u.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}a.fromPlainText=p;function m(u){var s=u;return g.string(s)||g.objectLiteral(s)&&g.string(s.language)&&g.string(s.value)}a.is=m})(Dn||(t.MarkedString=Dn={}));var at;(function(a){function p(m){var u=m;return!!u&&g.objectLiteral(u)&&(an.is(u.contents)||Dn.is(u.contents)||g.typedArray(u.contents,Dn.is))&&(m.range===void 0||l.is(m.range))}a.is=p})(at||(t.Hover=at={}));var ci;(function(a){function p(m,u){return u?{label:m,documentation:u}:{label:m}}a.create=p})(ci||(t.ParameterInformation=ci={}));var ui;(function(a){function p(m,u){for(var s=[],h=2;h<arguments.length;h++)s[h-2]=arguments[h];var R={label:m};return g.defined(u)&&(R.documentation=u),g.defined(s)?R.parameters=s:R.parameters=[],R}a.create=p})(ui||(t.SignatureInformation=ui={}));var cn;(function(a){a.Text=1,a.Read=2,a.Write=3})(cn||(t.DocumentHighlightKind=cn={}));var di;(function(a){function p(m,u){var s={range:m};return g.number(u)&&(s.kind=u),s}a.create=p})(di||(t.DocumentHighlight=di={}));var Cn;(function(a){a.File=1,a.Module=2,a.Namespace=3,a.Package=4,a.Class=5,a.Method=6,a.Property=7,a.Field=8,a.Constructor=9,a.Enum=10,a.Interface=11,a.Function=12,a.Variable=13,a.Constant=14,a.String=15,a.Number=16,a.Boolean=17,a.Array=18,a.Object=19,a.Key=20,a.Null=21,a.EnumMember=22,a.Struct=23,a.Event=24,a.Operator=25,a.TypeParameter=26})(Cn||(t.SymbolKind=Cn={}));var li;(function(a){a.Deprecated=1})(li||(t.SymbolTag=li={}));var Rt;(function(a){function p(m,u,s,h,R){var A={name:m,kind:u,location:{uri:h,range:s}};return R&&(A.containerName=R),A}a.create=p})(Rt||(t.SymbolInformation=Rt={}));var jt;(function(a){function p(m,u,s,h){return h!==void 0?{name:m,kind:u,location:{uri:s,range:h}}:{name:m,kind:u,location:{uri:s}}}a.create=p})(jt||(t.WorkspaceSymbol=jt={}));var fi;(function(a){function p(u,s,h,R,A,me){var ne={name:u,detail:s,kind:h,range:R,selectionRange:A};return me!==void 0&&(ne.children=me),ne}a.create=p;function m(u){var s=u;return s&&g.string(s.name)&&g.number(s.kind)&&l.is(s.range)&&l.is(s.selectionRange)&&(s.detail===void 0||g.string(s.detail))&&(s.deprecated===void 0||g.boolean(s.deprecated))&&(s.children===void 0||Array.isArray(s.children))&&(s.tags===void 0||Array.isArray(s.tags))}a.is=m})(fi||(t.DocumentSymbol=fi={}));var pi;(function(a){a.Empty="",a.QuickFix="quickfix",a.Refactor="refactor",a.RefactorExtract="refactor.extract",a.RefactorInline="refactor.inline",a.RefactorRewrite="refactor.rewrite",a.Source="source",a.SourceOrganizeImports="source.organizeImports",a.SourceFixAll="source.fixAll"})(pi||(t.CodeActionKind=pi={}));var ht;(function(a){a.Invoked=1,a.Automatic=2})(ht||(t.CodeActionTriggerKind=ht={}));var mr;(function(a){function p(u,s,h){var R={diagnostics:u};return s!=null&&(R.only=s),h!=null&&(R.triggerKind=h),R}a.create=p;function m(u){var s=u;return g.defined(s)&&g.typedArray(s.diagnostics,y.is)&&(s.only===void 0||g.typedArray(s.only,g.string))&&(s.triggerKind===void 0||s.triggerKind===ht.Invoked||s.triggerKind===ht.Automatic)}a.is=m})(mr||(t.CodeActionContext=mr={}));var hr;(function(a){function p(u,s,h){var R={title:u},A=!0;return typeof s=="string"?(A=!1,R.kind=s):D.is(s)?R.command=s:R.edit=s,A&&h!==void 0&&(R.kind=h),R}a.create=p;function m(u){var s=u;return s&&g.string(s.title)&&(s.diagnostics===void 0||g.typedArray(s.diagnostics,y.is))&&(s.kind===void 0||g.string(s.kind))&&(s.edit!==void 0||s.command!==void 0)&&(s.command===void 0||D.is(s.command))&&(s.isPreferred===void 0||g.boolean(s.isPreferred))&&(s.edit===void 0||Pn.is(s.edit))}a.is=m})(hr||(t.CodeAction=hr={}));var _n;(function(a){function p(u,s){var h={range:u};return g.defined(s)&&(h.data=s),h}a.create=p;function m(u){var s=u;return g.defined(s)&&l.is(s.range)&&(g.undefined(s.command)||D.is(s.command))}a.is=m})(_n||(t.CodeLens=_n={}));var gr;(function(a){function p(u,s){return{tabSize:u,insertSpaces:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&g.uinteger(s.tabSize)&&g.boolean(s.insertSpaces)}a.is=m})(gr||(t.FormattingOptions=gr={}));var kt;(function(a){function p(u,s,h){return{range:u,target:s,data:h}}a.create=p;function m(u){var s=u;return g.defined(s)&&l.is(s.range)&&(g.undefined(s.target)||g.string(s.target))}a.is=m})(kt||(t.DocumentLink=kt={}));var f;(function(a){function p(u,s){return{range:u,parent:s}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&l.is(s.range)&&(s.parent===void 0||a.is(s.parent))}a.is=m})(f||(t.SelectionRange=f={}));var P;(function(a){a.namespace="namespace",a.type="type",a.class="class",a.enum="enum",a.interface="interface",a.struct="struct",a.typeParameter="typeParameter",a.parameter="parameter",a.variable="variable",a.property="property",a.enumMember="enumMember",a.event="event",a.function="function",a.method="method",a.macro="macro",a.keyword="keyword",a.modifier="modifier",a.comment="comment",a.string="string",a.number="number",a.regexp="regexp",a.operator="operator",a.decorator="decorator"})(P||(t.SemanticTokenTypes=P={}));var C;(function(a){a.declaration="declaration",a.definition="definition",a.readonly="readonly",a.static="static",a.deprecated="deprecated",a.abstract="abstract",a.async="async",a.modification="modification",a.documentation="documentation",a.defaultLibrary="defaultLibrary"})(C||(t.SemanticTokenModifiers=C={}));var O;(function(a){function p(m){var u=m;return g.objectLiteral(u)&&(u.resultId===void 0||typeof u.resultId=="string")&&Array.isArray(u.data)&&(u.data.length===0||typeof u.data[0]=="number")}a.is=p})(O||(t.SemanticTokens=O={}));var Y;(function(a){function p(u,s){return{range:u,text:s}}a.create=p;function m(u){var s=u;return s!=null&&l.is(s.range)&&g.string(s.text)}a.is=m})(Y||(t.InlineValueText=Y={}));var X;(function(a){function p(u,s,h){return{range:u,variableName:s,caseSensitiveLookup:h}}a.create=p;function m(u){var s=u;return s!=null&&l.is(s.range)&&g.boolean(s.caseSensitiveLookup)&&(g.string(s.variableName)||s.variableName===void 0)}a.is=m})(X||(t.InlineValueVariableLookup=X={}));var oe;(function(a){function p(u,s){return{range:u,expression:s}}a.create=p;function m(u){var s=u;return s!=null&&l.is(s.range)&&(g.string(s.expression)||s.expression===void 0)}a.is=m})(oe||(t.InlineValueEvaluatableExpression=oe={}));var ae;(function(a){function p(u,s){return{frameId:u,stoppedLocation:s}}a.create=p;function m(u){var s=u;return g.defined(s)&&l.is(u.stoppedLocation)}a.is=m})(ae||(t.InlineValueContext=ae={}));var H;(function(a){a.Type=1,a.Parameter=2;function p(m){return m===1||m===2}a.is=p})(H||(t.InlayHintKind=H={}));var ee;(function(a){function p(u){return{value:u}}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&(s.tooltip===void 0||g.string(s.tooltip)||an.is(s.tooltip))&&(s.location===void 0||b.is(s.location))&&(s.command===void 0||D.is(s.command))}a.is=m})(ee||(t.InlayHintLabelPart=ee={}));var K;(function(a){function p(u,s,h){var R={position:u,label:s};return h!==void 0&&(R.kind=h),R}a.create=p;function m(u){var s=u;return g.objectLiteral(s)&&c.is(s.position)&&(g.string(s.label)||g.typedArray(s.label,ee.is))&&(s.kind===void 0||H.is(s.kind))&&s.textEdits===void 0||g.typedArray(s.textEdits,W.is)&&(s.tooltip===void 0||g.string(s.tooltip)||an.is(s.tooltip))&&(s.paddingLeft===void 0||g.boolean(s.paddingLeft))&&(s.paddingRight===void 0||g.boolean(s.paddingRight))}a.is=m})(K||(t.InlayHint=K={}));var pe;(function(a){function p(m){return{kind:"snippet",value:m}}a.createSnippet=p})(pe||(t.StringValue=pe={}));var Re;(function(a){function p(m,u,s,h){return{insertText:m,filterText:u,range:s,command:h}}a.create=p})(Re||(t.InlineCompletionItem=Re={}));var Ue;(function(a){function p(m){return{items:m}}a.create=p})(Ue||(t.InlineCompletionList=Ue={}));var mi;(function(a){a.Invoked=0,a.Automatic=1})(mi||(t.InlineCompletionTriggerKind=mi={}));var fu;(function(a){function p(m,u){return{range:m,text:u}}a.create=p})(fu||(t.SelectedCompletionInfo=fu={}));var pu;(function(a){function p(m,u){return{triggerKind:m,selectedCompletionInfo:u}}a.create=p})(pu||(t.InlineCompletionContext=pu={}));var mu;(function(a){function p(m){var u=m;return g.objectLiteral(u)&&r.is(u.uri)&&g.string(u.name)}a.is=p})(mu||(t.WorkspaceFolder=mu={})),t.EOL=[`
`,`\r
`,"\r"];var hu;(function(a){function p(h,R,A,me){return new Bh(h,R,A,me)}a.create=p;function m(h){var R=h;return!!(g.defined(R)&&g.string(R.uri)&&(g.undefined(R.languageId)||g.string(R.languageId))&&g.uinteger(R.lineCount)&&g.func(R.getText)&&g.func(R.positionAt)&&g.func(R.offsetAt))}a.is=m;function u(h,R){for(var A=h.getText(),me=s(R,function(wn,hi){var gu=wn.range.start.line-hi.range.start.line;return gu===0?wn.range.start.character-hi.range.start.character:gu}),ne=A.length,ct=me.length-1;ct>=0;ct--){var ut=me[ct],Dt=h.offsetAt(ut.range.start),$=h.offsetAt(ut.range.end);if($<=ne)A=A.substring(0,Dt)+ut.newText+A.substring($,A.length);else throw new Error("Overlapping edit");ne=Dt}return A}a.applyEdits=u;function s(h,R){if(h.length<=1)return h;var A=h.length/2|0,me=h.slice(0,A),ne=h.slice(A);s(me,R),s(ne,R);for(var ct=0,ut=0,Dt=0;ct<me.length&&ut<ne.length;){var $=R(me[ct],ne[ut]);$<=0?h[Dt++]=me[ct++]:h[Dt++]=ne[ut++]}for(;ct<me.length;)h[Dt++]=me[ct++];for(;ut<ne.length;)h[Dt++]=ne[ut++];return h}})(hu||(t.TextDocument=hu={}));var Bh=function(){function a(p,m,u,s){this._uri=p,this._languageId=m,this._version=u,this._content=s,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(p){if(p){var m=this.offsetAt(p.start),u=this.offsetAt(p.end);return this._content.substring(m,u)}return this._content},a.prototype.update=function(p,m){this._content=p.text,this._version=m,this._lineOffsets=void 0},a.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var p=[],m=this._content,u=!0,s=0;s<m.length;s++){u&&(p.push(s),u=!1);var h=m.charAt(s);u=h==="\r"||h===`
`,h==="\r"&&s+1<m.length&&m.charAt(s+1)===`
`&&s++}u&&m.length>0&&p.push(m.length),this._lineOffsets=p}return this._lineOffsets},a.prototype.positionAt=function(p){p=Math.max(Math.min(p,this._content.length),0);var m=this.getLineOffsets(),u=0,s=m.length;if(s===0)return c.create(0,p);for(;u<s;){var h=Math.floor((u+s)/2);m[h]>p?s=h:u=h+1}var R=u-1;return c.create(R,p-m[R])},a.prototype.offsetAt=function(p){var m=this.getLineOffsets();if(p.line>=m.length)return this._content.length;if(p.line<0)return 0;var u=m[p.line],s=p.line+1<m.length?m[p.line+1]:this._content.length;return Math.max(Math.min(u+p.character,s),u)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a}(),g;(function(a){var p=Object.prototype.toString;function m($){return typeof $<"u"}a.defined=m;function u($){return typeof $>"u"}a.undefined=u;function s($){return $===!0||$===!1}a.boolean=s;function h($){return p.call($)==="[object String]"}a.string=h;function R($){return p.call($)==="[object Number]"}a.number=R;function A($,wn,hi){return p.call($)==="[object Number]"&&wn<=$&&$<=hi}a.numberRange=A;function me($){return p.call($)==="[object Number]"&&-2147483648<=$&&$<=2147483647}a.integer=me;function ne($){return p.call($)==="[object Number]"&&0<=$&&$<=2147483647}a.uinteger=ne;function ct($){return p.call($)==="[object Function]"}a.func=ct;function ut($){return $!==null&&typeof $=="object"}a.objectLiteral=ut;function Dt($,wn){return Array.isArray($)&&$.every(wn)}a.typedArray=Dt})(g||(g={}))})});var ce=E(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.ProtocolNotificationType=ze.ProtocolNotificationType0=ze.ProtocolRequestType=ze.ProtocolRequestType0=ze.RegistrationType=ze.MessageDirection=void 0;var jn=fn(),Yu;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(Yu||(ze.MessageDirection=Yu={}));var Na=class{constructor(t){this.method=t}};ze.RegistrationType=Na;var Pa=class extends jn.RequestType0{constructor(t){super(t)}};ze.ProtocolRequestType0=Pa;var Ra=class extends jn.RequestType{constructor(t){super(t,jn.ParameterStructures.byName)}};ze.ProtocolRequestType=Ra;var ka=class extends jn.NotificationType0{constructor(t){super(t)}};ze.ProtocolNotificationType0=ka;var Da=class extends jn.NotificationType{constructor(t){super(t,jn.ParameterStructures.byName)}};ze.ProtocolNotificationType=Da});var Bi=E(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.objectLiteral=Se.typedArray=Se.stringArray=Se.array=Se.func=Se.error=Se.number=Se.string=Se.boolean=void 0;function Ig(e){return e===!0||e===!1}Se.boolean=Ig;function Zu(e){return typeof e=="string"||e instanceof String}Se.string=Zu;function Mg(e){return typeof e=="number"||e instanceof Number}Se.number=Mg;function Lg(e){return e instanceof Error}Se.error=Lg;function qg(e){return typeof e=="function"}Se.func=qg;function ed(e){return Array.isArray(e)}Se.array=ed;function Fg(e){return ed(e)&&e.every(t=>Zu(t))}Se.stringArray=Fg;function Ag(e,t){return Array.isArray(e)&&e.every(t)}Se.typedArray=Ag;function jg(e){return e!==null&&typeof e=="object"}Se.objectLiteral=jg});var rd=E(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ImplementationRequest=void 0;var td=ce(),nd;(function(e){e.method="textDocument/implementation",e.messageDirection=td.MessageDirection.clientToServer,e.type=new td.ProtocolRequestType(e.method)})(nd||(Wi.ImplementationRequest=nd={}))});var sd=E(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.TypeDefinitionRequest=void 0;var id=ce(),od;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=id.MessageDirection.clientToServer,e.type=new id.ProtocolRequestType(e.method)})(od||(zi.TypeDefinitionRequest=od={}))});var ud=E(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.DidChangeWorkspaceFoldersNotification=Bn.WorkspaceFoldersRequest=void 0;var Hi=ce(),ad;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=Hi.MessageDirection.serverToClient,e.type=new Hi.ProtocolRequestType0(e.method)})(ad||(Bn.WorkspaceFoldersRequest=ad={}));var cd;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=Hi.MessageDirection.clientToServer,e.type=new Hi.ProtocolNotificationType(e.method)})(cd||(Bn.DidChangeWorkspaceFoldersNotification=cd={}))});var fd=E(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ConfigurationRequest=void 0;var dd=ce(),ld;(function(e){e.method="workspace/configuration",e.messageDirection=dd.MessageDirection.serverToClient,e.type=new dd.ProtocolRequestType(e.method)})(ld||(Vi.ConfigurationRequest=ld={}))});var hd=E(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.ColorPresentationRequest=Wn.DocumentColorRequest=void 0;var $i=ce(),pd;(function(e){e.method="textDocument/documentColor",e.messageDirection=$i.MessageDirection.clientToServer,e.type=new $i.ProtocolRequestType(e.method)})(pd||(Wn.DocumentColorRequest=pd={}));var md;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=$i.MessageDirection.clientToServer,e.type=new $i.ProtocolRequestType(e.method)})(md||(Wn.ColorPresentationRequest=md={}))});var bd=E(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.FoldingRangeRefreshRequest=zn.FoldingRangeRequest=void 0;var Ui=ce(),gd;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Ui.MessageDirection.clientToServer,e.type=new Ui.ProtocolRequestType(e.method)})(gd||(zn.FoldingRangeRequest=gd={}));var yd;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Ui.MessageDirection.serverToClient,e.type=new Ui.ProtocolRequestType0(e.method)})(yd||(zn.FoldingRangeRefreshRequest=yd={}))});var vd=E(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.DeclarationRequest=void 0;var Sd=ce(),Td;(function(e){e.method="textDocument/declaration",e.messageDirection=Sd.MessageDirection.clientToServer,e.type=new Sd.ProtocolRequestType(e.method)})(Td||(Ki.DeclarationRequest=Td={}))});var Pd=E(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.SelectionRangeRequest=void 0;var xd=ce(),Nd;(function(e){e.method="textDocument/selectionRange",e.messageDirection=xd.MessageDirection.clientToServer,e.type=new xd.ProtocolRequestType(e.method)})(Nd||(Gi.SelectionRangeRequest=Nd={}))});var Cd=E($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.WorkDoneProgressCancelNotification=$t.WorkDoneProgressCreateRequest=$t.WorkDoneProgress=void 0;var Bg=fn(),Qi=ce(),Rd;(function(e){e.type=new Bg.ProgressType;function t(n){return n===e.type}e.is=t})(Rd||($t.WorkDoneProgress=Rd={}));var kd;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Qi.MessageDirection.serverToClient,e.type=new Qi.ProtocolRequestType(e.method)})(kd||($t.WorkDoneProgressCreateRequest=kd={}));var Dd;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Qi.MessageDirection.clientToServer,e.type=new Qi.ProtocolNotificationType(e.method)})(Dd||($t.WorkDoneProgressCancelNotification=Dd={}))});var Od=E(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CallHierarchyOutgoingCallsRequest=Ut.CallHierarchyIncomingCallsRequest=Ut.CallHierarchyPrepareRequest=void 0;var Hn=ce(),_d;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Hn.MessageDirection.clientToServer,e.type=new Hn.ProtocolRequestType(e.method)})(_d||(Ut.CallHierarchyPrepareRequest=_d={}));var wd;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Hn.MessageDirection.clientToServer,e.type=new Hn.ProtocolRequestType(e.method)})(wd||(Ut.CallHierarchyIncomingCallsRequest=wd={}));var Ed;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Hn.MessageDirection.clientToServer,e.type=new Hn.ProtocolRequestType(e.method)})(Ed||(Ut.CallHierarchyOutgoingCallsRequest=Ed={}))});var Ad=E(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.SemanticTokensRefreshRequest=He.SemanticTokensRangeRequest=He.SemanticTokensDeltaRequest=He.SemanticTokensRequest=He.SemanticTokensRegistrationType=He.TokenFormat=void 0;var _t=ce(),Id;(function(e){e.Relative="relative"})(Id||(He.TokenFormat=Id={}));var Nr;(function(e){e.method="textDocument/semanticTokens",e.type=new _t.RegistrationType(e.method)})(Nr||(He.SemanticTokensRegistrationType=Nr={}));var Md;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=_t.MessageDirection.clientToServer,e.type=new _t.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(Md||(He.SemanticTokensRequest=Md={}));var Ld;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=_t.MessageDirection.clientToServer,e.type=new _t.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(Ld||(He.SemanticTokensDeltaRequest=Ld={}));var qd;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=_t.MessageDirection.clientToServer,e.type=new _t.ProtocolRequestType(e.method),e.registrationMethod=Nr.method})(qd||(He.SemanticTokensRangeRequest=qd={}));var Fd;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=_t.MessageDirection.serverToClient,e.type=new _t.ProtocolRequestType0(e.method)})(Fd||(He.SemanticTokensRefreshRequest=Fd={}))});var Wd=E(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.ShowDocumentRequest=void 0;var jd=ce(),Bd;(function(e){e.method="window/showDocument",e.messageDirection=jd.MessageDirection.serverToClient,e.type=new jd.ProtocolRequestType(e.method)})(Bd||(Ji.ShowDocumentRequest=Bd={}))});var Vd=E(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.LinkedEditingRangeRequest=void 0;var zd=ce(),Hd;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=zd.MessageDirection.clientToServer,e.type=new zd.ProtocolRequestType(e.method)})(Hd||(Xi.LinkedEditingRangeRequest=Hd={}))});var Yd=E(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.WillDeleteFilesRequest=Le.DidDeleteFilesNotification=Le.DidRenameFilesNotification=Le.WillRenameFilesRequest=Le.DidCreateFilesNotification=Le.WillCreateFilesRequest=Le.FileOperationPatternKind=void 0;var Je=ce(),$d;(function(e){e.file="file",e.folder="folder"})($d||(Le.FileOperationPatternKind=$d={}));var Ud;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolRequestType(e.method)})(Ud||(Le.WillCreateFilesRequest=Ud={}));var Kd;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method)})(Kd||(Le.DidCreateFilesNotification=Kd={}));var Gd;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolRequestType(e.method)})(Gd||(Le.WillRenameFilesRequest=Gd={}));var Qd;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method)})(Qd||(Le.DidRenameFilesNotification=Qd={}));var Jd;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method)})(Jd||(Le.DidDeleteFilesNotification=Jd={}));var Xd;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolRequestType(e.method)})(Xd||(Le.WillDeleteFilesRequest=Xd={}))});var rl=E(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.MonikerRequest=Kt.MonikerKind=Kt.UniquenessLevel=void 0;var Zd=ce(),el;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(el||(Kt.UniquenessLevel=el={}));var tl;(function(e){e.$import="import",e.$export="export",e.local="local"})(tl||(Kt.MonikerKind=tl={}));var nl;(function(e){e.method="textDocument/moniker",e.messageDirection=Zd.MessageDirection.clientToServer,e.type=new Zd.ProtocolRequestType(e.method)})(nl||(Kt.MonikerRequest=nl={}))});var al=E(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.TypeHierarchySubtypesRequest=Gt.TypeHierarchySupertypesRequest=Gt.TypeHierarchyPrepareRequest=void 0;var Vn=ce(),il;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Vn.MessageDirection.clientToServer,e.type=new Vn.ProtocolRequestType(e.method)})(il||(Gt.TypeHierarchyPrepareRequest=il={}));var ol;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Vn.MessageDirection.clientToServer,e.type=new Vn.ProtocolRequestType(e.method)})(ol||(Gt.TypeHierarchySupertypesRequest=ol={}));var sl;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Vn.MessageDirection.clientToServer,e.type=new Vn.ProtocolRequestType(e.method)})(sl||(Gt.TypeHierarchySubtypesRequest=sl={}))});var dl=E($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.InlineValueRefreshRequest=$n.InlineValueRequest=void 0;var Yi=ce(),cl;(function(e){e.method="textDocument/inlineValue",e.messageDirection=Yi.MessageDirection.clientToServer,e.type=new Yi.ProtocolRequestType(e.method)})(cl||($n.InlineValueRequest=cl={}));var ul;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=Yi.MessageDirection.serverToClient,e.type=new Yi.ProtocolRequestType0(e.method)})(ul||($n.InlineValueRefreshRequest=ul={}))});var ml=E(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.InlayHintRefreshRequest=Qt.InlayHintResolveRequest=Qt.InlayHintRequest=void 0;var Un=ce(),ll;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Un.MessageDirection.clientToServer,e.type=new Un.ProtocolRequestType(e.method)})(ll||(Qt.InlayHintRequest=ll={}));var fl;(function(e){e.method="inlayHint/resolve",e.messageDirection=Un.MessageDirection.clientToServer,e.type=new Un.ProtocolRequestType(e.method)})(fl||(Qt.InlayHintResolveRequest=fl={}));var pl;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Un.MessageDirection.serverToClient,e.type=new Un.ProtocolRequestType0(e.method)})(pl||(Qt.InlayHintRefreshRequest=pl={}))});var vl=E(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.DiagnosticRefreshRequest=Xe.WorkspaceDiagnosticRequest=Xe.DocumentDiagnosticRequest=Xe.DocumentDiagnosticReportKind=Xe.DiagnosticServerCancellationData=void 0;var Tl=fn(),Wg=Bi(),Kn=ce(),hl;(function(e){function t(n){let r=n;return r&&Wg.boolean(r.retriggerRequest)}e.is=t})(hl||(Xe.DiagnosticServerCancellationData=hl={}));var gl;(function(e){e.Full="full",e.Unchanged="unchanged"})(gl||(Xe.DocumentDiagnosticReportKind=gl={}));var yl;(function(e){e.method="textDocument/diagnostic",e.messageDirection=Kn.MessageDirection.clientToServer,e.type=new Kn.ProtocolRequestType(e.method),e.partialResult=new Tl.ProgressType})(yl||(Xe.DocumentDiagnosticRequest=yl={}));var bl;(function(e){e.method="workspace/diagnostic",e.messageDirection=Kn.MessageDirection.clientToServer,e.type=new Kn.ProtocolRequestType(e.method),e.partialResult=new Tl.ProgressType})(bl||(Xe.WorkspaceDiagnosticRequest=bl={}));var Sl;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=Kn.MessageDirection.serverToClient,e.type=new Kn.ProtocolRequestType0(e.method)})(Sl||(Xe.DiagnosticRefreshRequest=Sl={}))});var Cl=E(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.DidCloseNotebookDocumentNotification=he.DidSaveNotebookDocumentNotification=he.DidChangeNotebookDocumentNotification=he.NotebookCellArrayChange=he.DidOpenNotebookDocumentNotification=he.NotebookDocumentSyncRegistrationType=he.NotebookDocument=he.NotebookCell=he.ExecutionSummary=he.NotebookCellKind=void 0;var Pr=ji(),lt=Bi(),gt=ce(),Ca;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(Ca||(he.NotebookCellKind=Ca={}));var _a;(function(e){function t(i,o){let c={executionOrder:i};return(o===!0||o===!1)&&(c.success=o),c}e.create=t;function n(i){let o=i;return lt.objectLiteral(o)&&Pr.uinteger.is(o.executionOrder)&&(o.success===void 0||lt.boolean(o.success))}e.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}e.equals=r})(_a||(he.ExecutionSummary=_a={}));var Zi;(function(e){function t(o,c){return{kind:o,document:c}}e.create=t;function n(o){let c=o;return lt.objectLiteral(c)&&Ca.is(c.kind)&&Pr.DocumentUri.is(c.document)&&(c.metadata===void 0||lt.objectLiteral(c.metadata))}e.is=n;function r(o,c){let l=new Set;return o.document!==c.document&&l.add("document"),o.kind!==c.kind&&l.add("kind"),o.executionSummary!==c.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||c.metadata!==void 0)&&!i(o.metadata,c.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||c.executionSummary!==void 0)&&!_a.equals(o.executionSummary,c.executionSummary)&&l.add("executionSummary"),l}e.diff=r;function i(o,c){if(o===c)return!0;if(o==null||c===null||c===void 0||typeof o!=typeof c||typeof o!="object")return!1;let l=Array.isArray(o),b=Array.isArray(c);if(l!==b)return!1;if(l&&b){if(o.length!==c.length)return!1;for(let T=0;T<o.length;T++)if(!i(o[T],c[T]))return!1}if(lt.objectLiteral(o)&&lt.objectLiteral(c)){let T=Object.keys(o),x=Object.keys(c);if(T.length!==x.length||(T.sort(),x.sort(),!i(T,x)))return!1;for(let w=0;w<T.length;w++){let I=T[w];if(!i(o[I],c[I]))return!1}}return!0}})(Zi||(he.NotebookCell=Zi={}));var xl;(function(e){function t(r,i,o,c){return{uri:r,notebookType:i,version:o,cells:c}}e.create=t;function n(r){let i=r;return lt.objectLiteral(i)&&lt.string(i.uri)&&Pr.integer.is(i.version)&&lt.typedArray(i.cells,Zi.is)}e.is=n})(xl||(he.NotebookDocument=xl={}));var Gn;(function(e){e.method="notebookDocument/sync",e.messageDirection=gt.MessageDirection.clientToServer,e.type=new gt.RegistrationType(e.method)})(Gn||(he.NotebookDocumentSyncRegistrationType=Gn={}));var Nl;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=gt.MessageDirection.clientToServer,e.type=new gt.ProtocolNotificationType(e.method),e.registrationMethod=Gn.method})(Nl||(he.DidOpenNotebookDocumentNotification=Nl={}));var Pl;(function(e){function t(r){let i=r;return lt.objectLiteral(i)&&Pr.uinteger.is(i.start)&&Pr.uinteger.is(i.deleteCount)&&(i.cells===void 0||lt.typedArray(i.cells,Zi.is))}e.is=t;function n(r,i,o){let c={start:r,deleteCount:i};return o!==void 0&&(c.cells=o),c}e.create=n})(Pl||(he.NotebookCellArrayChange=Pl={}));var Rl;(function(e){e.method="notebookDocument/didChange",e.messageDirection=gt.MessageDirection.clientToServer,e.type=new gt.ProtocolNotificationType(e.method),e.registrationMethod=Gn.method})(Rl||(he.DidChangeNotebookDocumentNotification=Rl={}));var kl;(function(e){e.method="notebookDocument/didSave",e.messageDirection=gt.MessageDirection.clientToServer,e.type=new gt.ProtocolNotificationType(e.method),e.registrationMethod=Gn.method})(kl||(he.DidSaveNotebookDocumentNotification=kl={}));var Dl;(function(e){e.method="notebookDocument/didClose",e.messageDirection=gt.MessageDirection.clientToServer,e.type=new gt.ProtocolNotificationType(e.method),e.registrationMethod=Gn.method})(Dl||(he.DidCloseNotebookDocumentNotification=Dl={}))});var El=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.InlineCompletionRequest=void 0;var _l=ce(),wl;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=_l.MessageDirection.clientToServer,e.type=new _l.ProtocolRequestType(e.method)})(wl||(eo.InlineCompletionRequest=wl={}))});var $f=E(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.WorkspaceSymbolRequest=d.CodeActionResolveRequest=d.CodeActionRequest=d.DocumentSymbolRequest=d.DocumentHighlightRequest=d.ReferencesRequest=d.DefinitionRequest=d.SignatureHelpRequest=d.SignatureHelpTriggerKind=d.HoverRequest=d.CompletionResolveRequest=d.CompletionRequest=d.CompletionTriggerKind=d.PublishDiagnosticsNotification=d.WatchKind=d.RelativePattern=d.FileChangeType=d.DidChangeWatchedFilesNotification=d.WillSaveTextDocumentWaitUntilRequest=d.WillSaveTextDocumentNotification=d.TextDocumentSaveReason=d.DidSaveTextDocumentNotification=d.DidCloseTextDocumentNotification=d.DidChangeTextDocumentNotification=d.TextDocumentContentChangeEvent=d.DidOpenTextDocumentNotification=d.TextDocumentSyncKind=d.TelemetryEventNotification=d.LogMessageNotification=d.ShowMessageRequest=d.ShowMessageNotification=d.MessageType=d.DidChangeConfigurationNotification=d.ExitNotification=d.ShutdownRequest=d.InitializedNotification=d.InitializeErrorCodes=d.InitializeRequest=d.WorkDoneProgressOptions=d.TextDocumentRegistrationOptions=d.StaticRegistrationOptions=d.PositionEncodingKind=d.FailureHandlingKind=d.ResourceOperationKind=d.UnregistrationRequest=d.RegistrationRequest=d.DocumentSelector=d.NotebookCellTextDocumentFilter=d.NotebookDocumentFilter=d.TextDocumentFilter=void 0;d.MonikerRequest=d.MonikerKind=d.UniquenessLevel=d.WillDeleteFilesRequest=d.DidDeleteFilesNotification=d.WillRenameFilesRequest=d.DidRenameFilesNotification=d.WillCreateFilesRequest=d.DidCreateFilesNotification=d.FileOperationPatternKind=d.LinkedEditingRangeRequest=d.ShowDocumentRequest=d.SemanticTokensRegistrationType=d.SemanticTokensRefreshRequest=d.SemanticTokensRangeRequest=d.SemanticTokensDeltaRequest=d.SemanticTokensRequest=d.TokenFormat=d.CallHierarchyPrepareRequest=d.CallHierarchyOutgoingCallsRequest=d.CallHierarchyIncomingCallsRequest=d.WorkDoneProgressCancelNotification=d.WorkDoneProgressCreateRequest=d.WorkDoneProgress=d.SelectionRangeRequest=d.DeclarationRequest=d.FoldingRangeRefreshRequest=d.FoldingRangeRequest=d.ColorPresentationRequest=d.DocumentColorRequest=d.ConfigurationRequest=d.DidChangeWorkspaceFoldersNotification=d.WorkspaceFoldersRequest=d.TypeDefinitionRequest=d.ImplementationRequest=d.ApplyWorkspaceEditRequest=d.ExecuteCommandRequest=d.PrepareRenameRequest=d.RenameRequest=d.PrepareSupportDefaultBehavior=d.DocumentOnTypeFormattingRequest=d.DocumentRangesFormattingRequest=d.DocumentRangeFormattingRequest=d.DocumentFormattingRequest=d.DocumentLinkResolveRequest=d.DocumentLinkRequest=d.CodeLensRefreshRequest=d.CodeLensResolveRequest=d.CodeLensRequest=d.WorkspaceSymbolResolveRequest=void 0;d.InlineCompletionRequest=d.DidCloseNotebookDocumentNotification=d.DidSaveNotebookDocumentNotification=d.DidChangeNotebookDocumentNotification=d.NotebookCellArrayChange=d.DidOpenNotebookDocumentNotification=d.NotebookDocumentSyncRegistrationType=d.NotebookDocument=d.NotebookCell=d.ExecutionSummary=d.NotebookCellKind=d.DiagnosticRefreshRequest=d.WorkspaceDiagnosticRequest=d.DocumentDiagnosticRequest=d.DocumentDiagnosticReportKind=d.DiagnosticServerCancellationData=d.InlayHintRefreshRequest=d.InlayHintResolveRequest=d.InlayHintRequest=d.InlineValueRefreshRequest=d.InlineValueRequest=d.TypeHierarchySupertypesRequest=d.TypeHierarchySubtypesRequest=d.TypeHierarchyPrepareRequest=void 0;var k=ce(),Ol=ji(),ke=Bi(),zg=rd();Object.defineProperty(d,"ImplementationRequest",{enumerable:!0,get:function(){return zg.ImplementationRequest}});var Hg=sd();Object.defineProperty(d,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Hg.TypeDefinitionRequest}});var Wf=ud();Object.defineProperty(d,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Wf.WorkspaceFoldersRequest}});Object.defineProperty(d,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Wf.DidChangeWorkspaceFoldersNotification}});var Vg=fd();Object.defineProperty(d,"ConfigurationRequest",{enumerable:!0,get:function(){return Vg.ConfigurationRequest}});var zf=hd();Object.defineProperty(d,"DocumentColorRequest",{enumerable:!0,get:function(){return zf.DocumentColorRequest}});Object.defineProperty(d,"ColorPresentationRequest",{enumerable:!0,get:function(){return zf.ColorPresentationRequest}});var Hf=bd();Object.defineProperty(d,"FoldingRangeRequest",{enumerable:!0,get:function(){return Hf.FoldingRangeRequest}});Object.defineProperty(d,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Hf.FoldingRangeRefreshRequest}});var $g=vd();Object.defineProperty(d,"DeclarationRequest",{enumerable:!0,get:function(){return $g.DeclarationRequest}});var Ug=Pd();Object.defineProperty(d,"SelectionRangeRequest",{enumerable:!0,get:function(){return Ug.SelectionRangeRequest}});var Ma=Cd();Object.defineProperty(d,"WorkDoneProgress",{enumerable:!0,get:function(){return Ma.WorkDoneProgress}});Object.defineProperty(d,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ma.WorkDoneProgressCreateRequest}});Object.defineProperty(d,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ma.WorkDoneProgressCancelNotification}});var La=Od();Object.defineProperty(d,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return La.CallHierarchyIncomingCallsRequest}});Object.defineProperty(d,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return La.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(d,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return La.CallHierarchyPrepareRequest}});var Qn=Ad();Object.defineProperty(d,"TokenFormat",{enumerable:!0,get:function(){return Qn.TokenFormat}});Object.defineProperty(d,"SemanticTokensRequest",{enumerable:!0,get:function(){return Qn.SemanticTokensRequest}});Object.defineProperty(d,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Qn.SemanticTokensDeltaRequest}});Object.defineProperty(d,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Qn.SemanticTokensRangeRequest}});Object.defineProperty(d,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Qn.SemanticTokensRefreshRequest}});Object.defineProperty(d,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Qn.SemanticTokensRegistrationType}});var Kg=Wd();Object.defineProperty(d,"ShowDocumentRequest",{enumerable:!0,get:function(){return Kg.ShowDocumentRequest}});var Gg=Vd();Object.defineProperty(d,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Gg.LinkedEditingRangeRequest}});var pn=Yd();Object.defineProperty(d,"FileOperationPatternKind",{enumerable:!0,get:function(){return pn.FileOperationPatternKind}});Object.defineProperty(d,"DidCreateFilesNotification",{enumerable:!0,get:function(){return pn.DidCreateFilesNotification}});Object.defineProperty(d,"WillCreateFilesRequest",{enumerable:!0,get:function(){return pn.WillCreateFilesRequest}});Object.defineProperty(d,"DidRenameFilesNotification",{enumerable:!0,get:function(){return pn.DidRenameFilesNotification}});Object.defineProperty(d,"WillRenameFilesRequest",{enumerable:!0,get:function(){return pn.WillRenameFilesRequest}});Object.defineProperty(d,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return pn.DidDeleteFilesNotification}});Object.defineProperty(d,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return pn.WillDeleteFilesRequest}});var qa=rl();Object.defineProperty(d,"UniquenessLevel",{enumerable:!0,get:function(){return qa.UniquenessLevel}});Object.defineProperty(d,"MonikerKind",{enumerable:!0,get:function(){return qa.MonikerKind}});Object.defineProperty(d,"MonikerRequest",{enumerable:!0,get:function(){return qa.MonikerRequest}});var Fa=al();Object.defineProperty(d,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Fa.TypeHierarchyPrepareRequest}});Object.defineProperty(d,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Fa.TypeHierarchySubtypesRequest}});Object.defineProperty(d,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Fa.TypeHierarchySupertypesRequest}});var Vf=dl();Object.defineProperty(d,"InlineValueRequest",{enumerable:!0,get:function(){return Vf.InlineValueRequest}});Object.defineProperty(d,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Vf.InlineValueRefreshRequest}});var Aa=ml();Object.defineProperty(d,"InlayHintRequest",{enumerable:!0,get:function(){return Aa.InlayHintRequest}});Object.defineProperty(d,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Aa.InlayHintResolveRequest}});Object.defineProperty(d,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Aa.InlayHintRefreshRequest}});var Rr=vl();Object.defineProperty(d,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Rr.DiagnosticServerCancellationData}});Object.defineProperty(d,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Rr.DocumentDiagnosticReportKind}});Object.defineProperty(d,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Rr.DocumentDiagnosticRequest}});Object.defineProperty(d,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Rr.WorkspaceDiagnosticRequest}});Object.defineProperty(d,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Rr.DiagnosticRefreshRequest}});var yt=Cl();Object.defineProperty(d,"NotebookCellKind",{enumerable:!0,get:function(){return yt.NotebookCellKind}});Object.defineProperty(d,"ExecutionSummary",{enumerable:!0,get:function(){return yt.ExecutionSummary}});Object.defineProperty(d,"NotebookCell",{enumerable:!0,get:function(){return yt.NotebookCell}});Object.defineProperty(d,"NotebookDocument",{enumerable:!0,get:function(){return yt.NotebookDocument}});Object.defineProperty(d,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return yt.NotebookDocumentSyncRegistrationType}});Object.defineProperty(d,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return yt.DidOpenNotebookDocumentNotification}});Object.defineProperty(d,"NotebookCellArrayChange",{enumerable:!0,get:function(){return yt.NotebookCellArrayChange}});Object.defineProperty(d,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return yt.DidChangeNotebookDocumentNotification}});Object.defineProperty(d,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return yt.DidSaveNotebookDocumentNotification}});Object.defineProperty(d,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return yt.DidCloseNotebookDocumentNotification}});var Qg=El();Object.defineProperty(d,"InlineCompletionRequest",{enumerable:!0,get:function(){return Qg.InlineCompletionRequest}});var wa;(function(e){function t(n){let r=n;return ke.string(r)||ke.string(r.language)||ke.string(r.scheme)||ke.string(r.pattern)}e.is=t})(wa||(d.TextDocumentFilter=wa={}));var Ea;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebookType)||ke.string(r.scheme)||ke.string(r.pattern))}e.is=t})(Ea||(d.NotebookDocumentFilter=Ea={}));var Oa;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(ke.string(r.notebook)||Ea.is(r.notebook))&&(r.language===void 0||ke.string(r.language))}e.is=t})(Oa||(d.NotebookCellTextDocumentFilter=Oa={}));var Ia;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!ke.string(r)&&!wa.is(r)&&!Oa.is(r))return!1;return!0}e.is=t})(Ia||(d.DocumentSelector=Ia={}));var Il;(function(e){e.method="client/registerCapability",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolRequestType(e.method)})(Il||(d.RegistrationRequest=Il={}));var Ml;(function(e){e.method="client/unregisterCapability",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolRequestType(e.method)})(Ml||(d.UnregistrationRequest=Ml={}));var Ll;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Ll||(d.ResourceOperationKind=Ll={}));var ql;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(ql||(d.FailureHandlingKind=ql={}));var Fl;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(Fl||(d.PositionEncodingKind=Fl={}));var Al;(function(e){function t(n){let r=n;return r&&ke.string(r.id)&&r.id.length>0}e.hasId=t})(Al||(d.StaticRegistrationOptions=Al={}));var jl;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Ia.is(r.documentSelector))}e.is=t})(jl||(d.TextDocumentRegistrationOptions=jl={}));var Bl;(function(e){function t(r){let i=r;return ke.objectLiteral(i)&&(i.workDoneProgress===void 0||ke.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&ke.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Bl||(d.WorkDoneProgressOptions=Bl={}));var Wl;(function(e){e.method="initialize",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Wl||(d.InitializeRequest=Wl={}));var zl;(function(e){e.unknownProtocolVersion=1})(zl||(d.InitializeErrorCodes=zl={}));var Hl;(function(e){e.method="initialized",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(Hl||(d.InitializedNotification=Hl={}));var Vl;(function(e){e.method="shutdown",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType0(e.method)})(Vl||(d.ShutdownRequest=Vl={}));var $l;(function(e){e.method="exit",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType0(e.method)})($l||(d.ExitNotification=$l={}));var Ul;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(Ul||(d.DidChangeConfigurationNotification=Ul={}));var Kl;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(Kl||(d.MessageType=Kl={}));var Gl;(function(e){e.method="window/showMessage",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolNotificationType(e.method)})(Gl||(d.ShowMessageNotification=Gl={}));var Ql;(function(e){e.method="window/showMessageRequest",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolRequestType(e.method)})(Ql||(d.ShowMessageRequest=Ql={}));var Jl;(function(e){e.method="window/logMessage",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolNotificationType(e.method)})(Jl||(d.LogMessageNotification=Jl={}));var Xl;(function(e){e.method="telemetry/event",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolNotificationType(e.method)})(Xl||(d.TelemetryEventNotification=Xl={}));var Yl;(function(e){e.None=0,e.Full=1,e.Incremental=2})(Yl||(d.TextDocumentSyncKind=Yl={}));var Zl;(function(e){e.method="textDocument/didOpen",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(Zl||(d.DidOpenTextDocumentNotification=Zl={}));var ef;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(ef||(d.TextDocumentContentChangeEvent=ef={}));var tf;(function(e){e.method="textDocument/didChange",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(tf||(d.DidChangeTextDocumentNotification=tf={}));var nf;(function(e){e.method="textDocument/didClose",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(nf||(d.DidCloseTextDocumentNotification=nf={}));var rf;(function(e){e.method="textDocument/didSave",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(rf||(d.DidSaveTextDocumentNotification=rf={}));var of;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(of||(d.TextDocumentSaveReason=of={}));var sf;(function(e){e.method="textDocument/willSave",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(sf||(d.WillSaveTextDocumentNotification=sf={}));var af;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(af||(d.WillSaveTextDocumentWaitUntilRequest=af={}));var cf;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolNotificationType(e.method)})(cf||(d.DidChangeWatchedFilesNotification=cf={}));var uf;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(uf||(d.FileChangeType=uf={}));var df;(function(e){function t(n){let r=n;return ke.objectLiteral(r)&&(Ol.URI.is(r.baseUri)||Ol.WorkspaceFolder.is(r.baseUri))&&ke.string(r.pattern)}e.is=t})(df||(d.RelativePattern=df={}));var lf;(function(e){e.Create=1,e.Change=2,e.Delete=4})(lf||(d.WatchKind=lf={}));var ff;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolNotificationType(e.method)})(ff||(d.PublishDiagnosticsNotification=ff={}));var pf;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(pf||(d.CompletionTriggerKind=pf={}));var mf;(function(e){e.method="textDocument/completion",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(mf||(d.CompletionRequest=mf={}));var hf;(function(e){e.method="completionItem/resolve",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(hf||(d.CompletionResolveRequest=hf={}));var gf;(function(e){e.method="textDocument/hover",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(gf||(d.HoverRequest=gf={}));var yf;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(yf||(d.SignatureHelpTriggerKind=yf={}));var bf;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(bf||(d.SignatureHelpRequest=bf={}));var Sf;(function(e){e.method="textDocument/definition",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Sf||(d.DefinitionRequest=Sf={}));var Tf;(function(e){e.method="textDocument/references",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Tf||(d.ReferencesRequest=Tf={}));var vf;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(vf||(d.DocumentHighlightRequest=vf={}));var xf;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(xf||(d.DocumentSymbolRequest=xf={}));var Nf;(function(e){e.method="textDocument/codeAction",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Nf||(d.CodeActionRequest=Nf={}));var Pf;(function(e){e.method="codeAction/resolve",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Pf||(d.CodeActionResolveRequest=Pf={}));var Rf;(function(e){e.method="workspace/symbol",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Rf||(d.WorkspaceSymbolRequest=Rf={}));var kf;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(kf||(d.WorkspaceSymbolResolveRequest=kf={}));var Df;(function(e){e.method="textDocument/codeLens",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Df||(d.CodeLensRequest=Df={}));var Cf;(function(e){e.method="codeLens/resolve",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Cf||(d.CodeLensResolveRequest=Cf={}));var _f;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolRequestType0(e.method)})(_f||(d.CodeLensRefreshRequest=_f={}));var wf;(function(e){e.method="textDocument/documentLink",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(wf||(d.DocumentLinkRequest=wf={}));var Ef;(function(e){e.method="documentLink/resolve",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Ef||(d.DocumentLinkResolveRequest=Ef={}));var Of;(function(e){e.method="textDocument/formatting",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Of||(d.DocumentFormattingRequest=Of={}));var If;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(If||(d.DocumentRangeFormattingRequest=If={}));var Mf;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Mf||(d.DocumentRangesFormattingRequest=Mf={}));var Lf;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Lf||(d.DocumentOnTypeFormattingRequest=Lf={}));var qf;(function(e){e.Identifier=1})(qf||(d.PrepareSupportDefaultBehavior=qf={}));var Ff;(function(e){e.method="textDocument/rename",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Ff||(d.RenameRequest=Ff={}));var Af;(function(e){e.method="textDocument/prepareRename",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(Af||(d.PrepareRenameRequest=Af={}));var jf;(function(e){e.method="workspace/executeCommand",e.messageDirection=k.MessageDirection.clientToServer,e.type=new k.ProtocolRequestType(e.method)})(jf||(d.ExecuteCommandRequest=jf={}));var Bf;(function(e){e.method="workspace/applyEdit",e.messageDirection=k.MessageDirection.serverToClient,e.type=new k.ProtocolRequestType("workspace/applyEdit")})(Bf||(d.ApplyWorkspaceEditRequest=Bf={}))});var Kf=E(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.createProtocolConnection=void 0;var Uf=fn();function Jg(e,t,n,r){return Uf.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Uf.createMessageConnection)(e,t,n,r)}to.createProtocolConnection=Jg});var Qf=E(Ve=>{"use strict";var Xg=Ve&&Ve.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),no=Ve&&Ve.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Xg(t,e,n)};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.LSPErrorCodes=Ve.createProtocolConnection=void 0;no(fn(),Ve);no(ji(),Ve);no(ce(),Ve);no($f(),Ve);var Yg=Kf();Object.defineProperty(Ve,"createProtocolConnection",{enumerable:!0,get:function(){return Yg.createProtocolConnection}});var Gf;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(Gf||(Ve.LSPErrorCodes=Gf={}))});var ge=E(bt=>{"use strict";var Zg=bt&&bt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Jf=bt&&bt.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Zg(t,e,n)};Object.defineProperty(bt,"__esModule",{value:!0});bt.createProtocolConnection=void 0;var ey=xa();Jf(xa(),bt);Jf(Qf(),bt);function ty(e,t,n,r){return(0,ey.createMessageConnection)(e,t,n,r)}bt.createProtocolConnection=ty});var ja=E(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.generateUuid=Ye.parse=Ye.isUUID=Ye.v4=Ye.empty=void 0;var kr=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Dr=class e extends kr{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};Dr._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Dr._timeHighBits=["8","9","a","b"];Ye.empty=new kr("00000000-0000-0000-0000-000000000000");function Xf(){return new Dr}Ye.v4=Xf;var ny=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Yf(e){return ny.test(e)}Ye.isUUID=Yf;function ry(e){if(!Yf(e))throw new Error("invalid uuid");return new kr(e)}Ye.parse=ry;function iy(){return Xf().asHex()}Ye.generateUuid=iy});var Zf=E(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.attachPartialResult=Xt.ProgressFeature=Xt.attachWorkDone=void 0;var Jt=ge(),oy=ja(),mn=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let o={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Jt.WorkDoneProgress.type,this._token,o)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(Jt.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(Jt.WorkDoneProgress.type,this._token,{kind:"end"})}};mn.Instances=new Map;var ro=class extends mn{constructor(t,n){super(t,n),this._source=new Jt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Cr=class{constructor(){}begin(){}report(){}done(){}},io=class extends Cr{constructor(){super(),this._source=new Jt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function sy(e,t){if(t===void 0||t.workDoneToken===void 0)return new Cr;let n=t.workDoneToken;return delete t.workDoneToken,new mn(e,n)}Xt.attachWorkDone=sy;var ay=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Jt.WorkDoneProgressCancelNotification.type,n=>{let r=mn.Instances.get(n.token);(r instanceof ro||r instanceof io)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Cr:new mn(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,oy.generateUuid)();return this.connection.sendRequest(Jt.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new ro(this.connection,t))}else return Promise.resolve(new io)}};Xt.ProgressFeature=ay;var Ba;(function(e){e.type=new Jt.ProgressType})(Ba||(Ba={}));var Wa=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Ba.type,this._token,t)}};function cy(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Wa(e,n)}Xt.attachPartialResult=cy});var ep=E(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.ConfigurationFeature=void 0;var uy=ge(),dy=gi(),ly=e=>class extends e{getConfiguration(t){return t?dy.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(uy.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};oo.ConfigurationFeature=ly});var tp=E(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.WorkspaceFoldersFeature=void 0;var so=ge(),fy=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new so.Emitter,this.connection.onNotification(so.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(so.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(so.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};ao.WorkspaceFoldersFeature=fy});var np=E(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.CallHierarchyFeature=void 0;var za=ge(),py=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(za.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=za.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=za.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};co.CallHierarchyFeature=py});var Va=E(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.SemanticTokensBuilder=Yt.SemanticTokensDiff=Yt.SemanticTokensFeature=void 0;var uo=ge(),my=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(uo.SemanticTokensRefreshRequest.type),on:t=>{let n=uo.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=uo.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=uo.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Yt.SemanticTokensFeature=my;var lo=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let c=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:c-1}]:[{start:r,deleteCount:c,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};Yt.SemanticTokensDiff=lo;var Ha=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,o){let c=t,l=n;this._dataLen>0&&(c-=this._prevLine,c===0&&(l-=this._prevChar)),this._data[this._dataLen++]=c,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new lo(this._prevData,this._data).computeDiff()}:this.build()}};Yt.SemanticTokensBuilder=Ha});var rp=E(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.ShowDocumentFeature=void 0;var hy=ge(),gy=e=>class extends e{showDocument(t){return this.connection.sendRequest(hy.ShowDocumentRequest.type,t)}};fo.ShowDocumentFeature=gy});var ip=E(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.FileOperationsFeature=void 0;var Jn=ge(),yy=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(Jn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(Jn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(Jn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(Jn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(Jn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(Jn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};po.FileOperationsFeature=yy});var op=E(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.LinkedEditingRangeFeature=void 0;var by=ge(),Sy=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(by.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};mo.LinkedEditingRangeFeature=Sy});var sp=E(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.TypeHierarchyFeature=void 0;var $a=ge(),Ty=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest($a.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=$a.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=$a.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ho.TypeHierarchyFeature=Ty});var cp=E(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.InlineValueFeature=void 0;var ap=ge(),vy=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(ap.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(ap.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};go.InlineValueFeature=vy});var dp=E(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.FoldingRangeFeature=void 0;var up=ge(),xy=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(up.FoldingRangeRefreshRequest.type),on:t=>{let n=up.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};yo.FoldingRangeFeature=xy});var lp=E(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.InlayHintFeature=void 0;var Ua=ge(),Ny=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Ua.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Ua.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Ua.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};bo.InlayHintFeature=Ny});var fp=E(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.DiagnosticFeature=void 0;var _r=ge(),Py=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(_r.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(_r.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(_r.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(_r.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(_r.WorkspaceDiagnosticRequest.partialResult,n)))}}};So.DiagnosticFeature=Py});var Ga=E(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.TextDocuments=void 0;var hn=ge(),Ka=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new hn.Emitter,this._onDidOpen=new hn.Emitter,this._onDidClose=new hn.Emitter,this._onDidSave=new hn.Emitter,this._onWillSave=new hn.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=hn.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let c=Object.freeze({document:o});this._onDidOpen.fire(c),this._onDidChangeContent.fire(c)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:c}=i;if(c==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,c),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),hn.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};To.TextDocuments=Ka});var Ja=E(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.NotebookDocuments=Xn.NotebookSyncFeature=void 0;var Ze=ge(),pp=Ga(),Ry=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Ze.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Ze.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Ze.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Ze.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};Xn.NotebookSyncFeature=Ry;var vo=class e{onDidOpenTextDocument(t){return this.openHandler=t,Ze.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Ze.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Ze.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};vo.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var Qa=class{constructor(t){t instanceof pp.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new pp.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Ze.Emitter,this._onDidChange=new Ze.Emitter,this._onDidSave=new Ze.Emitter,this._onDidClose=new Ze.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new vo,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let c=o.metadata,l=!1,b=i.change;b.metadata!==void 0&&(l=!0,o.metadata=b.metadata);let T=[],x=[],w=[],I=[];if(b.cells!==void 0){let Q=b.cells;if(Q.structure!==void 0){let S=Q.structure.array;if(o.cells.splice(S.start,S.deleteCount,...S.cells!==void 0?S.cells:[]),Q.structure.didOpen!==void 0)for(let y of Q.structure.didOpen)n.openTextDocument({textDocument:y}),T.push(y.uri);if(Q.structure.didClose)for(let y of Q.structure.didClose)n.closeTextDocument({textDocument:y}),x.push(y.uri)}if(Q.data!==void 0){let S=new Map(Q.data.map(y=>[y.document,y]));for(let y=0;y<=o.cells.length;y++){let D=S.get(o.cells[y].document);if(D!==void 0){let W=o.cells.splice(y,1,D);if(w.push({old:W[0],new:D}),S.delete(D.document),S.size===0)break}}}if(Q.textContent!==void 0)for(let S of Q.textContent)n.changeTextDocument({textDocument:S.document,contentChanges:S.changes}),I.push(S.document.uri)}this.updateCellMap(o);let ie={notebookDocument:o};l&&(ie.metadata={old:c,new:o.metadata});let ue=[];for(let Q of T)ue.push(this.getNotebookCell(Q));let le=[];for(let Q of x)le.push(this.getNotebookCell(Q));let xe=[];for(let Q of I)xe.push(this.getNotebookCell(Q));(ue.length>0||le.length>0||w.length>0||xe.length>0)&&(ie.cells={added:ue,removed:le,changed:{data:w,textContent:xe}}),(ie.metadata!==void 0||ie.cells!==void 0)&&this._onDidChange.fire(ie)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let c of i.cellTextDocuments)n.closeTextDocument({textDocument:c});this.notebookDocuments.delete(i.notebookDocument.uri);for(let c of o.cells)this.notebookCellMap.delete(c.document)}})),Ze.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};Xn.NotebookDocuments=Qa});var mp=E(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.MonikerFeature=void 0;var ky=ge(),Dy=e=>class extends e{get moniker(){return{on:t=>{let n=ky.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};xo.MonikerFeature=Dy});var nc=E(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.createConnection=G.combineFeatures=G.combineNotebooksFeatures=G.combineLanguagesFeatures=G.combineWorkspaceFeatures=G.combineWindowFeatures=G.combineClientFeatures=G.combineTracerFeatures=G.combineTelemetryFeatures=G.combineConsoleFeatures=G._NotebooksImpl=G._LanguagesImpl=G.BulkUnregistration=G.BulkRegistration=G.ErrorMessageTracker=void 0;var _=ge(),et=gi(),Ya=ja(),F=Zf(),Cy=ep(),_y=tp(),wy=np(),Ey=Va(),Oy=rp(),Iy=ip(),My=op(),Ly=sp(),qy=cp(),Fy=dp(),Ay=lp(),jy=fp(),By=Ja(),Wy=mp();function Xa(e){if(e!==null)return e}var Za=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};G.ErrorMessageTracker=Za;var No=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(_.MessageType.Error,t)}warn(t){this.send(_.MessageType.Warning,t)}info(t){this.send(_.MessageType.Info,t)}log(t){this.send(_.MessageType.Log,t)}debug(t){this.send(_.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(_.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,_.RAL)().console.error("Sending log message failed")})}},ec=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:_.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(_.ShowMessageRequest.type,r).then(Xa)}showWarningMessage(t,...n){let r={type:_.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(_.ShowMessageRequest.type,r).then(Xa)}showInformationMessage(t,...n){let r={type:_.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(_.ShowMessageRequest.type,r).then(Xa)}},hp=(0,Oy.ShowDocumentFeature)((0,F.ProgressFeature)(ec)),gp;(function(e){function t(){return new Po}e.create=t})(gp||(G.BulkRegistration=gp={}));var Po=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=et.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Ya.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},yp;(function(e){function t(){return new wr(void 0,[])}e.create=t})(yp||(G.BulkUnregistration=yp={}));var wr=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(_.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=et.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(_.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Ro=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof Po?this.registerMany(t):t instanceof wr?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=et.string(n)?n:n.method,o=Ya.generateUuid(),c={registrations:[{id:o,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(_.RegistrationRequest.type,c).then(l=>(t.add({id:o,method:i}),t),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(t,n){let r=et.string(t)?t:t.method,i=Ya.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(_.RegistrationRequest.type,o).then(c=>_.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),c=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(c)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(_.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(_.RegistrationRequest.type,n).then(()=>new wr(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},tc=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(_.ApplyWorkspaceEditRequest.type,r)}},bp=(0,Iy.FileOperationsFeature)((0,_y.WorkspaceFoldersFeature)((0,Cy.ConfigurationFeature)(tc))),ko=class{constructor(){this._trace=_.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==_.Trace.Off&&this.connection.sendNotification(_.LogTraceNotification.type,{message:t,verbose:this._trace===_.Trace.Verbose?n:void 0}).catch(()=>{})}},Do=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(_.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Co=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};G._LanguagesImpl=Co;var Sp=(0,Fy.FoldingRangeFeature)((0,Wy.MonikerFeature)((0,jy.DiagnosticFeature)((0,Ay.InlayHintFeature)((0,qy.InlineValueFeature)((0,Ly.TypeHierarchyFeature)((0,My.LinkedEditingRangeFeature)((0,Ey.SemanticTokensFeature)((0,wy.CallHierarchyFeature)(Co))))))))),_o=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,F.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,F.attachPartialResult)(this.connection,n)}};G._NotebooksImpl=_o;var Tp=(0,By.NotebookSyncFeature)(_o);function vp(e,t){return function(n){return t(e(n))}}G.combineConsoleFeatures=vp;function xp(e,t){return function(n){return t(e(n))}}G.combineTelemetryFeatures=xp;function Np(e,t){return function(n){return t(e(n))}}G.combineTracerFeatures=Np;function Pp(e,t){return function(n){return t(e(n))}}G.combineClientFeatures=Pp;function Rp(e,t){return function(n){return t(e(n))}}G.combineWindowFeatures=Rp;function kp(e,t){return function(n){return t(e(n))}}G.combineWorkspaceFeatures=kp;function Dp(e,t){return function(n){return t(e(n))}}G.combineLanguagesFeatures=Dp;function Cp(e,t){return function(n){return t(e(n))}}G.combineNotebooksFeatures=Cp;function zy(e,t){function n(i,o,c){return i&&o?c(i,o):i||o}return{__brand:"features",console:n(e.console,t.console,vp),tracer:n(e.tracer,t.tracer,Np),telemetry:n(e.telemetry,t.telemetry,xp),client:n(e.client,t.client,Pp),window:n(e.window,t.window,Rp),workspace:n(e.workspace,t.workspace,kp),languages:n(e.languages,t.languages,Dp),notebooks:n(e.notebooks,t.notebooks,Cp)}}G.combineFeatures=zy;function Hy(e,t,n){let r=n&&n.console?new(n.console(No)):new No,i=e(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(ko)):new ko,c=n&&n.telemetry?new(n.telemetry(Do)):new Do,l=n&&n.client?new(n.client(Ro)):new Ro,b=n&&n.window?new(n.window(hp)):new hp,T=n&&n.workspace?new(n.workspace(bp)):new bp,x=n&&n.languages?new(n.languages(Sp)):new Sp,w=n&&n.notebooks?new(n.notebooks(Tp)):new Tp,I=[r,o,c,l,b,T,x,w];function ie(S){return S instanceof Promise?S:et.thenable(S)?new Promise((y,D)=>{S.then(W=>y(W),W=>D(W))}):Promise.resolve(S)}let ue,le,xe,Q={listen:()=>i.listen(),sendRequest:(S,...y)=>i.sendRequest(et.string(S)?S:S.method,...y),onRequest:(S,y)=>i.onRequest(S,y),sendNotification:(S,y)=>{let D=et.string(S)?S:S.method;return i.sendNotification(D,y)},onNotification:(S,y)=>i.onNotification(S,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:S=>(le=S,{dispose:()=>{le=void 0}}),onInitialized:S=>i.onNotification(_.InitializedNotification.type,S),onShutdown:S=>(ue=S,{dispose:()=>{ue=void 0}}),onExit:S=>(xe=S,{dispose:()=>{xe=void 0}}),get console(){return r},get telemetry(){return c},get tracer(){return o},get client(){return l},get window(){return b},get workspace(){return T},get languages(){return x},get notebooks(){return w},onDidChangeConfiguration:S=>i.onNotification(_.DidChangeConfigurationNotification.type,S),onDidChangeWatchedFiles:S=>i.onNotification(_.DidChangeWatchedFilesNotification.type,S),__textDocumentSync:void 0,onDidOpenTextDocument:S=>i.onNotification(_.DidOpenTextDocumentNotification.type,S),onDidChangeTextDocument:S=>i.onNotification(_.DidChangeTextDocumentNotification.type,S),onDidCloseTextDocument:S=>i.onNotification(_.DidCloseTextDocumentNotification.type,S),onWillSaveTextDocument:S=>i.onNotification(_.WillSaveTextDocumentNotification.type,S),onWillSaveTextDocumentWaitUntil:S=>i.onRequest(_.WillSaveTextDocumentWaitUntilRequest.type,S),onDidSaveTextDocument:S=>i.onNotification(_.DidSaveTextDocumentNotification.type,S),sendDiagnostics:S=>i.sendNotification(_.PublishDiagnosticsNotification.type,S),onHover:S=>i.onRequest(_.HoverRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),onCompletion:S=>i.onRequest(_.CompletionRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCompletionResolve:S=>i.onRequest(_.CompletionResolveRequest.type,S),onSignatureHelp:S=>i.onRequest(_.SignatureHelpRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),onDeclaration:S=>i.onRequest(_.DeclarationRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDefinition:S=>i.onRequest(_.DefinitionRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onTypeDefinition:S=>i.onRequest(_.TypeDefinitionRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onImplementation:S=>i.onRequest(_.ImplementationRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onReferences:S=>i.onRequest(_.ReferencesRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentHighlight:S=>i.onRequest(_.DocumentHighlightRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentSymbol:S=>i.onRequest(_.DocumentSymbolRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onWorkspaceSymbol:S=>i.onRequest(_.WorkspaceSymbolRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:S=>i.onRequest(_.WorkspaceSymbolResolveRequest.type,S),onCodeAction:S=>i.onRequest(_.CodeActionRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCodeActionResolve:S=>i.onRequest(_.CodeActionResolveRequest.type,(y,D)=>S(y,D)),onCodeLens:S=>i.onRequest(_.CodeLensRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onCodeLensResolve:S=>i.onRequest(_.CodeLensResolveRequest.type,(y,D)=>S(y,D)),onDocumentFormatting:S=>i.onRequest(_.DocumentFormattingRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:S=>i.onRequest(_.DocumentRangeFormattingRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:S=>i.onRequest(_.DocumentOnTypeFormattingRequest.type,(y,D)=>S(y,D)),onRenameRequest:S=>i.onRequest(_.RenameRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),onPrepareRename:S=>i.onRequest(_.PrepareRenameRequest.type,(y,D)=>S(y,D)),onDocumentLinks:S=>i.onRequest(_.DocumentLinkRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onDocumentLinkResolve:S=>i.onRequest(_.DocumentLinkResolveRequest.type,(y,D)=>S(y,D)),onDocumentColor:S=>i.onRequest(_.DocumentColorRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onColorPresentation:S=>i.onRequest(_.ColorPresentationRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onFoldingRanges:S=>i.onRequest(_.FoldingRangeRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onSelectionRanges:S=>i.onRequest(_.SelectionRangeRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),(0,F.attachPartialResult)(i,y))),onExecuteCommand:S=>i.onRequest(_.ExecuteCommandRequest.type,(y,D)=>S(y,D,(0,F.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let S of I)S.attach(Q);return i.onRequest(_.InitializeRequest.type,S=>{t.initialize(S),et.string(S.trace)&&(o.trace=_.Trace.fromString(S.trace));for(let y of I)y.initialize(S.capabilities);if(le){let y=le(S,new _.CancellationTokenSource().token,(0,F.attachWorkDone)(i,S),void 0);return ie(y).then(D=>{if(D instanceof _.ResponseError)return D;let W=D;W||(W={capabilities:{}});let te=W.capabilities;te||(te={},W.capabilities=te),te.textDocumentSync===void 0||te.textDocumentSync===null?te.textDocumentSync=et.number(Q.__textDocumentSync)?Q.__textDocumentSync:_.TextDocumentSyncKind.None:!et.number(te.textDocumentSync)&&!et.number(te.textDocumentSync.change)&&(te.textDocumentSync.change=et.number(Q.__textDocumentSync)?Q.__textDocumentSync:_.TextDocumentSyncKind.None);for(let fe of I)fe.fillServerCapabilities(te);return W})}else{let y={capabilities:{textDocumentSync:_.TextDocumentSyncKind.None}};for(let D of I)D.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(_.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,ue)return ue(new _.CancellationTokenSource().token)}),i.onNotification(_.ExitNotification.type,()=>{try{xe&&xe()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(_.SetTraceNotification.type,S=>{o.trace=_.Trace.fromString(S.value)}),Q}G.createConnection=Hy});var _p=E($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.resolveModulePath=$e.FileSystem=$e.resolveGlobalYarnPath=$e.resolveGlobalNodePath=$e.resolve=$e.uriToFilePath=void 0;var Vy=require("url"),ft=require("path"),rc=require("fs"),ac=require("child_process");function $y(e){let t=Vy.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],c=n[1];o.length===0&&c.length>1&&c[1]===":"&&n.shift()}return ft.normalize(n.join("/"))}$e.uriToFilePath=$y;function ic(){return process.platform==="win32"}function wo(e,t,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((c,l)=>{let b=process.env,T=Object.create(null);Object.keys(b).forEach(x=>T[x]=b[x]),t&&rc.existsSync(t)&&(T[i]?T[i]=t+ft.delimiter+T[i]:T[i]=t,r&&r(`NODE_PATH value is: ${T[i]}`)),T.ELECTRON_RUN_AS_NODE="1";try{let x=(0,ac.fork)("",[],{cwd:n,env:T,execArgv:["-e",o]});if(x.pid===void 0){l(new Error(`Starting process to resolve node module  ${e} failed`));return}x.on("error",I=>{l(I)}),x.on("message",I=>{I.c==="r"&&(x.send({c:"e"}),I.s?c(I.r):l(new Error(`Failed to resolve module: ${e}`)))});let w={c:"rs",a:e};x.send(w)}catch(x){l(x)}})}$e.resolve=wo;function oc(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ic()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=(0,ac.spawnSync)(t,["config","get","prefix"],r).stdout;if(!o){e&&e("'npm config get prefix' didn't return a value.");return}let c=o.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?ic()?ft.join(c,"node_modules"):ft.join(c,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}$e.resolveGlobalNodePath=oc;function Uy(e){let t="yarn",n={encoding:"utf8"};ic()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,ac.spawnSync)(t,["global","dir","--json"],n),o=i.stdout;if(!o){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let c=o.trim().split(/\r?\n/);for(let l of c)try{let b=JSON.parse(l);if(b.type==="log")return ft.join(b.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}$e.resolveGlobalYarnPath=Uy;var sc;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!rc.existsSync(__filename.toUpperCase())||!rc.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,o){return n()?ft.normalize(o).indexOf(ft.normalize(i))===0:ft.normalize(o).toLowerCase().indexOf(ft.normalize(i).toLowerCase())===0}e.isParent=r})(sc||($e.FileSystem=sc={}));function Ky(e,t,n,r){return n?(ft.isAbsolute(n)||(n=ft.join(e,n)),wo(t,n,n,r).then(i=>sc.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>wo(t,oc(r),e,r))):wo(t,oc(r),e,r)}$e.resolveModulePath=Ky});var cc=E((vN,wp)=>{"use strict";wp.exports=ge()});var Ep=E(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.InlineCompletionFeature=void 0;var Gy=ge(),Qy=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(Gy.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};Eo.InlineCompletionFeature=Qy});var Mp=E(qe=>{"use strict";var Jy=qe&&qe.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ip=qe&&qe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Jy(t,e,n)};Object.defineProperty(qe,"__esModule",{value:!0});qe.ProposedFeatures=qe.NotebookDocuments=qe.TextDocuments=qe.SemanticTokensBuilder=void 0;var Xy=Va();Object.defineProperty(qe,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Xy.SemanticTokensBuilder}});var Yy=Ep();Ip(ge(),qe);var Zy=Ga();Object.defineProperty(qe,"TextDocuments",{enumerable:!0,get:function(){return Zy.TextDocuments}});var eb=Ja();Object.defineProperty(qe,"NotebookDocuments",{enumerable:!0,get:function(){return eb.NotebookDocuments}});Ip(nc(),qe);var Op;(function(e){e.all={__brand:"features",languages:Yy.InlineCompletionFeature}})(Op||(qe.ProposedFeatures=Op={}))});var Bp=E(tt=>{"use strict";var tb=tt&&tt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ap=tt&&tt.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&tb(t,e,n)};Object.defineProperty(tt,"__esModule",{value:!0});tt.createConnection=tt.Files=void 0;var Lp=require("node:util"),uc=gi(),nb=nc(),Er=_p(),gn=cc();Ap(cc(),tt);Ap(Mp(),tt);var qp;(function(e){e.uriToFilePath=Er.uriToFilePath,e.resolveGlobalNodePath=Er.resolveGlobalNodePath,e.resolveGlobalYarnPath=Er.resolveGlobalYarnPath,e.resolve=Er.resolve,e.resolveModulePath=Er.resolveModulePath})(qp||(tt.Files=qp={}));var Fp;function Oo(){if(Fp!==void 0)try{Fp.end()}catch{}}var Yn=!1,jp;function rb(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(jp=setInterval(()=>{try{process.kill(r,0)}catch{Oo(),process.exit(Yn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}rb();var ib={initialize:e=>{let t=e.processId;uc.number(t)&&jp===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(Yn?0:1)}},3e3)},get shutdownReceived(){return Yn},set shutdownReceived(e){Yn=e},exit:e=>{Oo(),process.exit(e)}};function ob(e,t,n,r){let i,o,c,l;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),gn.ConnectionStrategy.is(e)||gn.ConnectionOptions.is(e)?l=e:(o=e,c=t,l=n),sb(o,c,l,i)}tt.createConnection=ob;function sb(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let b,T,x=process.argv.slice(2);for(let w=0;w<x.length;w++){let I=x[w];if(I==="--node-ipc"){e=new gn.IPCMessageReader(process),t=new gn.IPCMessageWriter(process);break}else if(I==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(I==="--socket"){b=parseInt(x[w+1]);break}else if(I==="--pipe"){T=x[w+1];break}else{var o=I.split("=");if(o[0]==="--socket"){b=parseInt(o[1]);break}else if(o[0]==="--pipe"){T=o[1];break}}}if(b){let w=(0,gn.createServerSocketTransport)(b);e=w[0],t=w[1]}else if(T){let w=(0,gn.createServerPipeTransport)(T);e=w[0],t=w[1]}}var c="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+c);if(!t)throw new Error("Connection output stream is not set. "+c);if(uc.func(e.read)&&uc.func(e.on)){let b=e;b.on("end",()=>{Oo(),process.exit(Yn?0:1)}),b.on("close",()=>{Oo(),process.exit(Yn?0:1)})}let l=b=>{let T=(0,gn.createProtocolConnection)(e,t,b,n);return i&&ab(b),T};return(0,nb.createConnection)(l,ib,r)}function ab(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Lp.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...o){if(!i)if(o.length===0)e.error("Assertion failed");else{let[c,...l]=o;e.error(`Assertion failed: ${c} ${t(l)}`)}},console.count=function(i="default"){let o=String(i),c=n.get(o)??0;c+=1,n.set(o,c),e.log(`${o}: ${o}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,o){e.log((0,Lp.inspect)(i,o))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),c="Trace";i.length!==0&&(c+=`: ${t(i)}`),e.log(`${c}
${o}`)},console.warn=function(...i){e.warn(t(i))}}});var Zn=E((kN,Wp)=>{"use strict";Wp.exports=Bp()});var ot=Bt(Zn());var Io=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=Hp(r.range),o=this.offsetAt(i.start),c=this.offsetAt(i.end);this._content=this._content.substring(0,o)+r.text+this._content.substring(c,this._content.length);let l=Math.max(i.start.line,0),b=Math.max(i.end.line,0),T=this._lineOffsets,x=zp(r.text,!1,o);if(b-l===x.length)for(let I=0,ie=x.length;I<ie;I++)T[I+l+1]=x[I];else x.length<1e4?T.splice(l+1,b-l,...x):this._lineOffsets=T=T.slice(0,l+1).concat(x,T.slice(b+1));let w=r.text.length-(c-o);if(w!==0)for(let I=l+1+x.length,ie=T.length;I<ie;I++)T[I]=T[I]+w}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=zp(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let c=Math.floor((r+i)/2);n[c]>t?i=c:r=c+1}let o=r-1;return{line:o,character:t-n[o]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},Mo;(function(e){function t(i,o,c,l){return new Io(i,o,c,l)}e.create=t;function n(i,o,c){if(i instanceof Io)return i.update(o,c),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,o){let c=i.getText(),l=dc(o.map(cb),(x,w)=>{let I=x.range.start.line-w.range.start.line;return I===0?x.range.start.character-w.range.start.character:I}),b=0,T=[];for(let x of l){let w=i.offsetAt(x.range.start);if(w<b)throw new Error("Overlapping edit");w>b&&T.push(c.substring(b,w)),x.newText.length&&T.push(x.newText),b=i.offsetAt(x.range.end)}return T.push(c.substr(b)),T.join("")}e.applyEdits=r})(Mo||(Mo={}));function dc(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);dc(r,t),dc(i,t);let o=0,c=0,l=0;for(;o<r.length&&c<i.length;)t(r[o],i[c])<=0?e[l++]=r[o++]:e[l++]=i[c++];for(;o<r.length;)e[l++]=r[o++];for(;c<i.length;)e[l++]=i[c++];return e}function zp(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);(o===13||o===10)&&(o===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Hp(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function cb(e){let t=Hp(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var Vp=["","namespace","class","enum","interface","struct","typeParameter","type","parameter","variable","property","enumMember","decorator","event","function","method","macro","label","comment","string","keyword","number","regexp","operator","builtin","directive"];var $p=["declaration","definition","readonly","static","deprecated","abstract","async","modification","documentation","defaultLibrary",""];function Up(){return{path:"",start:{line:0,character:0},end:{line:0,character:0}}}function Kp(){return{token:0,modifier:10}}var qo=class{constructor(t){this.value=t,this.children=new Map}},Fo=class{constructor(){this.root=new qo(void 0)}insert(t,n){let r=this.root;for(let i of t)r.children.has(i)===!1&&r.children.set(i,new qo(void 0)),r=r.children.get(i);r.value=n}find(t,n){let r=this.root,i="";for(let o=n;o<t.length;++o){let c=t[o];if(r.children.has(c))i+=c,r=r.children.get(c);else break}if(r.value!==void 0)return{key:i,value:r.value}}};var db=require("assert"),Gp=["*","**","/","%","+","-","<=","<",">=",">","(",")","==","!=","?",":","=","+=","-=","*=","/=","%=","**=","++","--","&",",","{","}",";","|","^","~","<<",">>",">>>","&=","|=","^=","<<=",">>=",">>>=",".","&&","||","!","[","]","^^","@","!is","::","#"],lb=["*","**","/","%","+","-","<=","<",">","(",")","==","!=","?",":","=","+=","-=","*=","/=","%=","**=","++","--","&",",","{","}",";","|","^","~","<<","&=","|=","^=","<<=",".","&&","||","!","[","]","^^","@","::","#"],Qp=["and","auto","bool","break","case","cast","catch","class","const","continue","default","do","double","else","enum","false","float","for","funcdef","if","import","in","inout","int","interface","int8","int16","int32","int64","is","mixin","namespace","not","null","or","out","override","private","property","protected","return","switch","true","try","typedef","uint","uint8","uint16","uint32","uint64","void","while","xor"],fb=new Set(["-","+","!","++","--","~","@","not"]),pb=new Set(["&","|","^","<<",">>",">>>"]),mb=new Set(["+","-","*","/","%","**"]),hb=new Set(["==","!=","<","<=",">",">=","is","!is"]),gb=new Set(["&&","||","^^","and","or","xor"]),yb=new Set(["=","+=","-=","*=","/=","|=","&=","^=","%=","**=","<<=",">>=",">>>="]),lc=new Set(["int","int8","int16","int32","int64","uint","uint8","uint16","uint32","uint64","float","double"]),bb=new Set(["void","int","int8","int16","int32","int64","uint","uint8","uint16","uint32","uint64","float","double","bool"]);function Sb(){return{isMark:!1,isExprPreOp:!1,isExprOp:!1,isBitOp:!1,isMathOp:!1,isCompOp:!1,isLogicOp:!1,isAssignOp:!1,isNumber:!1,isPrimeType:!1}}var fc=Tb();function Tb(){let e=new Map;for(let t of[...Gp,...Qp])e.set(t,Sb());for(let t of Gp)e.get(t).isMark=!0;for(let t of fb)e.get(t).isExprPreOp=!0;for(let t of pb)e.get(t).isExprOp=!0,e.get(t).isBitOp=!0;for(let t of mb)e.get(t).isExprOp=!0,e.get(t).isMathOp=!0;for(let t of hb)e.get(t).isExprOp=!0,e.get(t).isCompOp=!0;for(let t of gb)e.get(t).isExprOp=!0,e.get(t).isLogicOp=!0;for(let t of yb)e.get(t).isAssignOp=!0;for(let t of lc)e.get(t).isNumber=!0;for(let t of bb)e.get(t).isPrimeType=!0;return e}var vb=xb();function xb(){let e=new Fo;for(let t of lb)e.insert(t,fc.get(t));return e}function Jp(e,t){return vb.find(e,t)}var Nb=Pb();function Pb(){let e=new Map;for(let t of Qp)e.set(t,fc.get(t));return e}function Xp(e){return Nb.get(e)}function Yp(e){let t=fc.get(e);if(t!==void 0)return t;db(!1)}function Et(e,t){let n=t.start.line,r=t.end.line,i=e.line,o=t.start.character,c=t.end.character,l=e.character;return n===i&&i<r?o<=l:n<i&&i<r?!0:n<i&&i===r?l<=c:n===i&&i===r?o<=l&&l<=c:!1}function em(e,t){return e.line===t.line}function tm(e,t){return e.line<t.line||e.line===t.line&&e.character<t.character}function Ao(e,t){return e.text===t.text&&e.location.path===t.location.path&&e.location.start.line===t.location.start.line&&e.location.start.character===t.location.start.character&&e.location.end.line===t.location.end.line&&e.location.end.character===t.location.end.character}function pc(e,t){if(e.text!==t[0])return!1;let n=e.next,r=e.location.end.character;for(let i=1;i<t.length;i++){if(n===void 0||n.text!==t[i]||n.location.start.line!==e.location.start.line||n.location.start.character!==r)return!1;r=n.location.end.character,n=n.next}return!0}function Te(e,t){let n={text:t,location:Up(),highlight:Kp(),index:-1,next:void 0};return e==="Reserved"?{...n,kind:"Reserved",property:Yp(t)}:e==="Number"?{...n,kind:"Number",numeric:"Integer"}:{...n,kind:e}}function nm(e){return e.highlight.token===0}function mc(e){return{uri:e.location.path.toString(),range:{start:e.location.start,end:e.location.end}}}function hc(e,t){return rm(e.fullScope,t,e.path)}function jo(e,t){return hc(e,t)?.declaredPlace}function rm(e,t,n){for(let[r,i]of e.symbolMap){let o=i.declaredPlace.location;if(o.path===n&&Et(t,o))return i}for(let r of e.referencedList){let i=r.referencedToken.location;if(Et(t,i))return r.declaredSymbol}for(let[r,i]of e.childScopes){let o=rm(i,t,n);if(o!==void 0)return o}}var im={suppressAnalyzerErrors:!0,implicitMutualInclusion:!1,hoistEnumParentScope:!1,explicitPropertyAccessor:!1,builtinStringTypes:["string","String"],builtinArrayType:"array",formatter:{maxBlankLines:1,indentSpaces:4,useTabIndent:!1},trace:{server:"off"}},gc=im;function om(e){gc=gc=e||im}function Ne(){return gc}function Rb(e){Ne().trace.server!=="off"&&console.log(e)}function kb(e){Ne().trace.server==="verbose"&&console.log(e)}var Zt={message:Rb,verbose:kb};var Bo=class{constructor(t){this.name=t;this.start=performance.now()}stamp(t){let r=`${this.name} | ${t}`;Zt.verbose(`${r.padEnd(28)}: ${performance.now()-this.start} ms`),this.start=performance.now()}};var sm=Bt(Zn()),Or=[],Ir=[];function Db(){Ir=[],Or.push(Ir)}function Cb(){let e=Ir;return Or.pop(),Or.length>0&&(Ir=Or[Or.length-1]),e}function _b(e,t,n){Ir.push({range:e,message:t,severity:n,source:"AngelScript"})}function wb(e,t){_b(e,t,sm.DiagnosticSeverity.Error)}var Ee={beginSession:Db,endSession:Cb,addError:wb};var Wo=class{getCursor(){return this.cursor}constructor(t){this.content=t,this.cursor=0,this.head={line:0,character:0}}next(t=0){return this.content[this.cursor+t]}isEnd(){return this.cursor>=this.content.length}isNext(t){return this.content.substring(this.cursor,this.cursor+t.length)===t}isNextWrap(){let t=this.next();return t==="\r"||t===`
`}isNextWhitespace(){let t=this.content[this.cursor];return t===" "||t==="	"}stepNext(){this.isEnd()||(this.isNextWrap()?(this.head.line++,this.head.character=0,this.isNext(`\r
`)?this.cursor+=2:this.cursor+=1):(this.head.character++,this.cursor+=1))}stepFor(t){this.head.character+=t,this.cursor+=t}substrFrom(t){return this.content.substring(t,this.cursor)}copyHead(){return{line:this.head.line,character:this.head.character}}},zo=class{constructor(){this.buffer="";this.location=null}append(t,n){this.location===null?this.location=t:(t.start.line!==this.location.start.line||t.start.character-this.location.end.character>1)&&(this.flush(),this.location=t),this.location.end=t.end,this.buffer+=n}flush(){this.buffer.length!==0&&this.location!==null&&(this.location.end.character++,Ee.addError(this.location,"Unknown token: "+this.buffer),this.buffer="")}};function Mr(e){return/^[0-9]$/.test(e)}function Eb(e){return/^[01]$/.test(e)}function Ob(e){return/^[0-7]$/.test(e)}function Ib(e){return/^[A-Fa-f0-9]$/.test(e)}function Mb(e){return/^[A-Za-z0-9_]$/.test(e)}function er(e,t){return{path:e.path,start:e.start,end:t}}function Lb(e,t){if(e.isNext("//"))return qb(e,t);if(e.isNext("/*"))return Fb(e,t)}function am(e,t){return{kind:"Comment",text:e,location:t,highlight:Lr(18,10)}}function qb(e,t){let n=e.getCursor();for(e.stepFor(2);!(e.isEnd()||e.isNextWrap());)e.stepNext();return am(e.substrFrom(n),er(t,e.copyHead()))}function Fb(e,t){let n=e.getCursor();for(e.stepFor(2);!e.isEnd();){if(e.isNext("*/")){e.stepFor(2);break}e.stepNext()}return am(e.substrFrom(n),er(t,e.copyHead()))}function Ab(e,t){let n=e.getCursor(),r=jb(e);if(n!==e.getCursor())return{kind:"Number",text:e.substrFrom(n),location:er(t,e.copyHead()),highlight:Lr(21,10),numeric:r}}function jb(e){if(/^[0-9.]/.test(e.next())===!1)return"Integer";if(e.next(0)==="."&&/^[fF]$/.test(e.next(1)))return"Integer";if(e.next(0)==="0"){if(/^[bB]$/.test(e.next(1))){for(e.stepFor(2);e.isEnd()===!1&&Eb(e.next());)e.stepNext();return"Integer"}else if(/^[oO]$/.test(e.next(1))){for(e.stepFor(2);e.isEnd()===!1&&Ob(e.next());)e.stepNext();return"Integer"}else if(/^[dD]$/.test(e.next(1))){for(e.stepFor(2);e.isEnd()===!1&&Mr(e.next());)e.stepNext();return"Integer"}else if(/^[xX]$/.test(e.next(1))){for(e.stepFor(2);e.isEnd()===!1&&Ib(e.next());)e.stepNext();return"Integer"}}for(;e.isEnd()===!1&&Mr(e.next());)e.stepNext();let t="Integer",n=0;if(e.next()==="."){for(n++;Mr(e.next(n));)n++;t="Double"}if(/^[eE]$/.test(e.next(n))&&/^[+-]$/.test(e.next(n+1))&&Mr(e.next(n+2))){for(n+=3;Mr(e.next(n));)n++;t="Double"}return n>=1&&(e.stepFor(n),t==="Double"&&/^[fF]$/.test(e.next()))?(e.stepNext(),"Float"):t}function Bb(e,t){let n=e.getCursor();if(e.next()!=="'"&&e.next()!=='"')return;let r=e.isNext('"""')?'"""':e.isNext('"')?'"':"'";e.stepFor(r.length);let i=!1;for(;!e.isEnd();)if(r!=='"""'&&e.isNextWrap()){Ee.addError({start:e.copyHead(),end:e.copyHead()},"Missing end quote "+r);break}else if(i===!1&&e.isNext(r)){e.stepFor(r.length);break}else e.next()==="\\"&&i===!1?i=!0:i=!1,e.stepNext();return{kind:"String",text:e.substrFrom(n),location:er(t,e.copyHead()),highlight:Lr(19,10)}}function Wb(e,t){let n=Jp(e.content,e.getCursor());if(n!==void 0)return e.stepFor(n.key.length),cm(n.key,n.value,er(t,e.copyHead()))}function cm(e,t,n){return{kind:"Reserved",text:e,property:t,location:n,highlight:Lr(20,10)}}function zb(e,t){let n=e.getCursor();for(;e.isEnd()===!1&&Mb(e.next());)e.stepFor(1);let r=e.substrFrom(n);if(r==="")return;let i=er(t,e.copyHead()),o=Xp(r);return o!==void 0?cm(r,o,i):Hb(r,i)}function Hb(e,t){return{kind:"Identifier",text:e,location:t,highlight:Lr(9,10)}}function Lr(e,t){return{token:e,modifier:t}}function um(e,t){let n=[],r=new Wo(e),i=new zo;for(;!r.isEnd();){if(r.isNextWrap()||r.isNextWhitespace()){r.stepNext();continue}let o={start:r.copyHead(),end:r.copyHead(),path:t},c=Lb(r,o);if(c!==void 0){n.push(c);continue}let l=Ab(r,o);if(l!==void 0){n.push(l);continue}let b=Bb(r,o);if(b!==void 0){n.push(b);continue}let T=Wb(r,o);if(T!==void 0){n.push(T);continue}let x=zb(r,o);if(x!==void 0){n.push(x);continue}i.append(o,r.next()),r.stepNext()}return i.flush(),n}function Ho(e,t){return{start:e,end:t}}var Ot=Symbol(),yc=Symbol();function tr(e){return e!==Ot&&e!==yc}function dm(e){return e!==void 0&&"nodeName"in e}var Vo=class{constructor(t,n=0){this.tokens=t;this.cursorIndex=n;this.caches=[];this.caches=new Array(t.length)}backtrack(t){this.cursorIndex=t.index}isEnd(){return this.cursorIndex>=this.tokens.length}next(t=0){return this.cursorIndex+t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[this.cursorIndex+t]}prev(){return this.cursorIndex<=0?this.tokens[0]:this.tokens[this.cursorIndex-1]}step(){this.cursorIndex++}commit(t){let n=this.next();nm(n)===!1&&(n.highlight.token=t),this.step()}expect(t,n){return this.isEnd()?(Ee.addError(this.next().location,"Unexpected end of file."),!1):(this.next().kind==="Reserved"&&this.next().text===t)===!1?(Ee.addError(this.next().location,`Expected '${t}'.`),!1):(this.commit(n),!0)}error(t){Ee.addError(this.next().location,t)}cache(t){let n=this.cursorIndex,r=this.caches[n],i;return r!==void 0&&r.kind===t&&(i=()=>(this.cursorIndex=r.rangeEnd,r.data)),{restore:i,store:c=>{this.caches[n]={kind:t,rangeEnd:this.cursorIndex,data:c}}}}};function qr(e){return e.next!==void 0?e.next:e}function fm(e){return e.start.location.start.line===e.end.location.end.line}function en(e,t){return{path:e.location.path,start:e.location.start,end:t.location.end}}function je(e){return en(e.start,e.end)}function pm(e,t){t==="shared"?e.isShared=!0:t==="external"?e.isExternal=!0:t==="abstract"?e.isAbstract=!0:t==="final"&&(e.isFinal=!0)}function mm(e,t){t==="override"?e.isOverride=!0:t==="final"?e.isFinal=!0:t==="explicit"?e.isExplicit=!0:t==="property"&&(e.isProperty=!0)}function bc(e){let t=e.isConst?"const ":"";return t+=e.dataType.identifier.text,e.typeTemplates.length>0&&(t+="<"+e.typeTemplates.map(bc).join(", ")+">"),e.isArray&&(t+="[]"),e.refModifier!==void 0&&(t+=e.refModifier==="AtConst"?"@const":"@"),t}function Sc(e){return e.dataType.identifier}function ym(e){let t=[];for(;e.isEnd()===!1;){if(e.next().text===";"){e.commit(23);continue}let n=Zb(e);if(n==="Pending")continue;if(n!=="Mismatch"){t.push(n);continue}let r=Qb(e);if(r==="Pending")continue;if(r!=="Mismatch"){t.push(r);continue}let i=eS(e);if(i==="Pending")continue;if(i!=="Mismatch"){t.push(i);continue}let o=Vb(e);if(o==="Pending")continue;if(o!=="Mismatch"){t.push(o);continue}let c=bm(e);if(c==="Pending")continue;if(c!=="Mismatch"){t.push(c);continue}let l=Jb(e);if(l==="Pending")continue;if(l!=="Mismatch"){t.push(l);continue}let b=Ub(e);if(b==="Pending")continue;if(b!=="Mismatch"){t.push(b);continue}let T=Tm(e);if(T==="Pending")continue;if(T!=="Mismatch"){t.push(T);continue}let x=Sm(e);if(x!==void 0){t.push(x);continue}let w=vc(e);if(w!==void 0){t.push(w);continue}nr(e);let I=Uo(e);if(I!==void 0){t.push(I);continue}break}return t}function Vb(e){if(e.next().text!=="namespace")return"Mismatch";let t=e.next();e.commit(24);let n=[];for(;e.isEnd()===!1;){let i=St(e,1);if(i!==void 0&&n.push(i),It(e,"::","{",!0)==="Break")break;i===void 0&&e.step()}if(n.length===0)return"Pending";let r=ym(e);return e.expect("}",23),{nodeName:"Namespace",nodeRange:{start:t,end:e.prev()},namespaceList:n,script:r}}function jr(e,t){let n=e.next();if(n.kind==="Identifier")return e.commit(t),n}function St(e,t){let n=jr(e,t);return n===void 0&&e.error("Expected identifier."),n}function $b(e,t){return e.next().text!==t?(e.error(`Expected '${t}'.`),!1):(e.commit(20),!0)}function Ub(e){let t=e.next(),n=Br(e);if(e.next().text!=="enum")return e.backtrack(t),"Mismatch";e.commit(24);let r=St(e,3);if(r===void 0)return"Pending";let i=[],o=e.next();return e.next().text===";"?e.commit(23):i=Kb(e),{nodeName:"Enum",nodeRange:{start:t,end:e.prev()},scopeRange:{start:o,end:e.prev()},entity:n,identifier:r,memberList:i}}function Kb(e){let t=[];for(e.expect("{",23);e.isEnd()===!1&&It(e,",","}",t.length>0)!=="Break";){if(e.next().text==="}"){e.commit(23);break}let n=St(e,11);if(n===void 0)break;let r;e.next().text==="="&&(e.commit(23),r=Ko(e)),t.push({identifier:n,expr:r})}return t}function Br(e){let t=e.cache("EntityAttribute");if(t.restore!==void 0)return t.restore();let n;for(;e.isEnd()===!1;){let r=e.next().text;if((r==="shared"||r==="external"||r==="abstract"||r==="final")===!1)break;n===void 0&&(n={isShared:!1,isExternal:!1,isAbstract:!1,isFinal:!1}),pm(n,r),e.commit(24)}return t.store(n),n}function bm(e){let t=e.next(),n=nr(e),r=Br(e);if(e.next().text!=="class")return e.backtrack(t),"Mismatch";e.commit(24);let i=St(e,2);if(i===void 0)return"Pending";let o=Pc(e),c=[];if(e.next().text===":")for(e.commit(23);e.isEnd()===!1;){let x=St(e,7);if(x!==void 0&&c.push(x),It(e,",","{",!0)==="Break")break;x===void 0&&e.step()}else e.expect("{",23);let l=e.next(),b=Gb(e),T=e.prev();return{nodeName:"Class",nodeRange:{start:t,end:e.prev()},scopeRange:{start:l,end:T},metadata:n,entity:r,identifier:i,typeTemplates:o,baseList:c,memberList:b}}function Gb(e){let t=[];for(;e.isEnd()===!1&&zr(e,"}")!=="Break";){let n=Tm(e);if(n==="Pending")continue;if(n!=="Mismatch"){t.push(n);continue}let r=Sm(e);if(r!==void 0){t.push(r);continue}let i=vc(e);if(i!==void 0){t.push(i);continue}let o=Uo(e);if(o!==void 0){t.push(o);continue}e.error("Expected class member."),e.step()}return t}function Qb(e){if(e.next().text!=="typedef")return"Mismatch";let t=e.next();e.commit(24);let n=Rm(e);if(n===void 0)return e.error("Expected primitive type."),"Pending";let r=e.next();return e.commit(7),e.expect(";",23),{nodeName:"TypeDef",nodeRange:{start:t,end:e.prev()},type:n,identifier:r}}function Sm(e){let t=e.next();nr(e);let n=Br(e),r=Tc(e),i;if(e.next().text==="~")e.commit(23),i=Ot;else if(e.next(0).kind==="Identifier"&&e.next(1).text==="(")i=yc;else{let w=tn(e);if(w===void 0){e.backtrack(t);return}let I=Wr(e);i={returnType:w,isRef:I}}let o=e.next();e.commit(tr(i)?14:7);let c=xc(e);if(c===void 0){e.backtrack(t);return}let l=$o(e),b=Dc(e),T=e.next().text,x;return T===";"?e.commit(23):x=Fr(e),x===void 0&&(x={nodeName:"StatBlock",nodeRange:{start:e.next(),end:e.next()},statementList:[]}),{nodeName:"Func",nodeRange:{start:t,end:e.prev()},entity:n,accessor:r,head:i,identifier:o,paramList:c,isConst:l,funcAttr:b,statBlock:x}}function $o(e){return e.next().text!=="const"?!1:(e.commit(20),!0)}function Wr(e){let t=e.next().text==="&";return t&&e.commit(24),t}function nr(e){let t=e.next();if(e.next().text!=="[")return[];let n=0,r=[];for(;e.isEnd()===!1;)if(e.next().text==="[")n>0&&r.push(e.next()),n++,e.commit(23);else if(e.next().text==="]"){if(n--,e.commit(23),n===0)return e.next().text==="["&&(r=[...r,...nr(e)]),r;r.push(e.next())}else r.push(e.next()),e.commit(12);return e.backtrack(t),[]}function Tc(e){let t=e.next().text;if(t==="private"||t==="protected")return e.commit(24),t==="private"?"Private":"Protected"}function Jb(e){let t=e.next(),n=Br(e);if(e.next().text!=="interface")return e.backtrack(t),"Mismatch";e.commit(24);let r=St(e,4);if(r===void 0)return"Pending";let i={nodeName:"Interface",nodeRange:{start:t,end:e.prev()},entity:n,identifier:r,baseList:[],memberList:[]};if(e.next().text===";")return e.commit(23),i;if(e.next().text===":")for(e.commit(23);e.isEnd()===!1;){let o=St(e,7);if(o!==void 0&&i.baseList.push(o),It(e,",","{",!0)==="Break")break;o===void 0&&e.step()}else e.expect("{",23);return i.memberList=Xb(e),i}function Xb(e){let t=[];for(;e.isEnd()===!1&&zr(e,"}")!=="Break";){let n=tS(e);if(n!==void 0){t.push(n);continue}let r=vc(e);if(r!==void 0){t.push(r);continue}e.error("Expected interface member."),e.step()}return t}function Uo(e){let t=e.next();nr(e);let n=Tc(e),r=tn(e);if(r===void 0){e.backtrack(t);return}if(e.next().kind!=="Identifier"){e.backtrack(t);return}let i=[];for(;e.isEnd()===!1;){let o=St(e,9);if(o===void 0)break;if(e.next().text==="="){e.commit(23);let c=Yb(e);i.push({identifier:o,initializer:c})}else{let c=Go(e);i.push({identifier:o,initializer:c})}if(It(e,",",";",!0)==="Break")break}return{nodeName:"Var",nodeRange:{start:t,end:e.prev()},accessor:n,type:r,variables:i}}function Yb(e){let t=Rc(e);if(t!==void 0)return t;let n=Qe(e);if(n!==void 0)return n;e.error("Expected initializer list or assignment.")}function Zb(e){let t=e.next();if(e.next().text!=="import")return"Mismatch";e.commit(20);let n=Hr(e);if(n===void 0)return"Pending";let r=Wr(e),i=St(e,9);if(i===void 0)return"Pending";let o=xm(e);if(o===void 0)return"Pending";let c=Dc(e);if($b(e,"from")===!1)return"Pending";let l=e.next();return l.kind!=="String"?(e.error("Expected string path."),"Pending"):(e.commit(19),e.expect(";",23),{nodeName:"Import",nodeRange:{start:t,end:e.prev()},type:n,isRef:r,identifier:i,paramList:o,funcAttr:c,path:l})}function Tm(e){let t=e.next(),n=Br(e);if(e.next().text!=="funcdef")return e.backtrack(t),"Mismatch";e.commit(24);let r=Hr(e);if(r===void 0)return"Pending";let i=Wr(e),o=e.next();e.commit(14);let c=xm(e);return c===void 0?"Pending":(e.expect(";",23),{nodeName:"FuncDef",nodeRange:{start:t,end:e.prev()},entity:n,returnType:r,isRef:i,identifier:o,paramList:c})}function vc(e){let t=e.next();nr(e);let n=Tc(e),r=tn(e);if(r===void 0){e.backtrack(t);return}let i=Wr(e),o=jr(e,9);if(o===void 0){e.backtrack(t);return}if(e.next().text!=="{"){e.backtrack(t);return}e.commit(23);let c,l;for(;e.isEnd()===!1;){let b=e.next().text;if(zr(e,"}")==="Break")break;b==="get"?c=hm(e):b==="set"?l=hm(e):(e.error("Expected getter or setter."),e.step())}return{nodeName:"VirtualProp",nodeRange:{start:t,end:e.prev()},accessor:n,type:r,isRef:i,identifier:o,getter:c,setter:l}}function hm(e){e.commit(24);let t=$o(e),n=Dc(e),r=Fr(e);return{isConst:t,funcAttr:n,statBlock:r}}function eS(e){if(e.next().text!=="mixin")return"Mismatch";let t=e.next();e.commit(24);let n=bm(e);return n==="Pending"?"Pending":n==="Mismatch"?(e.error("Expected class definition."),"Pending"):{nodeName:"Mixin",nodeRange:{start:t,end:e.prev()},mixinClass:n}}function tS(e){let t=e.next(),n=Hr(e);if(n===void 0)return;let r=Wr(e),i=jr(e,14);if(i===void 0)return;let o=xc(e);if(o===void 0)return;let c=$o(e);return e.expect(";",23),{nodeName:"IntfMethod",nodeRange:{start:t,end:e.prev()},returnType:n,isRef:r,identifier:i,paramList:o,isConst:c}}function vm(e){if(e.next().text!=="{")return;let t=e.next();e.commit(23);let n=[];for(;e.isEnd()===!1&&zr(e,"}")!=="Break";){let r=Uo(e);if(r!==void 0){n.push(r);continue}let i=Cc(e);if(i!=="Pending"){if(i!=="Mismatch"){n.push(i);continue}e.error("Expected statement."),e.step()}}return{nodeName:"StatBlock",nodeRange:{start:t,end:e.prev()},statementList:n}}function Fr(e){let t=vm(e);return t===void 0&&e.error("Expected statement block."),t}function xc(e){if(e.next().text!=="(")return;if(e.commit(23),e.next().text==="void")return e.commit(24),e.expect(")",23),[];let t=[];for(;e.isEnd()===!1&&Nc(e,t.length>0)!=="Break";){let n=Hr(e);if(n===void 0){e.step();continue}let r=Pm(e),i;e.next().kind==="Identifier"&&(i=e.next(),e.commit(9));let o;e.next().text==="="&&(e.commit(23),o=Ko(e)),t.push({type:n,modifier:r,identifier:i,defaultExpr:o})}return t}function xm(e){let t=xc(e);return t===void 0&&e.error("Expected parameter list."),t}function Nc(e,t){return It(e,",",")",t)}function nS(e){return e===","||e===")"}function Nm(e,t,n,r){let i=e.next().text;if(i===n)return e.commit(23),"Break";if(r){if(i!==t)return;e.commit(23)}return"Through"}function It(e,t,n,r){let i=Nm(e,t,n,r);return i!==void 0?i:(e.error(`Expected '${t}' or '${n}'.`),"Break")}function zr(e,t){return e.next().text===t?(e.commit(23),"Break"):"Through"}function Pm(e){if(e.next().text!=="&")return;e.commit(24);let t=e.next().text;if(t==="in"||t==="out"||t==="inout"){if(e.commit(24),t==="in")return"In";if(t==="out")return"Out"}return"InOut"}function tn(e){let t=e.next(),n=$o(e),r=kc(e),i=iS(e);if(i===void 0){e.backtrack(t);return}let o=Pc(e)??[],{isArray:c,refModifier:l}=rS(e);return{nodeName:"Type",nodeRange:{start:t,end:e.prev()},isConst:n,scope:r,dataType:i,typeTemplates:o,isArray:c,refModifier:l}}function rS(e){let t=!1,n;for(;e.isEnd()===!1;){if(e.next(0).text==="["&&e.next(1).text==="]"){e.commit(23),e.commit(23),t=!0;continue}else if(e.next().text==="@"){e.commit(24),e.next().text==="const"?(e.commit(24),n="AtConst"):n="At";continue}break}return{isArray:t,refModifier:n}}function Hr(e){let t=tn(e);return t===void 0&&e.error("Expected type."),t}function Pc(e){let t=e.cache("TypeTemplates");if(t.restore!==void 0)return t.restore();let n=e.next();if(e.next().text!=="<")return;e.commit(23);let r=[];for(;e.isEnd()===!1;){let i=tn(e);if(i===void 0){e.backtrack(n);return}r.push(i);let o=Nm(e,",",">",r.length>0);if(o==="Break")break;if(o===void 0){e.backtrack(n),t.store(void 0);return}}return t.store(r),r}function Rc(e){if(e.next().text!=="{")return;let t=e.next();e.commit(23);let n=[];for(;e.isEnd()===!1&&It(e,",","}",n.length>0)!=="Break";){let r=Qo(e);if(r!==void 0){n.push(r);continue}let i=Rc(e);if(i!==void 0){n.push(i);continue}e.error("Expected assignment or initializer list."),e.step()}return{nodeName:"InitList",nodeRange:{start:t,end:e.prev()},initList:n}}function kc(e){let t=e.cache("Scope");if(t.restore!==void 0)return t.restore();let n=e.next(),r=!1;e.next().text==="::"&&(e.commit(23),r=!0);let i=[],o;for(;e.isEnd()===!1;){let l=e.next(0);if(l.kind!=="Identifier")break;if(e.next(1).text==="::"){e.commit(1),e.commit(23),i.push(l);continue}else if(e.next(1).text==="<"){let b=e.next();e.commit(2),o=Pc(e),o===void 0||e.next().text!=="::"?e.backtrack(b):(e.commit(23),i.push(l))}break}if(r===!1&&i.length===0){t.store(void 0);return}let c={nodeName:"Scope",nodeRange:{start:n,end:e.prev()},isGlobal:r,scopeList:i,typeTemplates:o??[]};return t.store(c),c}function iS(e){let t=e.next();if(t.kind==="Identifier")return e.commit(7),{nodeName:"DataType",nodeRange:{start:t,end:t},identifier:t};if(t.text==="?"||t.text==="auto")return e.commit(24),{nodeName:"DataType",nodeRange:{start:t,end:t},identifier:t};let n=Rm(e);if(n!==void 0)return{nodeName:"DataType",nodeRange:{start:t,end:t},identifier:n}}function Rm(e){let t=e.next();if(!(t.kind!=="Reserved"||t.property.isPrimeType===!1))return e.commit(24),t}function Dc(e){let t;for(;e.isEnd()===!1;){let n=e.next().text;if((n==="override"||n==="final"||n==="explicit"||n==="property")===!1)break;t===void 0&&(t={isOverride:!1,isFinal:!1,isExplicit:!1,isProperty:!1}),mm(t,n),e.commit(24)}return t}function Cc(e){let t=dS(e);if(t==="Pending")return"Pending";if(t!=="Mismatch")return t;let n=aS(e);if(n==="Pending")return"Pending";if(n!=="Mismatch")return n;let r=cS(e);if(r==="Pending")return"Pending";if(r!=="Mismatch")return r;let i=mS(e);if(i==="Pending")return"Pending";if(i!=="Mismatch")return i;let o=vm(e);if(o!==void 0)return o;let c=sS(e);if(c!==void 0)return c;let l=lS(e);if(l!==void 0)return l;let b=uS(e);if(b==="Pending")return"Pending";if(b!=="Mismatch")return b;let T=oS(e);if(T==="Pending")return"Pending";if(T!=="Mismatch")return T;let x=pS(e);if(x==="Pending")return"Pending";if(x!=="Mismatch")return x;let w=_c(e);return w!==void 0?w:"Mismatch"}function Ar(e){let t=Cc(e);if(t!=="Pending"){if(t==="Mismatch"){e.error("Expected statement.");return}return t}}function oS(e){if(e.next().text!=="switch")return"Mismatch";let t=e.next();e.commit(20),e.expect("(",23);let n=Qe(e);if(n===void 0)return"Pending";e.expect(")",23),e.expect("{",23);let r=[];for(;e.isEnd()===!1&&zr(e,"}")!=="Break";){let i=hS(e);if(i==="Mismatch"){e.error("Expected case statement."),e.step();continue}i!=="Pending"&&r.push(i)}return{nodeName:"Switch",nodeRange:{start:t,end:e.prev()},assign:n,caseList:r}}function sS(e){if(e.next().text!=="break")return;let t=e.next();return e.commit(20),e.expect(";",23),{nodeName:"Break",nodeRange:{start:t,end:e.prev()}}}function aS(e){if(e.next().text!=="for")return"Mismatch";let t=e.next();if(e.commit(20),e.expect("(",23)===!1)return"Pending";let n=Uo(e)??_c(e);if(n===void 0)return e.error("Expected initial expression statement or variable declaration."),"Pending";let r={nodeName:"For",nodeRange:{start:t,end:e.prev()},initial:n,condition:void 0,incrementList:[],statement:void 0};if(r.condition=fS(e),r.condition===void 0)return De(e,r);for(;e.isEnd()===!1&&It(e,",",")",r.incrementList.length>0)!=="Break";){let i=Qe(e);if(i===void 0)break;r.incrementList.push(i)}return r.statement=Ar(e),De(e,r)}function cS(e){if(e.next().text!=="while")return"Mismatch";let t=e.next();if(e.commit(20),e.expect("(",23)===!1)return"Pending";let n=Qe(e);if(n===void 0)return"Pending";let r={nodeName:"While",nodeRange:{start:t,end:e.prev()},assign:n,statement:void 0};return e.expect(")",23)===!1||(r.statement=Ar(e)),De(e,r)}function uS(e){if(e.next().text!=="do")return"Mismatch";let t=e.next();e.commit(20);let n=Ar(e);if(n===void 0)return"Pending";let r={nodeName:"DoWhile",nodeRange:{start:t,end:e.prev()},statement:n,assign:void 0};return e.expect("while",20)===!1||e.expect("(",23)===!1||(r.assign=Qe(e),r.assign===void 0)||e.expect(")",23)===!1||e.expect(";",23),De(e,r)}function dS(e){if(e.next().text!=="if")return"Mismatch";let t=e.next();if(e.commit(20),e.expect("(",23)===!1)return"Pending";let n=Qe(e);if(n===void 0)return"Pending";let r={nodeName:"If",nodeRange:{start:t,end:e.prev()},condition:n,thenStat:void 0,elseStat:void 0};return e.expect(")",23)===!1||(r.thenStat=Ar(e),r.thenStat===void 0)||e.next().text==="else"&&(e.commit(20),r.elseStat=Ar(e)),De(e,r)}function De(e,t){return t.nodeRange=Ho(t.nodeRange.start,e.prev()),t}function lS(e){if(e.next().text!=="continue")return;let t=e.next();return e.commit(20),e.expect(";",23),{nodeName:"Continue",nodeRange:{start:t,end:e.prev()}}}function _c(e){let t=e.next();if(e.next().text===";")return e.commit(23),{nodeName:"ExprStat",nodeRange:{start:t,end:e.prev()},assign:void 0};let n=Qo(e);if(n!==void 0)return e.expect(";",23),{nodeName:"ExprStat",nodeRange:{start:t,end:e.prev()},assign:n}}function fS(e){let t=_c(e);return t===void 0&&e.error("Expected expression statement."),t}function pS(e){if(e.next().text!=="try")return"Mismatch";let t=e.next();e.commit(20);let n=Fr(e);if(n===void 0)return"Pending";let r={nodeName:"Try",nodeRange:{start:t,end:e.prev()},tryBlock:n,catchBlock:void 0};return e.expect("catch",20)===!1||(r.catchBlock=Fr(e)),De(e,r)}function mS(e){if(e.next().text!=="return")return"Mismatch";let t=e.next();e.commit(20);let n={nodeName:"Return",nodeRange:{start:t,end:e.prev()},assign:void 0};return e.next().text===";"?(e.commit(23),De(e,n)):(n.assign=Qe(e),n.assign===void 0||e.expect(";",23),De(e,n))}function hS(e){let t=e.next(),n;if(e.next().text==="case"){if(e.commit(20),n=Ko(e),n===void 0)return"Pending"}else if(e.next().text==="default")e.commit(20);else return"Mismatch";e.expect(":",23);let r=[];for(;e.isEnd()===!1;){let i=Cc(e);if(i==="Mismatch")break;i!=="Pending"&&r.push(i)}return{nodeName:"Case",nodeRange:{start:t,end:e.prev()},expr:n,statementList:r}}function km(e){let t=e.next(),n=gS(e);if(n===void 0)return;let r=wS(e);if(r===void 0)return{nodeName:"Expr",nodeRange:{start:t,end:e.prev()},head:n,tail:void 0};let i=Ko(e);return i===void 0?{nodeName:"Expr",nodeRange:{start:t,end:e.prev()},head:n,tail:void 0}:{nodeName:"Expr",nodeRange:{start:t,end:e.prev()},head:n,tail:{operator:r,expression:i}}}function Ko(e){let t=km(e);return t===void 0&&e.error("Expected expression."),t}function gS(e){let t=yS(e);if(t!==void 0)return t;let n=bS(e);if(n!==void 0)return n}function yS(e){let t=e.next(),n=tn(e);if(n!==void 0){if(e.next().text!=="="){e.backtrack(t);return}e.commit(23)}let r=Rc(e);if(r===void 0){e.backtrack(t);return}return{nodeName:"ExprTerm",nodeRange:{start:t,end:e.prev()},exprTerm:1,type:n,initList:r}}function bS(e){let t=e.next(),n=[];for(;e.isEnd()===!1;){let o=e.next();if(o.kind!=="Reserved"||o.property.isExprPreOp===!1)break;n.push(e.next()),e.commit(23)}let r=SS(e);if(r==="Mismatch"&&e.backtrack(t),r==="Mismatch"||r==="Pending")return;let i=[];for(;e.isEnd()===!1;){let o=vS(e);if(o===void 0)break;i.push(o)}return{nodeName:"ExprTerm",nodeRange:{start:t,end:e.prev()},exprTerm:2,preOps:n,value:r,postOps:i}}function SS(e){let t=PS(e);if(t==="Pending")return"Pending";if(t!=="Mismatch")return t;if(e.next().text==="("){e.commit(23);let l=Qe(e);return l===void 0?"Pending":(e.expect(")",23),l)}let n=DS(e);if(n!==void 0)return n;let r=RS(e);if(r==="Pending")return"Pending";if(r!=="Mismatch")return r;let i=Cm(e);if(i!==void 0)return i;let o=TS(e);if(o!==void 0)return o;let c=CS(e);return c!==void 0?c:"Mismatch"}function TS(e){let t=e.next(),n=tn(e);if(n===void 0)return;let r=Go(e);if(r===void 0){e.backtrack(t);return}return{nodeName:"ConstructCall",nodeRange:{start:t,end:e.prev()},type:n,argList:r}}function vS(e){let t=e.next(),n=xS(e);if(n!==void 0)return n;let r=NS(e);if(r!==void 0)return r;let i=Go(e);if(i!==void 0)return{nodeName:"ExprPostOp",nodeRange:{start:t,end:e.prev()},postOp:3,args:i};let o=e.next().text;if(o==="++"||o==="--")return e.commit(23),{nodeName:"ExprPostOp",nodeRange:{start:t,end:e.prev()},postOp:4,operator:o}}function xS(e){if(e.next().text!==".")return;let t=e.next();e.commit(23);let n=Cm(e);if(n!==void 0)return{nodeName:"ExprPostOp",nodeRange:{start:t,end:e.prev()},postOp:1,member:n};let r=St(e,9);return{nodeName:"ExprPostOp",nodeRange:{start:t,end:e.prev()},postOp:1,member:r}}function NS(e){if(e.next().text!=="[")return;let t=e.next();e.commit(23);let n=[];for(;e.isEnd()===!1;){let r=Dm(e),i=Qe(e);if(i!==void 0&&n.push({identifier:r,assign:i}),It(e,",","]",n.length>0)==="Break")break}return{nodeName:"ExprPostOp",nodeRange:{start:t,end:e.prev()},postOp:2,indexerList:n}}function Dm(e){if(e.next(0).kind==="Identifier"&&e.next(1).text===":"){let t=e.next();return e.commit(8),e.commit(23),t}}function PS(e){if(e.next().text!=="cast")return"Mismatch";let t=e.next();if(e.commit(20),e.expect("<",23)===!1)return"Pending";let n=Hr(e);if(n===void 0)return"Pending";if(e.expect(">",23)===!1)return"Pending";if(e.expect("(",23)===!1)return"Pending";let r=Qe(e);return r===void 0?"Pending":(e.expect(")",23),{nodeName:"Cast",nodeRange:{start:t,end:e.prev()},type:n,assign:r})}var RS=e=>{if(kS(e)===!1)return"Mismatch";let t=e.next();e.commit(24),e.expect("(",23);let n={nodeName:"Lambda",nodeRange:{start:t,end:e.prev()},paramList:[],statBlock:void 0};for(;e.isEnd()===!1&&Nc(e,n.paramList.length>0)!=="Break";){if(e.next(0).kind==="Identifier"&&nS(e.next(1).text)){n.paramList.push({type:void 0,typeMod:void 0,identifier:e.next()}),e.commit(8);continue}let r=tn(e),i=r!==void 0?Pm(e):void 0,o=jr(e,8);n.paramList.push({type:r,typeMod:i,identifier:o})}return n.statBlock=Fr(e),De(e,n)};function kS(e){if(e.next().text!=="function"||e.next(1).text!=="(")return!1;let t=2;for(;e.isEnd()===!1;){if(e.next(t).text===")")return e.next(t+1).text==="{";t++}return!1}function DS(e){let t=e.next();if(t.kind==="Number")return e.commit(21),{nodeName:"Literal",nodeRange:{start:t,end:t},value:t};if(t.kind==="String")return e.commit(19),{nodeName:"Literal",nodeRange:{start:t,end:t},value:t};if(t.text==="true"||t.text==="false"||t.text==="null")return e.commit(24),{nodeName:"Literal",nodeRange:{start:t,end:t},value:t}}function Cm(e){let t=e.next(),n=kc(e),r=jr(e,14);if(r===void 0){e.backtrack(t);return}let i=Go(e);if(i===void 0){e.backtrack(t);return}return{nodeName:"FuncCall",nodeRange:{start:t,end:e.prev()},scope:n,identifier:r,argList:i}}function CS(e){let t=e.next(),n=kc(e),r=e.next();if(r.kind!=="Identifier")return n===void 0?void 0:(e.error("Expected identifier."),{nodeName:"VarAccess",nodeRange:{start:t,end:e.prev()},scope:n,identifier:void 0});let i=n===void 0&&r.text==="this";return e.commit(i?24:9),{nodeName:"VarAccess",nodeRange:{start:t,end:e.prev()},scope:n,identifier:r}}function Go(e){if(e.next().text!=="(")return;let t=e.next();e.commit(23);let n=[];for(;e.isEnd()===!1&&Nc(e,n.length>0)!=="Break";){let r=Dm(e),i=Qe(e);if(i===void 0)break;n.push({identifier:r,assign:i})}return{nodeName:"ArgList",nodeRange:{start:t,end:e.prev()},argList:n}}function Qo(e){let t=e.next(),n=_S(e);if(n===void 0)return;let r=IS(e),i={nodeName:"Assign",nodeRange:{start:t,end:e.prev()},condition:n,tail:void 0};if(r===void 0)return i;let o=Qo(e);return o===void 0||(i.tail={operator:r,assign:o},i.nodeRange=Ho(t,e.prev())),i}function Qe(e){let t=Qo(e);return t===void 0&&e.error("Expected assignment."),t}function _S(e){let t=e.next(),n=km(e);if(n===void 0)return;let r={nodeName:"Condition",nodeRange:{start:t,end:t},expr:n,ternary:void 0};if(e.next().text==="?"){e.commit(23);let i=Qe(e);if(i===void 0)return r;e.expect(":",23);let o=Qe(e);if(o===void 0)return r;r.ternary={trueAssign:i,falseAssign:o}}return r.nodeRange=Ho(t,e.prev()),r}function wS(e){let t=_m(e);if(t.kind==="Reserved")return t.property.isExprOp===!1?OS(e):(e.commit(t.text==="is"?24:23),t)}var ES=Te("Reserved","!is");function OS(e){if(pc(e.next(),["!","is"])===!1)return;let t=en(e.next(0),e.next(1));return e.commit(24),e.commit(24),{...ES,location:t}}function IS(e){let t=_m(e);if(!(t.kind!=="Reserved"||t.property.isAssignOp===!1))return e.commit(23),t}var MS=Te("Reserved",">="),LS=Te("Reserved",">>"),qS=Te("Reserved",">>="),FS=Te("Reserved",">>>"),AS=Te("Reserved",">>>=");function _m(e){if(e.next().text!==">")return e.next();let t=(l,b)=>{if(pc(e.next(1),l)===!1)return;let T=en(e.next(0),e.next(l.length));for(let x=0;x<l.length;++x)e.commit(23);return{...b,location:T}},n=t(["="],MS);if(n!==void 0)return n;let r=t([">",">","="],AS);if(r!==void 0)return r;let i=t([">",">"],FS);if(i!==void 0)return i;let o=t([">","="],qS);if(o!==void 0)return o;let c=t([">"],LS);return c!==void 0?c:e.next()}function wm(e){let t=new Vo(e),n=[];for(;t.isEnd()===!1;)n.push(...ym(t)),t.isEnd()===!1&&(t.error("Unexpected token."),t.step());return n}var jS=require("node:assert");function Jo(e){return e===void 0?!1:e.nodeName==="Class"||e.nodeName==="Interface"}function Em(e){if(e!==void 0)return e.nodeName}var B=class e{constructor(t,n,r,i,o,c,l,b){this.declaredPlace=t;this.declaredScope=n;this.sourceNode=r;this.membersScope=i;this.isTypeParameter=o;this.templateTypes=c;this.baseList=l;this.isHandler=b}static create(t){return new e(t.declaredPlace,t.declaredScope,t.sourceNode,t.membersScope,t.isTypeParameter,t.templateTypes,t.baseList,t.isHandler)}mutate(){return this}get identifierText(){return this.declaredPlace.text}isSystemType(){return this.sourceNode===void 0}isNumberType(){return this.declaredPlace.kind==="Reserved"&&this.declaredPlace.property.isNumber}},V=class e{constructor(t,n,r,i,o,c,l){this.declaredPlace=t;this.declaredScope=n;this.sourceNode=r;this.returnType=i;this.parameterTypes=o;this.isInstanceMember=c;this.accessRestriction=l;this.nextOverloadFunction=void 0}static create(t){return new e(t.declaredPlace,t.declaredScope,t.sourceNode,t.returnType,t.parameterTypes,t.isInstanceMember,t.accessRestriction)}clone(){return{...this}}mutate(){return this}setNextOverload(t){jS(this.nextOverloadFunction===void 0),this.nextOverloadFunction=t}get nextOverload(){return this.nextOverloadFunction}},Pe=class e{constructor(t,n,r,i,o){this.declaredPlace=t;this.declaredScope=n;this.type=r;this.isInstanceMember=i;this.accessRestriction=o}static create(t){return new e(t.declaredPlace,t.declaredScope,t.type,t.isInstanceMember,t.accessRestriction)}};function Om(e){return(e instanceof V||e instanceof Pe)===!1?!1:e.isInstanceMember}var wc=Bt(Zn());var Xo=[];function BS(){Xo.length=0}function WS(e,t){let n=Ne().suppressAnalyzerErrors?wc.DiagnosticSeverity.Warning:wc.DiagnosticSeverity.Error;Xo.push({severity:n,range:e,message:t,source:"AngelScript - Analyzer"})}function zS(){let e=Xo.slice();return Xo.length=0,e}var q={reset:BS,add:WS,flush:zS};var HS=require("node:assert");function Im(e){if(e.linkedNode!==void 0)return e.linkedNode.nodeRange.start.location.path}function Yo(e,t){let n=t.declaredPlace.text,r=e.get(n);if(r===void 0){e.set(n,t);return}if((t instanceof V&&r instanceof V)===!1)return r;let o=r;for(;;){if(o.nextOverload===void 0){o.setNextOverload(t);return}o=o.nextOverload}}function Ce(e,t){let n=Yo(e,t);return n!==void 0&&q.add(t.declaredPlace.location,`Symbol '${t.declaredPlace.text}' is already defined.`),n===void 0}function rr(e,t){if(e===void 0)return t;if(t!==void 0&&!(t.symbolType instanceof V))return t.symbolType.isTypeParameter!==!0?t:e.has(t.symbolType.declaredPlace)?e.get(t.symbolType.declaredPlace):t}function Vr(e,t){return e.reduce((n,r)=>r!==void 0?rr(r,n):n,t)}function Mm(e){return e!==void 0&&e.symbolType instanceof B&&e.symbolType.identifierText==="auto"}function ve(e){if(e===void 0)return"(undefined)";let t="";if(e.isHandler===!0&&(t=`${t}@`),e.symbolType instanceof V){let n=e.symbolType,r=n.returnType,i=n.parameterTypes.map(o=>ve(o)).join(", ");return`${ve(r)}(${i})`+t}return e.templateTranslate!==void 0&&(t=`<${Array.from(e.templateTranslate.values()).map(n=>ve(n)).join(", ")}>${t}`),e.symbolType.declaredPlace.text+t}function ir(e){return e.map(t=>ve(t)).join(", ")}function Lm(e){let t=e.declaredPlace.text;if(e instanceof B)return t;if(e instanceof V)return`${e.returnType===void 0?"":ve(e.returnType)+" "}${t}(${ir(e.parameterTypes)})`;if(e instanceof Pe)return`${ve(e.type)} ${t}`;HS(!1)}function Tt(e,t){return e.symbolMap.get(t)}function qm(e,t){if(e!==void 0)return{symbol:e,scope:t}}function bn(e,t){let n=e.symbolMap.get(t);if(n!==void 0)return{symbol:n,scope:e};if(e.parentScope!==void 0)return bn(e.parentScope,t)}var Fm=require("node:assert"),Oc=class e{constructor(t,n,r,i,o,c,l){this.key=r;this.childScopes=i;this.symbolMap=o;this.referencedList=c;this.completionHints=l;this.parentOrContext=n??{builtinStringType:void 0},this.scopeLinkedNode=t}static create(t){return new e(t.linkedNode,t.parentScope,t.key,new Map,new Map,[],[])}get parentScope(){if(this.parentOrContext instanceof e)return this.parentOrContext}setLinkedNode(t){Fm(this.scopeLinkedNode===void 0),this.scopeLinkedNode=t}get linkedNode(){return this.scopeLinkedNode}commitContext(){Fm(!(this.parentOrContext instanceof e)),this.parentOrContext.builtinStringType=jm(this)}getBuiltinStringType(){return this.parentOrContext instanceof e?this.parentOrContext.getBuiltinStringType():this.parentOrContext.builtinStringType}};function jm(e){for(let[t,n]of e.symbolMap)if(n instanceof B&&VS(n.sourceNode))return n;for(let[t,n]of e.childScopes){let r=jm(n);if(r!==void 0)return r}}function VS(e){return e===void 0||e.nodeName!="Class"?!1:e.metadata.length===1&&e.metadata[0].text==="BuiltinString"?!0:Ne().builtinStringTypes.includes(e.identifier.text)}function Bm(e){let t=[],n=e;for(;n.parentScope!==void 0;)t.push(n.parentScope),n=n.parentScope;return t}function Ic(e,t){let n=e.childScopes.get(t);if(n!==void 0)return n;if(e.parentScope!==void 0)return Ic(e.parentScope,t)}function $r(e,t){if(e.linkedNode!==void 0&&t.includes(e.linkedNode.nodeName))return e;if(e.parentScope!==void 0)return $r(e.parentScope,t)}function Mt(e,t){return e.childScopes.get(t)}function nn(e,t,n){return Oc.create({linkedNode:e,parentScope:t,key:n})}function nt(e,t,n){let r=nn(e,t,n);return t?.childScopes.set(n,r),r}var or=class{get pureScope(){return this.pureBuffer===void 0&&(this.pureBuffer=nn(this.fullScope.linkedNode,this.fullScope.parentScope,this.fullScope.key),Zo(this.fullScope,this.pureBuffer,{targetSrcPath:this.path})),this.pureBuffer}constructor(t,n){this.path=t,this.fullScope=n}};function Zo(e,t,n){for(let[r,i]of e.symbolMap){let o=!0;n.targetSrcPath!==void 0&&i.declaredPlace.location.path!==n.targetSrcPath&&(o=!1),n.excludeSrcPath!==void 0&&i.declaredPlace.location.path===n.excludeSrcPath&&(o=!1),o&&t.symbolMap.set(r,i)}for(let[r,i]of e.childScopes){let o=Im(i);if(o!==void 0&&(n.targetSrcPath!==void 0&&o!==n.targetSrcPath||n.excludeSrcPath!==void 0&&o===n.excludeSrcPath))continue;let c=Wm(i.linkedNode,t,r);Zo(i,c,n)}}function Ur(e,t,n){let r=Wm(e,t,n.text);return e!==void 0&&e!==r.linkedNode&&q.add(n.location,`Symbol ${n.text}' is already defined.`),r}function Wm(e,t,n){let r=t.childScopes.get(n);return r===void 0?nt(e,t,n):(e===void 0||r.linkedNode===void 0&&r.setLinkedNode(e),r)}function Mc(e){return e.parentScope===void 0?e:Mc(e.parentScope)}function zm(e){let t=e.symbol,n=e.scope;return t!==void 0&&t instanceof V&&n.linkedNode!==void 0&&n.linkedNode.nodeName==="Class"&&n.linkedNode.identifier.text===t.declaredPlace.text}function Lc(e,t){return t===e?!0:e.parentScope===void 0?!1:Lc(e.parentScope,t)}var Am=-1;function Sn(){return Am++,`~${Am}`}function Ec(e){return e.startsWith("~")}var $S=require("assert");function vt(e,t,n){return _e(e,t)?!0:(q.add(je(n),`'${ve(e)}' cannot be converted to '${ve(t)}'.`),!1)}function _e(e,t){if(e===void 0||t===void 0)return!0;let n=e;e.templateTranslate!==void 0&&(n=rr(e.templateTranslate,e));let r=t;return t.templateTranslate!==void 0&&(r=rr(t.templateTranslate,t)),n===void 0||r===void 0?!0:US(n,r)}function US(e,t){let n=e.symbolType,r=t.symbolType;if(n instanceof V)return r instanceof B&&r.identifierText==="?"?!0:KS(n,r);if(r instanceof V)return!1;let i=n.sourceNode,o=r.sourceNode;if(r.identifierText==="?"||r.identifierText==="auto")return!0;if(n.isSystemType()){if(GS(n,r))return!0}else{if(n.declaredPlace===r.declaredPlace||i?.nodeName==="Enum"&&r.isNumberType()||qc(n,r))return!0;let l=n.membersScope?.symbolMap.get("opImplConv");if(l!==void 0&&l instanceof V)for(;;){if(_e(l.returnType,t))return!0;if(l.nextOverload===void 0)break;l=l.nextOverload}}if(r.isSystemType()||o?.nodeName!=="Class")return!1;let c=o.identifier.text;return QS(n,t.sourceScope,c)}function KS(e,t){if(!(t instanceof V)||_e(e.returnType,t.returnType)===!1||e.parameterTypes.length!==t.parameterTypes.length)return!1;for(let n=0;n<e.parameterTypes.length;n++)if(_e(e.parameterTypes[n],t.parameterTypes[n])===!1)return!1;return!0}function qc(e,t){let n=e.sourceNode;if(e.isSystemType())return!1;if(e.sourceNode===t.sourceNode)return!0;if(Jo(n)){if(e.baseList===void 0)return!1;for(let r of e.baseList)if(r?.symbolType!==void 0&&r.symbolType instanceof B&&qc(r.symbolType,t))return!0}return!1}function GS(e,t){let n=e.sourceNode,r=t.sourceNode;return e.isTypeParameter?t.isTypeParameter&&Ao(e.declaredPlace,t.declaredPlace):e.identifierText==="void"?!1:e.isNumberType()?t.isNumberType():e.identifierText==="bool"?t.identifierText==="bool":!0}function QS(e,t,n){if(t===void 0)return!1;let r=Mt(t,n);if(r===void 0||r.linkedNode?.nodeName!=="Class")return!1;let i=Tt(r,n);return i===void 0||!(i instanceof V)?!1:e.sourceNode===void 0?!0:Hm(i,e.sourceNode)}function Hm(e,t){if(e.parameterTypes.length===1){let n=e.parameterTypes[0];if(n!==void 0&&n.symbolType instanceof B&&n.symbolType.sourceNode===t)return!0}return e.nextOverload!==void 0?Hm(e.nextOverload,t):!1}function es(e,t){if(t instanceof B||t.accessRestriction===void 0)return!0;let n=t.declaredScope;if(t.accessRestriction==="Private")return Lc(e,n);if(t.accessRestriction==="Protected"){if(n.linkedNode===void 0)return!1;let r=$r(e,["Class","Interface"]);if(r===void 0||r.parentScope===void 0)return!1;let i=Tt(r.parentScope,r.key);if(!(i instanceof B)||n.parentScope===void 0)return!1;let o=Tt(n.parentScope,n.key);return o instanceof B?qc(i,o):!1}else $S(!1)}function Ac(e){return JS(e.callerIdentifier,e.scope,e.calleeFunc),ts(e,e.calleeFunc)}function JS(e,t,n){t.referencedList.push({declaredSymbol:n,referencedToken:e})}function ts(e,t){let{scope:n,callerRange:r,callerArgRanges:i,callerArgTypes:o,calleeFunc:c,templateTranslators:l}=e,b=c.sourceNode.paramList;if(o.length>b.length)return XS(e,t);for(let T=0;T<b.length;T++){if(T>=o.length){let I=b[T];if(I.defaultExpr!==void 0)continue;if(c.nextOverload!==void 0)return ts({...e,calleeFunc:c.nextOverload},t);Fc(r,o,c,t,l)===!1&&q.add(je(r),`Missing argument for parameter '${bc(I.type)}'.`);break}let x=o[T],w=c.parameterTypes[T];if(x=Vr(l,x),w=Vr(l,w),!_e(x,w)){if(c.nextOverload!==void 0)return ts({...e,calleeFunc:c.nextOverload},t);Fc(r,o,c,t,l)===!1&&q.add(je(r),`Cannot convert '${ve(x)}' to parameter type '${ve(w)}'.`)}}return Vr(l,c.returnType)}function XS(e,t){let{scope:n,callerRange:r,callerArgRanges:i,callerArgTypes:o,calleeFunc:c,templateTranslators:l}=e;return c.nextOverload!==void 0?ts({...e,calleeFunc:c.nextOverload},t):(Fc(r,o,c,t,l)===!1&&q.add(je(r),`Function has ${c.sourceNode.paramList.length} parameters, but ${o.length} were provided.`),c.returnType)}function Fc(e,t,n,r,i){if(n===r)return!1;let o="No viable function.";o+=`
Arguments types: (${ir(t)})`,o+=`
Candidates considered:`;let c=r;for(;c!==void 0;){let l=c.parameterTypes.map(b=>Vr(i,b));o+=`
(${ir(l)})`,c=c.nextOverload}return q.add(je(e),o),!0}var Z=class e{constructor(t,n,r){this.symbolType=t;this.isHandler=n;this.templateTranslate=r}static create(t){return new e(t.symbolType,t.isHandler,t.templateTranslate)}get sourceScope(){return this.symbolType.declaredScope}};var YS=require("node:assert");function Kr(e){return B.create({declaredPlace:e,declaredScope:nn(void 0,void 0,""),sourceNode:void 0,membersScope:void 0})}var ns=(()=>{let e=new Map;for(let t of lc)e.set(t,Kr(Te("Reserved",t)));return e})(),ZS=ns.get("int"),Lt=new Z(ZS),eT=ns.get("float"),Vm=new Z(eT),tT=ns.get("double"),$m=new Z(tT);function nT(e){let t=ns.get(e);if(t!==void 0)return t;YS(!1)}var pt=Kr(Te("Reserved","bool")),Um=new Z(pt),rT=Kr(Te("Reserved","void")),iT=Kr(Te("Reserved","?")),oT=Kr(Te("Reserved","auto"));function rs(e){if(e.kind!=="Reserved")return;let t=e.text;if(t==="bool")return pt;if(t==="void")return rT;if(t==="?")return iT;if(t==="auto")return oT;if(e.kind==="Reserved"&&e.property.isNumber)return nT(t)}var Km=Te("Identifier","this"),Gm=Te("Identifier","value");function sr(e,t,n){e?.completionHints.push({complementKind:"Scope",complementLocation:je(n),targetScope:t})}var ar=require("node:assert");function Xm(e,t){if(t.head===Ot){qt(e,t.statBlock);return}sT(e,t.paramList),qt(e,t.statBlock)}function Ym(e,t,n){let r=rt(e,t.type);for(let i of t.variables){let o=i.initializer;if(o===void 0)continue;let c=zc(e,r,i.identifier,o);c!==void 0&&Mm(r)&&(r=c)}Wc(e,r,t,n)}function Wc(e,t,n,r){for(let i of n.variables){let o=Pe.create({declaredPlace:i.identifier,declaredScope:e,type:t,isInstanceMember:r,accessRestriction:n.accessor});Ce(e.symbolMap,o)}}function zc(e,t,n,r){if(r.nodeName==="InitList")return Zm(e,r);if(r.nodeName==="Assign"){let i=Fe(e,r);return vt(i,t,r.nodeRange),i}else if(r.nodeName==="ArgList")return t===void 0||t.symbolType instanceof V?void 0:eh(e,n,r,t)}function qt(e,t){sr(e.parentScope,e,t.nodeRange);for(let n of t.statementList)n.nodeName==="Var"?Ym(e,n,!1):Tn(e,n)}function sT(e,t){for(let n of t)n.defaultExpr!==void 0&&Vc(e,n.defaultExpr)}function rt(e,t){let n=t.isArray?void 0:aT(e,t);if(n!==void 0)return n;let r=t.dataType.identifier,i=t.scope!==void 0?Hc(e,t.scope)??e:e,o=t.typeTemplates,c=r.text;if(t.isArray){c=Ne().builtinArrayType;let x={...t};x.isArray=!1,o=[x]}let l=bn(i,c);if(l!==void 0&&zm(l)&&l.scope.parentScope!==void 0&&(l=qm(Tt(l.scope.parentScope,c),l.scope.parentScope)),l===void 0){q.add(r.location,`'${c}' is not defined.`);return}let{symbol:b,scope:T}=l;if(b instanceof V&&b.sourceNode.nodeName==="FuncDef")return Qm(e,r,b,T,!0);if(b instanceof B){let x=cT(e,o,b.templateTypes);return Qm(e,r,b,T,void 0,x)}else{q.add(r.location,`'${c}' is not a type.`);return}}function Qm(e,t,n,r,i,o){return e.referencedList.push({declaredSymbol:n,referencedToken:t}),Z.create({symbolType:n,isHandler:i,templateTranslate:o})}function aT(e,t){let n=t.dataType.identifier;if(n.kind!=="Reserved")return;t.scope!==void 0&&q.add(n.location,"Invalid scope.");let r=rs(n);if(r!==void 0)return new Z(r)}function cT(e,t,n){if(n===void 0)return;let r=new Map;for(let i=0;i<t.length;i++){if(i>=n.length){q.add(je(t[t.length-1].nodeRange),"Too many template types.");break}let o=t[i];r.set(n[i],rt(e,o))}return r}function Zm(e,t){for(let n of t.initList)n.nodeName==="Assign"?Fe(e,n):n.nodeName==="InitList"&&Zm(e,n)}function Hc(e,t){let n=e;t.isGlobal&&(n=Mc(e));for(let r=0;r<t.scopeList.length;r++){let i=t.scopeList[r],o;for(;o=Mt(n,i.text),o?.linkedNode?.nodeName==="Func"&&(o=void 0),o===void 0;)if(r==0&&n.parentScope!==void 0)n=n.parentScope;else{q.add(i.location,`Undefined scope: ${i.text}`);return}n=o;let c={...i.location};c.end=qr(qr(i)).location.start,e.completionHints.push({complementKind:"Namespace",complementLocation:c,namespaceList:t.scopeList.slice(0,r+1)})}return n}function Tn(e,t){switch(t.nodeName){case"If":pT(e,t);break;case"For":{let n=nt(t,e,Sn());dT(n,t);break}case"While":{let n=nt(t,e,Sn());lT(n,t);break}case"Return":hT(e,t);break;case"StatBlock":{let n=nt(t,e,Sn());qt(n,t);break}case"Break":break;case"Continue":break;case"DoWhile":{let n=nt(t,e,Sn());fT(n,t);break}case"Switch":uT(e,t);break;case"ExprStat":jc(e,t);break;case"Try":{let n=nt(t,e,Sn());mT(n,t);break}default:break}}function uT(e,t){Fe(e,t.assign);for(let n of t.caseList)gT(e,n)}function dT(e,t){t.initial.nodeName==="Var"?Ym(e,t.initial,!1):jc(e,t.initial),t.condition!==void 0&&jc(e,t.condition);for(let n of t.incrementList)Fe(e,n);t.statement!==void 0&&Tn(e,t.statement)}function lT(e,t){let n=Fe(e,t.assign);vt(n,new Z(pt),t.assign.nodeRange),t.statement!==void 0&&Tn(e,t.statement)}function fT(e,t){if(Tn(e,t.statement),t.assign===void 0)return;let n=Fe(e,t.assign);vt(n,new Z(pt),t.assign.nodeRange)}function pT(e,t){let n=Fe(e,t.condition);vt(n,new Z(pt),t.condition.nodeRange),t.thenStat!==void 0&&Tn(e,t.thenStat),t.elseStat!==void 0&&Tn(e,t.elseStat)}function jc(e,t){if(t.assign===void 0)return;let n=Fe(e,t.assign);n?.isHandler!==!0&&n?.symbolType instanceof V&&q.add(je(t.assign.nodeRange),"Function call without handler.")}function mT(e,t){qt(e,t.tryBlock),t.catchBlock!==void 0&&qt(e,t.catchBlock)}function hT(e,t){let n=t.assign!==void 0?Fe(e,t.assign):void 0,r=$r(e,["Func","VirtualProp","Lambda"]);if(!(r===void 0||r.linkedNode===void 0)){if(r.linkedNode.nodeName==="Func"){let i=r.parentScope?.symbolMap.get(r.key);if(i===void 0||!(i instanceof V))return;for(;i.nextOverload!==void 0&&i.sourceNode!==r.linkedNode;)i=i.nextOverload;let o=i.returnType?.symbolType;if(o instanceof B&&o?.identifierText==="void"){if(t.assign===void 0)return;q.add(je(t.nodeRange),"Function does not return a value.")}else vt(n,i.returnType,t.nodeRange)}else if(r.linkedNode.nodeName==="VirtualProp"){let i=r.key;if(i.startsWith("get_")===!1){if(t.assign===void 0)return;q.add(je(t.nodeRange),"Property setter does not return a value.");return}let c=i.substring(4,i.length),l=r.parentScope?.symbolMap.get(c);if(l===void 0||!(l instanceof Pe))return;vt(n,l.type,t.nodeRange)}}}function gT(e,t){t.expr!==void 0&&Vc(e,t.expr);for(let n of t.statementList)Tn(e,n)}function Vc(e,t){function n(b){return"text"in b}function r(b){return n(b)?yT(b):1}let i=[];for(let b=t;i.push([bT(e,b.head),b.head.nodeRange]),b.tail!==void 0;)i.push(b.tail.operator),b=b.tail.expression;let o=[],c=[];for(;i.length>0||o.length>0;)o.length===0||i.length>0&&r(i[0])>r(o[o.length-1])?o.push(i.shift()):c.push(o.pop());let l=[];for(;c.length>0;){let b=c.shift();if(n(b)){let T=l.pop(),x=l.pop();if(x===void 0||T===void 0)return;l.push([OT(e,b,x[0],T[0],x[1],T[1]),{start:x[1].start,end:T[1].end}])}else l.push(b)}return l.length>0?l[0][0]:void 0}function yT(e){switch(e.text){case"**":return 0;case"*":case"/":case"%":return-1;case"+":case"-":return-2;case"<<":case">>":case">>>":return-3;case"&":return-4;case"^":return-5;case"|":return-6;case"<":case">":case"<=":case">=":return-7;case"==":case"!=":case"xor":case"^^":case"is":case"!is":return-8;case"and":case"&&":return-9;case"or":case"||":return-10;default:ar(!1)}}function bT(e,t){if(t.exprTerm!==1){if(t.exprTerm===2)return ST(e,t)}}function ST(e,t){let n=TT(e,t.value);for(let r of t.postOps){if(n===void 0)break;n=xT(e,r,n,t.nodeRange)}return n}function TT(e,t){switch(t.nodeName){case"ConstructCall":break;case"FuncCall":return CT(e,t);case"VarAccess":return wT(e,t);case"Cast":return RT(e,t);case"Literal":return DT(e,t);case"Assign":return Fe(e,t);case"Lambda":return kT(e,t);default:break}}function eh(e,t,n,r){let i=$c(r);return i===void 0||!(i instanceof V)?vT(e,t,n,r):(Gr(e,t,n,i,r.templateTranslate),r)}function $c(e){if(e?.sourceScope===void 0)return;let t=e.symbolType.declaredPlace.text,n=Mt(e.sourceScope,t);return n!==void 0?Tt(n,t):void 0}function vT(e,t,n,r){let i=r.symbolType.declaredPlace.text;if(r.sourceScope!==void 0){if(r.symbolType instanceof B&&Em(r.symbolType.sourceNode)==="Enum"){let o=n.argList;return(o.length!=1||_e(Fe(e,o[0].assign),Lt)===!1)&&q.add(t.location,`Enum constructor '${i}' requires an integer.`),e.referencedList.push({declaredSymbol:r.symbolType,referencedToken:t}),r}if(n.argList.length===0)return e.referencedList.push({declaredSymbol:r.symbolType,referencedToken:t}),r;q.add(t.location,`Constructor '${i}' is missing.`)}}function xT(e,t,n,r){if(t.postOp===1)return NT(e,t,n);if(t.postOp===2)return PT(e,t,n,r)}function NT(e,t,n){if(!(n.symbolType instanceof B)){q.add(je(t.nodeRange),"Invalid access to type.");return}let r=en(t.nodeRange.start,qr(t.nodeRange.start));e.completionHints.push({complementKind:"Type",complementLocation:r,targetType:n.symbolType});let i=t.member,o=dm(i),c=o?i.identifier:i;if(c===void 0)return;if(Jo(n.symbolType.sourceNode)===!1){q.add(c.location,`'${c.text}' is not a member.`);return}let l=n.symbolType.membersScope;if(l!==void 0)if(o){let b=Tt(l,c.text);if(b===void 0){q.add(c.location,`'${c.text}' is not defined.`);return}if(!(b instanceof V)){q.add(c.location,`'${c.text}' is not a method.`);return}return Gr(e,c,i.argList,b,n.templateTranslate)}else return th(e,l,c)}function PT(e,t,n,r){let i=t.indexerList.map(o=>Fe(e,o.assign));return vn(e,t.nodeRange.end,n,i,r,t.nodeRange,"opIndex")}function RT(e,t){let n=rt(e,t.type);return Fe(e,t.assign),n}function kT(e,t){let n=nt(t,e,Sn());for(let r of t.paramList){if(r.identifier===void 0)continue;let i=Pe.create({declaredPlace:r.identifier,declaredScope:e,type:r.type!==void 0?rt(e,r.type):void 0,isInstanceMember:!1,accessRestriction:void 0});Ce(n.symbolMap,i)}t.statBlock!==void 0&&qt(n,t.statBlock)}function DT(e,t){let n=t.value;if(n.kind==="Number")switch(n.numeric){case"Integer":return Lt;case"Float":return Vm;case"Double":return $m}if(n.kind==="String"){let r=e.getBuiltinStringType();return r===void 0?void 0:new Z(r)}if(n.text==="true"||n.text==="false")return Um}function CT(e,t){let n=e;if(t.scope!==void 0){let c=Hc(e,t.scope);if(c===void 0)return;n=c}let r=bn(n,t.identifier.text);if(r?.symbol===void 0){q.add(t.identifier.location,`'${t.identifier.text}' is not defined.`);return}let[i,o]=[r.symbol,r.scope];if(i instanceof B){let c=new Z(i);return eh(e,t.identifier,t.argList,c)}if(i instanceof Pe&&i.type?.symbolType instanceof V)return Gr(e,t.identifier,t.argList,i.type.symbolType,void 0);if(i instanceof Pe)return _T(e,t,i);if(!(i instanceof V)){q.add(t.identifier.location,`'${t.identifier.text}' is not a function.`);return}return Gr(e,t.identifier,t.argList,i,void 0)}function _T(e,t,n){let r=n.type;if(r===void 0||r.sourceScope===void 0){q.add(t.identifier.location,`'${t.identifier.text}' is not callable.`);return}let i=Mt(r.sourceScope,r.symbolType.declaredPlace.text);if(i===void 0)return;let o=Tt(i,"opCall");if(o===void 0||!(o instanceof V)){q.add(t.identifier.location,`'opCall' is not defined in type '${r.symbolType.declaredPlace.text}'.`);return}return Gr(e,t.identifier,t.argList,o,r.templateTranslate)}function Gr(e,t,n,r,i){let o=ET(e,n);if(r.sourceNode.nodeName==="FuncDef"){let l=new Z(r);if(o.length===1&&_e(o[0],l))return o[0]}let c=en(n.nodeRange.start,qr(n.nodeRange.end));return e.completionHints.push({complementKind:"Arguments",complementLocation:c,expectedCallee:r,passingRanges:n.argList.map(l=>l.assign.nodeRange),templateTranslate:i}),Ac({scope:e,callerIdentifier:t,callerRange:n.nodeRange,callerArgRanges:n.argList.map(l=>l.assign.nodeRange),callerArgTypes:o,calleeFunc:r,templateTranslators:[i]})}function wT(e,t){let n=e;if(t.scope!==void 0){let i=Hc(e,t.scope);if(i===void 0)return;n=i}if(t.identifier===void 0)return;let r=t.identifier;return th(e,n,r)}function th(e,t,n){let r=bn(t,n.text);if(r===void 0){q.add(n.location,`'${n.text}' is not defined.`);return}if(r.symbol instanceof B){q.add(n.location,`'${n.text}' is type.`);return}if(es(e,r.symbol)===!1){q.add(n.location,`'${n.text}' is not public member.`);return}return r.symbol.declaredPlace.location.path!==""&&e.referencedList.push({declaredSymbol:r.symbol,referencedToken:n}),r.symbol instanceof Pe?r.symbol.type:new Z(r.symbol)}function ET(e,t){let n=[];for(let r of t.argList)n.push(Fe(e,r.assign));return n}function Fe(e,t){let n=t,r=Jm(e,t.condition);for(;n.tail!==void 0;){let i=Jm(e,n.tail.assign.condition);r=BT(e,n.tail.operator,r,i,n.condition.nodeRange,n.tail.assign.condition.nodeRange),n=n.tail.assign}return r}function Jm(e,t){let n=Vc(e,t.expr);if(t.ternary===void 0)return n;vt(n,new Z(pt),t.expr.nodeRange);let r=Fe(e,t.ternary.trueAssign),i=Fe(e,t.ternary.falseAssign);if(r===void 0&&i!==void 0)return i;if(r!==void 0&&i===void 0)return r;if(!(r===void 0||i===void 0)){if(_e(r,i))return i;if(_e(i,r))return r;q.add(en(t.ternary.trueAssign.nodeRange.start,t.ternary.falseAssign.nodeRange.end),`Type mismatches between '${ve(r)}' and '${ve(i)}'.`)}}function OT(e,t,n,r,i,o){if(t.kind==="Reserved"&&!(n===void 0||r===void 0)){if(t.property.isMathOp)return LT(e,t,n,r,i,o);if(t.property.isCompOp)return FT(e,t,n,r,i,o);if(t.property.isLogicOp)return jT(e,t,n,r,i,o);if(t.property.isBitOp)return IT(e,t,n,r,i,o);ar(!1)}}function vn(e,t,n,r,i,o,c){let l=Array.isArray(r)?r:[r];if(!(n.symbolType instanceof B)){q.add(t.location,`Invalid operation '${c}' between '${ve(n)}' and '${ir(l)}'.`);return}if(n.symbolType.isSystemType()){q.add(t.location,`Operator '${c}' of '${ve(n)}' is not defined.`);return}if(n.sourceScope===void 0)return;let b=n.symbolType.membersScope;if(b===void 0)return;let T=Tt(b,c);if(T===void 0||!(T instanceof V)){q.add(t.location,`Operator '${c}' of '${ve(n)}' is not defined.`);return}return Ac({scope:e,callerIdentifier:t,callerRange:{start:t,end:t},callerArgRanges:[o],callerArgTypes:l,calleeFunc:T,templateTranslators:[n.templateTranslate,...l.map(x=>x?.templateTranslate)]})}function IT(e,t,n,r,i,o){if(n.symbolType instanceof B&&r.symbolType instanceof B&&_e(n,Lt)&&_e(r,Lt))return Lt;let c=MT.get(t.text);return ar(c!==void 0),n.symbolType instanceof B&&n.symbolType.isSystemType()?vn(e,t,r,n,o,i,c[1]):vn(e,t,n,r,i,o,c[0])}var MT=new Map([["&",["opAnd","opAnd_r"]],["|",["opOr","opOr_r"]],["^",["opXor","opXor_r"]],["<<",["opShl","opShl_r"]],[">>",["opShr","opShr_r"]],[">>>",["opShrU","opShrU_r"]]]);function LT(e,t,n,r,i,o){if(n.symbolType instanceof B&&r.symbolType instanceof B&&_e(n,Lt)&&_e(r,Lt))return Lt;let c=qT.get(t.text);return ar(c!==void 0),n.symbolType instanceof B&&n.symbolType.isSystemType()?vn(e,t,r,n,o,i,c[1]):vn(e,t,n,r,i,o,c[0])}var qT=new Map([["+",["opAdd","opAdd_r"]],["-",["opSub","opSub_r"]],["*",["opMul","opMul_r"]],["/",["opDiv","opDiv_r"]],["%",["opMod","opMod_r"]],["**",["opPow","opPow_r"]]]);function FT(e,t,n,r,i,o){if(n.symbolType instanceof B&&r.symbolType instanceof B&&(_e(n,r)||_e(r,n)))return new Z(pt);let c=AT.get(t.text);return ar(c!==void 0),vn(e,t,n,r,i,o,c)}var AT=new Map([["==","opEquals"],["!=","opEquals"],["<","opCmp"],["<=","opCmp"],[">","opCmp"],[">=","opCmp"],["is","opEquals"],["!is","opEquals"]]);function jT(e,t,n,r,i,o){return vt(n,new Z(pt),i),vt(r,new Z(pt),o),new Z(pt)}function BT(e,t,n,r,i,o){if(n===void 0||r===void 0)return;if(n.symbolType instanceof B&&r.symbolType instanceof B&&n.symbolType.isNumberType()&&r.symbolType.isNumberType()||t.text==="="&&_e(r,n))return n;let c=WT.get(t.text);return ar(c!==void 0),vn(e,t,n,r,i,o,c)}var WT=new Map([["=","opAssign"],["+=","opAddAssign"],["-=","opSubAssign"],["*=","opMulAssign"],["/=","opDivAssign"],["%=","opModAssign"],["**=","opPowAssign"],["&=","opAndAssign"],["|=","opOrAssign"],["^=","opXorAssign"],["<<=","opShlAssign"],[">>=","opShrAssign"],[">>>=","opUShrAssign"]]);function Uc(e,t){let{globalScope:n,analyzeQueue:r}=t;for(n.commitContext();r.length>0;){let i=r.shift();i!==void 0&&i()}return new or(e,n)}var Qr=Bt(require("url")),Jc=require("url"),Xc=Bt(require("node:path")),cr=Bt(require("fs")),Zc=require("node:url");function nh(e){let t=e.filter(r=>r.kind!=="Comment").map(r=>({...r,index:-1,next:void 0})),n=zT(t);for(let r=t.length-1;r>=1;r--)(t[r].kind==="String"&&t[r-1].kind==="String")!==!1&&(t[r-1]=$T(t,r),t.splice(r,1));for(let r=0;r<t.length;r++)t[r].index=r,t[r].next=r!=t.length-1?t[r+1]:void 0;return{parsingTokens:t,includeFiles:n}}function zT(e){let t=[],n=[];for(let r=0;r<e.length;r++){if(e[r].text!=="#")continue;let i=VT(e,r);HT(i,t),n.push([r,i.length])}for(let r=n.length-1;r>=0;r--)e.splice(n[r][0],n[r][1]);return t}function HT(e,t){if(e[0].highlight.token=25,e[1]?.text==="include"){e[1].highlight.token=25;let n=e[2];if(n===void 0){Ee.addError(e[1].location,"Expected file name for include directive.");return}if(n.kind!=="String"){Ee.addError(e[2].location,"Expected string literal for include directive.");return}t.push(n)}else e[1]!=null&&(e[1].highlight.token=17)}function VT(e,t){let n=t;for(let r=t;r<e.length-1&&em(e[r].location.end,e[r+1].location.start)!==!1;r++)n=r+1;return e.slice(t,n+1)}function $T(e,t){let n=Te("String",e[t].text+e[t+1].text);return n.location={path:e[t].location.path,start:e[t].location.start,end:e[t+1].location.end},n}function ih(e,t,n,r){for(let i of t){let o=i.nodeName;o==="Enum"?KT(e,i):o==="TypeDef"?JT(e,i):o==="Class"?oh(e,i,n,r):o==="Mixin"?ZT(e,i,n,r):o==="Interface"?XT(e,i,n,r):o==="FuncDef"?dh(e,i,n,r):o==="VirtualProp"?Kc(e,i,n,r,!1):o==="Var"?uh(e,i,n,!1):o==="Func"?ch(e,i,n,r,!1):o==="Namespace"&&UT(e,i,n)}}function UT(e,t,n){if(t.namespaceList.length===0)return;let r=e;for(let i=0;i<t.namespaceList.length;i++){let o=t.namespaceList[i];r=Ur(void 0,r,o)}ih(r,t.script,n,n),sr(e,r,t.nodeRange)}function KT(e,t){let n=B.create({declaredPlace:t.identifier,declaredScope:e,sourceNode:t,membersScope:void 0});if(Ce(e.symbolMap,n)===!1)return;let r=Ur(t,e,t.identifier);n.mutate().membersScope=r,rh(r,t.memberList,new Z(n)),Ne().hoistEnumParentScope&&rh(e,t.memberList,new Z(n))}function rh(e,t,n){for(let r of t){let i=Pe.create({declaredPlace:r.identifier,declaredScope:e,type:n,isInstanceMember:!1,accessRestriction:void 0});Ce(e.symbolMap,i)}}function oh(e,t,n,r){let i=B.create({declaredPlace:t.identifier,declaredScope:e,sourceNode:t,membersScope:void 0});if(Ce(e.symbolMap,i)===!1)return;let o=Ur(t,e,t.identifier);i.mutate().membersScope=o;let c=Pe.create({declaredPlace:Km,declaredScope:e,type:new Z(i),isInstanceMember:!1,accessRestriction:"Private"});Ce(o.symbolMap,c);let l=GT(o,t.typeTemplates);l.length>0&&(i.mutate().templateTypes=l),i.mutate().baseList=sh(o,t),r.push(()=>{QT(o,t,n,r),r.push(()=>{if(i.baseList===void 0)return;ah(o,i.baseList);let b=i.baseList.length>=1?i.baseList[0]:void 0,T=$c(b);if(T instanceof V){let x=T.clone(),w=Te("Identifier","super");w.location={...x.declaredPlace.location},x.mutate().declaredPlace=w,Ce(o.symbolMap,x)}})}),sr(e,o,t.nodeRange)}function GT(e,t){let n=[];for(let r of t??[])Ce(e.symbolMap,B.create({declaredPlace:Sc(r),declaredScope:e,sourceNode:void 0,membersScope:void 0,isTypeParameter:!0})),n.push(Sc(r));return n}function sh(e,t){if(t.baseList.length===0)return;let n=[];for(let r of t.baseList){let i=bn(e,r.text);i===void 0?(q.add(r.location,`'${r.text}' is not defined type`),n.push(void 0)):i.symbol instanceof B?(n.push(new Z(i.symbol)),e.referencedList.push({declaredSymbol:i.symbol,referencedToken:r})):(q.add(r.location,`'${r.text}' is not class or interface`),n.push(void 0))}return n}function ah(e,t){for(let n of t){if(n===void 0||n.symbolType instanceof V)continue;let r=n.symbolType.membersScope;if(r!==void 0)for(let[i,o]of r.symbolMap){if(i==="this")continue;let c=Yo(e.symbolMap,o);c!==void 0&&q.add(c.declaredPlace.location,`Duplicated symbol '${i}'`)}}}function QT(e,t,n,r){for(let i of t.memberList)i.nodeName==="VirtualProp"?Kc(e,i,n,r,!0):i.nodeName==="Func"?ch(e,i,n,r,!0):i.nodeName==="Var"?uh(e,i,n,!0):i.nodeName==="FuncDef"&&dh(e,i,n,r)}function JT(e,t){let n=rs(t.type);if(n===void 0)return;let r=B.create({declaredPlace:t.identifier,declaredScope:e,sourceNode:n.sourceNode,membersScope:void 0});Ce(e.symbolMap,r)}function ch(e,t,n,r,i){if(t.head===Ot)return;let o=tr(t.head)?rt(e,t.head.returnType):void 0,c=V.create({declaredPlace:t.identifier,declaredScope:e,returnType:o,parameterTypes:[],sourceNode:t,isInstanceMember:i,accessRestriction:t.accessor});if(Ce(e.symbolMap,c)===!1)return;if(t.identifier.text.startsWith("get_")||t.identifier.text.startsWith("set_")){if(t.funcAttr?.isProperty===!0||Ne().explicitPropertyAccessor===!1){let b=Te("Identifier",t.identifier.text.substring(4));b.location=t.identifier.location;let T=Pe.create({declaredPlace:b,declaredScope:e,type:o,isInstanceMember:i,accessRestriction:t.accessor});Yo(e.symbolMap,T)}}else t.funcAttr?.isProperty===!0&&q.add(t.identifier.location,'Property accessor must start with "get_" or "set_"');let l=nt(t,e,t.identifier.text);r.push(()=>{c.mutate().parameterTypes=tv(l,t.paramList)}),n.push(()=>{Xm(l,t)})}function XT(e,t,n,r){let i=B.create({declaredPlace:t.identifier,declaredScope:e,sourceNode:t,membersScope:void 0});if(Ce(e.symbolMap,i)===!1)return;let o=Ur(t,e,t.identifier);i.mutate().membersScope=o;let c=sh(o,t);c!==void 0&&(i.mutate().baseList=c),r.push(()=>{YT(o,t,n,r),c!==void 0&&ah(o,c)}),sr(e,o,t.nodeRange)}function YT(e,t,n,r){for(let i of t.memberList)i.nodeName==="VirtualProp"?Kc(e,i,n,r,!0):i.nodeName==="IntfMethod"&&ev(e,i)}function uh(e,t,n,r){let i=rt(e,t.type);n.push(()=>{for(let o of t.variables){let c=o.initializer;c!==void 0&&zc(e,i,o.identifier,c)}}),Wc(e,i,t,r)}function dh(e,t,n,r){let i=V.create({declaredPlace:t.identifier,declaredScope:e,returnType:rt(e,t.returnType),parameterTypes:[],sourceNode:t,isInstanceMember:!1,accessRestriction:void 0});Ce(e.symbolMap,i)!==!1&&r.push(()=>{i.mutate().parameterTypes=t.paramList.map(o=>rt(e,o.type))})}function Kc(e,t,n,r,i){let o=rt(e,t.type),c=t.identifier,l=Pe.create({declaredPlace:c,declaredScope:e,type:o,isInstanceMember:i,accessRestriction:t.accessor});Ce(e.symbolMap,l);let b=t.getter;if(b!==void 0&&b.statBlock!==void 0){let x=nt(t,e,`get_${c.text}`),w=b.statBlock;n.push(()=>{qt(x,w)})}let T=t.setter;if(T!==void 0&&T.statBlock!==void 0){let x=nt(t,e,`set_${c.text}`);if(o!==void 0){let I=Pe.create({declaredPlace:Gm,declaredScope:e,type:new Z(o.symbolType),isInstanceMember:!1,accessRestriction:t.accessor});Ce(x.symbolMap,I)}let w=T.statBlock;n.push(()=>{qt(x,w)})}}function ZT(e,t,n,r){oh(e,t.mixinClass,n,r)}function ev(e,t){let n=V.create({declaredPlace:t.identifier,declaredScope:e,returnType:rt(e,t.returnType),parameterTypes:[],sourceNode:t,isInstanceMember:!0,accessRestriction:void 0});Ce(e.symbolMap,n)}function tv(e,t){let n=[];for(let r of t){let i=rt(e,r.type);i===void 0?n.push(void 0):n.push(i),r.identifier!==void 0&&Ce(e.symbolMap,Pe.create({declaredPlace:r.identifier,declaredScope:e,type:i,isInstanceMember:!1,accessRestriction:void 0}))}return n}function Gc(e,t,n){let r=nn(void 0,void 0,"");for(let c of n)Zo(c.pureScope,r,{excludeSrcPath:t});let i=[],o=[];for(ih(r,e,i,o);o.length>0;){let c=o.shift();c!==void 0&&c()}return{globalScope:r,analyzeQueue:i}}var Oe={},Qc=0;function fh(){if(Qc++,Qc>10){Qc=0,Zt.message("\u{1F9F9} Clean inspected results");for(let e in Oe)delete Oe[e]}}function ph(){return{content:"",diagnosticsInParser:[],diagnosticsInAnalyzer:[],tokenizedTokens:[],parsedAst:[],analyzedScope:new or("",nn(void 0,void 0,"")),includedScopes:[]}}var Yc="as.predefined";function xt(e){let t=Oe[e];return t===void 0?ph():t}function mh(){return Object.values(Oe)}function is(e,t){let n=nv(t);Oe[t]=tu(e,t,n),iv(t)}function hh(){for(let e of Object.keys(Oe))is(Oe[e].content,e)}function nv(e){let t=rv(e);for(let n of t){let r=n+`/${Yc}`;if(Oe[r]!==void 0)return r}for(let n of t){let r=n+`/${Yc}`,i=eu(r);if(i!==void 0)return Oe[r]=tu(i,r,void 0),r!==void 0&&gh(os(r,".")),r}}function gh(e){let t=cr.readdirSync((0,Zc.fileURLToPath)(e),{withFileTypes:!0});for(let n of t){let r=os(e,n.name);if(n.isDirectory())gh(r);else if(n.isFile()&&r.endsWith(".as")){let i=eu(r);i!==void 0&&is(i,r)}}}function eu(e){try{let t=(0,Zc.fileURLToPath)(e);return cr.existsSync(t)===!1?void 0:cr.readFileSync(t,"utf8")}catch{return}}function rv(e){let t=Qr.parse(e),n=t.pathname;if(n===null)return[];let r=[],i=n;for(;i!==Xc.dirname(i);)i=Xc.dirname(i),r.push(Qr.format({protocol:t.protocol,slashes:!0,hostname:t.hostname,pathname:i}));return r}function tu(e,t,n){Zt.message(`\u{1F52C} Inspect "${t}"`),Ee.beginSession();let r=new Bo("Inspector"),i=um(e,t);r.stamp("Tokenizer");let o=nh(i);r.stamp("Preprocess");let c=wm(o.parsingTokens);r.stamp("Parser");let l=o.includeFiles.map(lh);Ne().implicitMutualInclusion&&t.endsWith(Yc)===!1&&n!==void 0&&(l=cv(os(n,".")).filter(ue=>ue.endsWith(".as")&&ue!==t));let T=uv(t,n,l,ue=>av(ue,o.includeFiles.find(le=>lh(le)===ue))),x=Ee.endSession();q.reset();let w=Gc(c,t,T),I=Uc(t,w);r.stamp("Analyzer");let ie=q.flush();return{content:e,diagnosticsInParser:x,diagnosticsInAnalyzer:ie,tokenizedTokens:i,parsedAst:c,analyzedScope:I,includedScopes:T}}function lh(e){return e.text.substring(1,e.text.length-1)}function iv(e){let t=Object.values(Oe).filter(n=>ov(n.includedScopes,e));for(let n of t){Ee.beginSession(),n.includedScopes=sv(n.includedScopes);let r=Gc(n.parsedAst,n.analyzedScope.path,n.includedScopes);n.analyzedScope=Uc(n.analyzedScope.path,r),n.diagnosticsInAnalyzer=Ee.endSession()}}function ov(e,t){for(let n of e)if(n.path===t)return!0;return!1}function sv(e){return e.map(t=>Oe[t.path].analyzedScope)}function av(e,t){Ee.addError(t.location,`File not found: "${e}"`)}function os(e,t){let n=new Jc.URL(e);return Qr.format(new Jc.URL(t,n))}function cv(e){return Object.keys(Oe).filter(t=>t.startsWith(e))}function uv(e,t,n,r){let i=[];if(e!==t&&t!==void 0){let o=Oe[t];o!==void 0&&i.push(o.analyzedScope)}for(let o of n){let c=os(e,o);if(Oe[c]===void 0){let b=eu(c);if(b===void 0){r&&r(o);continue}Oe[c]=ph(),Oe[c]=tu(b,c,t)}let l=Oe[c];l!==void 0&&i.push(l.analyzedScope)}return i}var xn=Bt(Zn());function Jr(e,t,n){for(let r of e.completionHints){if(r.complementKind!=="Scope")continue;let i=r.complementLocation;if(i.path===n&&Et(t,i)){let o=Jr(r.targetScope,t,n);if(o!==void 0)return o}}return e}function yh(e,t,n){let r=[],i=Jr(e,t,n),o=lv(i,t);if(o!==void 0)return o;for(let c of[...Bm(i),i])r.push(...bh(c));return r}function bh(e){let t=[];for(let[n,r]of e.symbolMap)t.push({label:n,kind:Sh(r)});for(let[n,r]of e.childScopes)r.linkedNode===void 0&&(Ec(n)||t.push({label:n,kind:xn.CompletionItemKind.Module}));return t}function dv(e,t){let n=[];for(let[r,i]of t.symbolMap)Om(i)!==!1&&es(e,i)!==!1&&n.push({label:r,kind:Sh(i)});return n}function lv(e,t){if(e.completionHints.length!==0)for(let n of e.completionHints){let r=n.complementLocation;if(Et(t,r))return fv(e,n)}}function fv(e,t){if(t.complementKind==="Type"){if(t.targetType.membersScope===void 0)return[];let n=Mt(t.targetType.declaredScope,t.targetType.declaredPlace.text);return n===void 0?[]:dv(e,n)}else if(t.complementKind==="Namespace"){let n=t.namespaceList;if(n.length===0)return[];let r=Ic(e,n[0].text);if(r===void 0)return[];for(let i=1;i<n.length;i++)if(r=Mt(r,n[i].text),r===void 0)return[];return bh(r)}}function Sh(e){return e instanceof B?e.isSystemType()||e.sourceNode===void 0?xn.CompletionItemKind.Keyword:e.sourceNode.nodeName==="Enum"?xn.CompletionItemKind.Enum:xn.CompletionItemKind.Class:e instanceof V?xn.CompletionItemKind.Function:xn.CompletionItemKind.Variable}var Th=Bt(Zn());function vh(e){let t=new Th.SemanticTokensBuilder;return e.forEach((n,r)=>{pv(t,n)}),t.build()}function pv(e,t){if(e.push(t.location.start.line,t.location.start.character,t.text.length,t.highlight.token,t.highlight.modifier),t.location.start.line!==t.location.end.line){for(let n=t.location.start.line+1;n<t.location.end.line;n++)e.push(n,0,t.text.length,t.highlight.token,t.highlight.modifier);e.push(t.location.end.line,0,t.location.end.character,t.highlight.token,t.highlight.modifier)}}function xh(e,t,n){let r=jo(e,n);if(r===void 0)return[];let i=t.flatMap(o=>Nh(o,r));return i.push(r),i}function Nh(e,t){let n=[];for(let r of e.referencedList)(r.declaredSymbol.declaredPlace===t||Ao(r.declaredSymbol.declaredPlace,t))&&n.push(r.referencedToken);for(let[r,i]of e.childScopes)n.push(...Nh(i,t));return n}function mv(){return Ne().formatter.useTabIndent?"	":" ".repeat(Ne().formatter.indentSpaces)}var ss=class{constructor(t,n,r){this.content=t;this.tokens=n;this.ast=r;this.resultEdits=[];this.cursor={line:0,character:0};this.indentStack=[];this.indentBuffer="";this.condenseStack=!1;this.wrapStack=!1;this.indentUnit=mv();this.textLines=hv(t),this.map=new nu(this.textLines,n)}getResult(){return this.resultEdits}pushEdit(t,n,r){this.resultEdits.push({range:{start:t,end:n},newText:r})}getText(t,n,r=1){return n===void 0?this.textLines[t]:this.textLines[t].substring(n,n+r)}getTextAt(t,n=1){return this.textLines[t.line].substring(t.character,t.character+n)}cursoredText(){return this.getTextAt(this.cursor)}getCursor(){return{line:this.cursor.line,character:this.cursor.character}}setCursor(t){this.cursor.line=t.line,this.cursor.character=t.character}setCursorToTail(t){this.setCursor(t.location.end)}stepCursor(){this.setCursor(Xr(this.textLines,this.cursor))}isFinished(){return this.cursor.line>=this.textLines.length}getIndent(){return this.indentBuffer}pushIndent(){let t={line:this.cursor.line,isApplied:!1},n=this.indentStack[this.indentStack.length-1];this.indentStack.length===0||n.line!==t.line?(this.indentBuffer+=this.indentUnit,t.isApplied=!0):n.isApplied&&(n.isApplied=!1,t.isApplied=!0),this.indentStack.push(t)}popIndent(){let t=this.indentStack.pop();if(t?.isApplied===!0){let n=this.indentStack[this.indentStack.length-1];t.line===this.cursor.line&&n?.isApplied===!1?n.isApplied=!0:this.indentBuffer=this.indentBuffer.substring(0,this.indentBuffer.length-this.indentUnit.length)}}pushCondense(){this.condenseStack=!0}popCondense(){let t=this.condenseStack;return this.condenseStack=!1,t}pushWrap(){this.wrapStack=!0}popWrap(){let t=this.wrapStack;return this.wrapStack=!1,t}};function Xr(e,t){let n={character:t.character,line:t.line};return n.line>=e.length||(n.character++,n.character>=e[n.line].length&&(n.line++,n.character=0)),n}function hv(e){let t=e.split(/(\r?\n|\r)/),n=[];for(let r=0;r<t.length;r+=2){let i=t[r],o=r+1<t.length?t[r+1]:"";n.push(i+o)}return n}function Ph(e,t){for(let n of e)if(n.range.start.line===t&&n.newText.includes(`
`))return!0;return!1}var nu=class{constructor(t,n){this.map=[];for(let r=0;r<t.length;r++){let i=new Array(t[r].length).fill(void 0);this.map.push(i)}for(let r of n){let i=r.location.start,o=r.location.end;for(let c=i.line;c<=o.line;c++){let l=this.map[c],b=c===i.line?i.character:0,T=c===o.line?o.character:t[c].length;for(let x=b;x<T;x++)l[x]=r}}}getToken(t,n){return this.map[t][n]}getTokenAt(t){return this.map[t.line][t.character]}};function gv(e){return e===void 0?!1:/\s/.test(e)}function as(e,t){let n=t.line,r=t.character;for(;r>0&&gv(e.getText(n,r-1))!==!1;)r--;return{line:n,character:r}}function ru(e,t){let n={line:t.location.start.line,character:t.location.start.character},r=as(e,n);if(r.character===0){e.setCursorToTail(t);return}let i=e.map.getTokenAt({line:r.line,character:r.character-1}),o=yv(i,t)?" ":"";e.pushEdit(r,n,r.character>0?o:e.getIndent()),e.setCursorToTail(t)}function yv(e,t){let n=e?.location?.end,r=t.location.start;return!(n?.line===r.line&&n.character===r.character||e?.text==="#")}function z(e,t){iu(e,t.nodeRange.start.location.start)}function iu(e,t){let n=e.getCursor();for(;e.isFinished()===!1;){if(n.line>=e.textLines.length){let o={line:e.textLines.length-1,character:e.textLines[e.textLines.length-1].length};e.pushEdit(e.getCursor(),o,`
`);return}let r=e.map.getTokenAt(n);if(r===void 0){n=Xr(e.textLines,n);continue}if(n.line-e.getCursor().line>1+ou()&&Rh(e,e.getCursor().line+1,n.line-1),(n.line>t.line||n.line===t.line&&n.character>=t.character)===!1){ru(e,r),n=e.getCursor();continue}break}}function mt(e){let t=e.getCursor();for(;e.isFinished()===!1;){let n=e.map.getTokenAt(t);if(n===void 0){t=Xr(e.textLines,t);continue}else if(n.kind==="Comment"){ru(e,n),t=e.getCursor();continue}return n}}function N(e,t,n){let r=e.getCursor();for(;e.isFinished()===!1;){let i=e.map.getTokenAt(r);if(i===void 0){r=Xr(e.textLines,r);continue}else if(i.kind==="Comment"){ru(e,i),r=e.getCursor();continue}return e.getTextAt(r,t.length)!==t?(Zt.verbose(`'${t}' not found at ${r.line}:${r.character}`),!1):(bv(e,t,n,r,i),!0)}return!1}function ou(){return Math.max(1,Ne().formatter.maxBlankLines)}function Rh(e,t,n){for(let r=t;r<=n;r++)if(/^\s*$/.test(e.textLines[r])===!1){Zt.verbose(`Not a blank line at ${r}`);return}e.pushEdit({line:t,character:0},{line:n,character:e.textLines[n].length-1},`
`.repeat(ou()-1)),e.setCursor({line:n+1,character:0})}function bv(e,t,n,r,i){let o=e.popCondense()||n.condenseSides===!0||n.condenseLeft===!0;(n.condenseSides===!0||n.condenseRight===!0)&&e.pushCondense();let l=e.popWrap()||n.forceWrap===!0,b=o?"":" ",T={line:i.location.start.line,character:i.location.start.character};if(l===!1&&n.connectTail===!0){let x=as(e,e.getCursor());e.pushEdit(x,T,(x.character===0?e.getIndent():"")+b)}else{r.line-e.getCursor().line>1+ou()&&Rh(e,e.getCursor().line+1,r.line-1);let x=e.getCursor(),w=as(e,x);if(w.character===0)e.pushEdit(w,T,e.getIndent());else{let I=x.line===T.line,ie=I?w:as(e,T),ue=I?l?`
`+e.getIndent():b:e.getIndent();e.pushEdit(ie,T,ue)}}r.character+=t.length,e.setCursor(r)}function Dh(e,t){for(let n of t){let r=n.nodeName;r==="Import"?Nv(e,n):r==="Enum"?Tv(e,n):r==="TypeDef"?vv(e,n):r==="Class"?Ch(e,n):r==="Mixin"?Pv(e,n):r==="Interface"?xv(e,n):r==="FuncDef"?wh(e,n):r==="VirtualProp"?cu(e,n):r==="Var"?cs(e,n):r==="Func"?_h(e,n):r==="Namespace"&&Sv(e,n)}}function Sv(e,t){z(e,t),e.pushWrap(),N(e,"namespace",{}),e.pushIndent();for(let n=0;n<t.namespaceList.length;n++){n>0&&N(e,"::",{condenseSides:!0});let r=t.namespaceList[n];N(e,r.text,{})}e.popIndent(),rn(e,()=>{Dh(e,t.script)})}function rn(e,t,n=!0){if(N(e,"{",{connectTail:!0})===!1)return;let r=e.getCursor().line;n&&e.pushIndent(),t(),n&&e.popIndent();let i=r!==e.getCursor().line||Ph(e.getResult(),r);N(e,"}",{forceWrap:i})}function Tv(e,t){z(e,t),e.pushWrap(),Yr(e),N(e,"enum",{}),N(e,t.identifier.text,{}),rn(e,()=>{for(let n=0;n<t.memberList.length;n++){n>0&&N(e,",",{condenseLeft:!0}),N(e,t.memberList[n].identifier.text,{});let r=t.memberList[n].expr;r!==void 0&&(N(e,"=",{}),Zr(e,r))}})}function Ch(e,t){z(e,t),e.pushWrap(),Yr(e),N(e,"class",{}),N(e,t.identifier.text,{}),mt(e)?.text===";"?N(e,";",{condenseLeft:!0,connectTail:!0}):rn(e,()=>{for(let n of t.memberList)n.nodeName==="VirtualProp"?cu(e,n):n.nodeName==="FuncDef"?wh(e,n):n.nodeName==="Var"?cs(e,n):n.nodeName==="Func"&&_h(e,n)})}function vv(e,t){z(e,t),e.pushWrap(),N(e,"typedef",{}),N(e,t.type.text,{}),N(e,t.identifier.text,{}),N(e,";",{condenseLeft:!0,connectTail:!0})}function _h(e,t){z(e,t),e.pushWrap(),Yr(e),au(e),tr(t.head)?(it(e,t.head.returnType),t.head.isRef&&N(e,"&",{condenseLeft:!0})):t.head===Ot&&N(e,"~",{condenseRight:!0}),N(e,t.identifier.text,{}),us(e,t.paramList),t.isConst&&N(e,"const",{}),lu(e),mt(e)?.text===";"?N(e,";",{condenseLeft:!0,connectTail:!0}):ur(e,t.statBlock)}function Yr(e){for(;;){let t=mt(e);if(t===void 0)return;if(t.text==="shared"||t.text==="abstract"||t.text==="final"||t.text==="external")N(e,t.text,{});else return}}function au(e){let t=mt(e);t!==void 0&&(t.text==="private"||t.text==="protected")&&N(e,t.text,{})}function xv(e,t){z(e,t),e.pushWrap(),Yr(e),N(e,"interface",{}),N(e,t.identifier.text,{}),mt(e)?.text===";"?N(e,";",{condenseLeft:!0,connectTail:!0}):rn(e,()=>{for(let n of t.memberList)n.nodeName==="VirtualProp"?cu(e,n):n.nodeName==="IntfMethod"&&Rv(e,n)})}function cs(e,t){z(e,t),au(e),it(e,t.type);for(let n=0;n<t.variables.length;n++){n>0&&N(e,",",{condenseLeft:!0}),N(e,t.variables[n].identifier.text,{});let r=t.variables[n].initializer;r!==void 0&&(r.nodeName==="InitList"?(N(e,"=",{}),uu(e,r)):r.nodeName==="Assign"?(e.pushIndent(),N(e,"=",{}),Ae(e,r),e.popIndent()):ds(e,r))}N(e,";",{condenseLeft:!0,connectTail:!0})}function Nv(e,t){z(e,t),e.pushWrap(),N(e,"import",{}),it(e,t.type),t.isRef&&N(e,"&",{condenseLeft:!0}),N(e,t.identifier.text,{}),us(e,t.paramList),lu(e),N(e,"from",{}),N(e,t.path.text,{}),N(e,";",{condenseLeft:!0,connectTail:!0})}function wh(e,t){z(e,t),e.pushWrap(),Yr(e),N(e,"funcdef",{}),it(e,t.returnType),t.isRef&&N(e,"&",{condenseLeft:!0}),N(e,t.identifier.text,{}),us(e,t.paramList),N(e,";",{condenseLeft:!0,connectTail:!0})}function cu(e,t){z(e,t),e.pushWrap(),au(e),it(e,t.type),t.isRef&&N(e,"&",{condenseLeft:!0}),N(e,t.identifier.text,{}),rn(e,()=>{for(;;){let n=t.getter,r=t.setter,i=mt(e);if(i?.text==="get"&&n!==void 0)N(e,"get",{}),kh(e,n.isConst,n.statBlock);else if(i?.text==="set"&&r!==void 0)N(e,"set",{}),kh(e,r.isConst,r.statBlock);else break}})}function kh(e,t,n){t&&N(e,"const",{}),lu(e),n===void 0?N(e,";",{condenseLeft:!0,connectTail:!0}):ur(e,n)}function Pv(e,t){z(e,t),e.pushWrap(),N(e,"mixin",{}),Ch(e,t.mixinClass)}function Rv(e,t){z(e,t),e.pushWrap(),it(e,t.returnType),t.isRef&&N(e,"&",{condenseLeft:!0}),N(e,t.identifier.text,{}),us(e,t.paramList),t.isConst&&N(e,"const",{}),N(e,";",{condenseLeft:!0,connectTail:!0})}function ur(e,t){z(e,t);let n=fm(t.nodeRange);rn(e,()=>{for(let r of t.statementList)n===!1&&e.pushWrap(),r.nodeName==="Var"?cs(e,r):Nn(e,r)})}function us(e,t){Nt(e,()=>{t.length===0&&mt(e)?.text==="void"&&N(e,"void",{});for(let n=0;n<t.length;n++){n>0&&N(e,",",{condenseLeft:!0}),it(e,t[n].type),Eh(e);let r=t[n].identifier;r!==void 0&&N(e,r.text,{});let i=t[n].defaultExpr;i!==void 0&&(N(e,"=",{}),Zr(e,i))}})}function Nt(e,t,n=!0){N(e,"(",{condenseLeft:n,condenseRight:!0})!==!1&&(e.pushIndent(),t(),e.popIndent(),N(e,")",{condenseLeft:!0}))}function Eh(e){let t=mt(e);if(t!==void 0&&t.text==="&"){N(e,"&",{condenseLeft:!0});let n=mt(e);if(n===void 0)return;(n.text==="in"||n.text==="out"||n.text==="inout")&&N(e,t.text,{})}}function it(e,t){z(e,t),t.isConst&&N(e,"const",{}),t.scope!==void 0&&du(e,t.scope),Dv(e,t.dataType),kv(e,t.typeTemplates),t.isArray&&(N(e,"[",{condenseSides:!0}),N(e,"]",{condenseLeft:!0})),t.refModifier!==void 0&&(N(e,"@",{condenseLeft:!0}),t.refModifier==="AtConst"&&N(e,"const",{}))}function kv(e,t){t.length!==0&&Oh(e,()=>{for(let n=0;n<t.length;n++)n>0&&N(e,",",{condenseLeft:!0}),it(e,t[n])})}function Oh(e,t){N(e,"<",{condenseSides:!0})!==!1&&(e.pushIndent(),t(),e.popIndent(),N(e,">",{condenseLeft:!0}))}function uu(e,t){z(e,t),rn(e,()=>{for(let n=0;n<t.initList.length;n++){n>0&&N(e,",",{condenseLeft:!0});let r=t.initList[n];r.nodeName==="InitList"?uu(e,r):Ae(e,r)}})}function du(e,t){z(e,t),t.isGlobal&&N(e,"::",{condenseSides:!0});for(let n=0;n<t.scopeList.length;n++){let r=t.scopeList[n];N(e,r.text,{}),N(e,"::",{condenseSides:!0})}}function Dv(e,t){z(e,t),N(e,t.identifier.text,{})}function lu(e){for(;;){let t=mt(e);if(t===void 0)return;if(t.text==="override"||t.text==="final"||t.text==="explicit"||t.text==="property")N(e,t.text,{});else return}}function Nn(e,t,n=!1){let r=n&&t.nodeName!=="StatBlock";switch(r&&e.pushIndent(),t.nodeName){case"If":Iv(e,t);break;case"For":wv(e,t);break;case"While":Ev(e,t);break;case"Return":qv(e,t);break;case"StatBlock":ur(e,t);break;case"Break":_v(e,t);break;case"Continue":Mv(e,t);break;case"DoWhile":Ov(e,t);break;case"Switch":Cv(e,t);break;case"ExprStat":su(e,t);break;case"Try":Lv(e,t);break}r&&e.popIndent()}function Cv(e,t){z(e,t),N(e,"switch",{}),Nt(e,()=>{Ae(e,t.assign)}),rn(e,()=>{for(let n of t.caseList)Fv(e,n)},!1)}function _v(e,t){z(e,t),N(e,"break",{}),N(e,";",{condenseLeft:!0,connectTail:!0})}function wv(e,t){z(e,t),N(e,"for",{}),Nt(e,()=>{t.initial.nodeName==="Var"?cs(e,t.initial):su(e,t.initial),t.condition!==void 0&&su(e,t.condition);for(let n of t.incrementList)Ae(e,n)},!1),t.statement!==void 0&&Nn(e,t.statement,!0)}function Ev(e,t){z(e,t),N(e,"while",{}),Nt(e,()=>{Ae(e,t.assign)},!1),t.statement!==void 0&&Nn(e,t.statement,!0)}function Ov(e,t){z(e,t),N(e,"do",{}),t.statement!==void 0&&Nn(e,t.statement,!0),N(e,"while",{connectTail:!0}),Nt(e,()=>{t.assign!==void 0&&Ae(e,t.assign)},!1),N(e,";",{condenseLeft:!0,connectTail:!0})}function Iv(e,t){z(e,t),N(e,"if",{}),Nt(e,()=>{Ae(e,t.condition)},!1),t.thenStat!==void 0&&Nn(e,t.thenStat,!0),t.elseStat!==void 0&&(N(e,"else",{connectTail:!0}),Nn(e,t.elseStat,!0))}function Mv(e,t){z(e,t),N(e,"continue",{}),N(e,";",{condenseLeft:!0,connectTail:!0})}function su(e,t){z(e,t),t.assign!==void 0&&Ae(e,t.assign),N(e,";",{condenseLeft:!0,connectTail:!0})}function Lv(e,t){z(e,t),N(e,"try",{}),ur(e,t.tryBlock),N(e,"catch",{connectTail:!0}),t.catchBlock!==void 0&&ur(e,t.catchBlock)}function qv(e,t){z(e,t),N(e,"return",{}),e.pushIndent(),t.assign!==void 0&&Ae(e,t.assign),N(e,";",{condenseLeft:!0,connectTail:!0}),e.popIndent()}function Fv(e,t){z(e,t),t.expr!==void 0?(N(e,"case",{}),Zr(e,t.expr)):N(e,"default",{}),N(e,":",{condenseLeft:!0,connectTail:!0}),e.pushIndent();for(let n of t.statementList)Nn(e,n,!1);e.popIndent()}function Zr(e,t){z(e,t),Av(e,t.head),t.tail!==void 0&&(e.pushIndent(),N(e,t.tail.operator.text,{}),Zr(e,t.tail.expression),e.popIndent())}function Av(e,t){if(z(e,t),t.exprTerm===1)t.type!==void 0&&it(e,t.type),N(e,"=",{}),uu(e,t.initList);else if(t.exprTerm===2){for(let n=0;n<t.preOps.length;n++)N(e,t.preOps[n].text,{condenseRight:!0});jv(e,t.value);for(let n=0;n<t.postOps.length;n++)Wv(e,t.postOps[n])}}function jv(e,t){t.nodeName==="ConstructCall"?Bv(e,t):t.nodeName==="FuncCall"?Ih(e,t):t.nodeName==="VarAccess"?$v(e,t):t.nodeName==="Cast"?Hv(e,t):t.nodeName==="Literal"?N(e,t.value.text,{}):t.nodeName==="Assign"?Nt(e,()=>{Ae(e,t)},!1):t.nodeName==="Lambda"&&Vv(e,t)}function Bv(e,t){z(e,t),it(e,t.type),ds(e,t.argList)}function Wv(e,t){z(e,t),e.pushIndent(),t.postOp===1?(N(e,".",{condenseSides:!0}),t.member!==void 0&&("nodeName"in t.member?Ih(e,t.member):N(e,t.member.text,{}))):t.postOp===2?zv(e,()=>{for(let n=0;n<t.indexerList.length;n++){n>0&&N(e,",",{condenseLeft:!0});let r=t.indexerList[n];r.identifier!==void 0&&(N(e,r.identifier.text,{}),N(e,":",{condenseLeft:!0,connectTail:!0})),Ae(e,r.assign)}}):t.postOp===3?ds(e,t.args):t.postOp===4&&N(e,t.operator,{condenseLeft:!0}),e.popIndent()}function zv(e,t){N(e,"[",{condenseSides:!0})!==!1&&(e.pushIndent(),t(),e.popIndent(),N(e,"]",{condenseLeft:!0}))}function Hv(e,t){z(e,t),N(e,"cast",{}),Oh(e,()=>{it(e,t.type)}),Nt(e,()=>{Ae(e,t.assign)})}function Vv(e,t){z(e,t),N(e,"function",{}),Nt(e,()=>{for(let n=0;n<t.paramList.length;n++){n>0&&N(e,",",{condenseLeft:!0});let r=t.paramList[n];r.type!==void 0&&it(e,r.type),Eh(e),r.identifier!==void 0&&N(e,r.identifier.text,{})}}),t.statBlock!==void 0&&ur(e,t.statBlock)}function Ih(e,t){z(e,t),t.scope!==void 0&&du(e,t.scope),N(e,t.identifier.text,{}),ds(e,t.argList)}function $v(e,t){z(e,t),t.scope!==void 0&&du(e,t.scope),t.identifier!==void 0&&N(e,t.identifier.text,{})}function ds(e,t){z(e,t),Nt(e,()=>{for(let n=0;n<t.argList.length;n++){n>0&&N(e,",",{condenseLeft:!0});let r=t.argList[n];r.identifier!==void 0&&(N(e,r.identifier.text,{}),N(e,":",{connectTail:!0})),Ae(e,r.assign)}})}function Ae(e,t){z(e,t),Uv(e,t.condition),t.tail!==void 0&&(N(e,t.tail.operator.text,{}),Ae(e,t.tail.assign))}function Uv(e,t){z(e,t),Zr(e,t.expr),t.ternary!==void 0&&(e.pushIndent(),N(e,"?",{}),Ae(e,t.ternary.trueAssign),N(e,":",{}),Ae(e,t.ternary.falseAssign),e.popIndent())}function Mh(e,t,n){let r=new ss(e,t,n);return Dh(r,n),iu(r,{line:r.textLines.length,character:0}),r.getResult()}function Lh(e,t,n){let r=Jr(e,t,n),i=[];for(let o=0;o<r.completionHints.length;o++){let c=r.completionHints[o];if(c.complementKind!=="Arguments")continue;let l=c.complementLocation;if(Et(t,l)){let b=c.expectedCallee;for(;i.push(Kv(c,b,t)),b.nextOverload!==void 0;)b=b.nextOverload;break}}return{signatures:i}}function Kv(e,t,n){let r=[],i=0,o=t.sourceNode.identifier.text+"(";for(let l=0;l<t.sourceNode.paramList.length;l++){let b=t.sourceNode.paramList[l],T=t.parameterTypes[l],x=ve(rr(e.templateTranslate,T));b.identifier!==void 0&&(x+=" "+b.identifier?.text);let w={label:x};l>0&&(o+=", "),o+=x,l<e.passingRanges.length&&tm(n,e.passingRanges[l].start.location.start)===!1&&(i=l,e.passingRanges[l].end.next?.text===","&&i++),r.push(w)}return o+=")",{label:o,parameters:r,activeParameter:i}}var ye=(0,ot.createConnection)(ot.ProposedFeatures.all),dr=new ot.TextDocuments(Mo),qh=!1,Fh=!1,Gv=!1;ye.onInitialize(e=>{let t=e.capabilities;qh=!!(t.workspace&&t.workspace.configuration),Fh=!!(t.workspace&&t.workspace.workspaceFolders),Gv=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);let n={capabilities:{textDocumentSync:ot.TextDocumentSyncKind.Incremental,definitionProvider:!0,declarationProvider:!0,referencesProvider:!0,renameProvider:!0,hoverProvider:!0,signatureHelpProvider:{triggerCharacters:["(",")",","],retriggerCharacters:["="]},completionProvider:{resolveProvider:!0,triggerCharacters:[" ",".",":"]},diagnosticProvider:{interFileDependencies:!1,workspaceDiagnostics:!1},semanticTokensProvider:{legend:{tokenTypes:Vp,tokenModifiers:$p},range:!1,full:!0},documentFormattingProvider:!0}};return n.capabilities.workspace={workspaceFolders:{supported:!1}},n});function Ah(){ye.workspace.getConfiguration("angelScript").then(e=>{om(e),hh()})}ye.onInitialized(()=>{qh&&ye.client.register(ot.DidChangeConfigurationNotification.type,void 0),Fh&&ye.workspace.onDidChangeWorkspaceFolders(e=>{ye.console.log("Workspace folder change event received.")}),Ah()});ye.onDidChangeConfiguration(e=>{Ah()});dr.onDidClose(e=>{});ye.languages.diagnostics.on(async e=>({kind:ot.DocumentDiagnosticReportKind.Full,items:[...xt(e.textDocument.uri).diagnosticsInAnalyzer,...xt(e.textDocument.uri).diagnosticsInParser]}));ye.languages.semanticTokens.on(e=>vh(xt(e.textDocument.uri).tokenizedTokens));ye.onDefinition(e=>{if(dr.get(e.textDocument.uri)===void 0)return;let n=xt(e.textDocument.uri).analyzedScope;if(n===void 0)return;let r=e.position,i=jo(n,r);if(i!==void 0)return mc(i)});function jh(e){if(dr.get(e.textDocument.uri)===void 0)return[];let n=xt(e.textDocument.uri).analyzedScope;if(n===void 0)return[];let r=e.position;return xh(n,mh().map(o=>o.analyzedScope.fullScope),r).map(o=>mc(o))}ye.onReferences(e=>jh(e));ye.onRenameRequest(e=>{let t=jh(e),n={};return t.forEach(r=>{let i=r.uri;n[i]===void 0&&(n[i]=[]),n[i].push({range:r.range,newText:e.newName})}),{changes:n}});ye.onHover(e=>{if(dr.get(e.textDocument.uri)===void 0)return;let n=xt(e.textDocument.uri).analyzedScope;if(n===void 0)return;let r=e.position,i=hc(n,r);if(i!==void 0)return{contents:[{language:"c#",value:Lm(i)}]}});dr.onDidChangeContent(e=>{fh(),is(e.document.getText(),e.document.uri)});ye.onDidChangeWatchedFiles(e=>{ye.console.log("We received a file change event")});ye.onCompletion(e=>{let t=e.textDocument.uri,n=xt(t).analyzedScope;return n===void 0?[]:yh(n.fullScope,e.position,t)});ye.onCompletionResolve(e=>(e.data===1?(e.detail="TypeScript details",e.documentation="TypeScript documentation"):e.data===2&&(e.detail="AngelScript details",e.documentation="AngelScript documentation"),e));ye.onSignatureHelp(e=>{let t=e.textDocument.uri,n=xt(t).analyzedScope;return n===void 0?null:Lh(n.fullScope,e.position,t)});ye.onDocumentFormatting(e=>{let t=xt(e.textDocument.uri);return Mh(t.content,t.tokenizedTokens,t.parsedAst)});dr.listen(ye);ye.listen();
